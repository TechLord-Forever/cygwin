<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      lang="en-US">
<head>
    <title>Cygwin/X - Development - XWin Server - Change
    Log</title>
    <meta http-equiv="Content-Type"
          content="text/html; charset=us-ascii" />
    <link rel="stylesheet"
          type="text/css"
          href="changelog.css" />
    <meta name="Author"
          content="Harold L Hunt II" />
    <meta name="keywords"
          content="xfree86, Cygwin, X, x window system, microsoft, windows, x/server, xserver, x-server, Cygwin/X, Win32, Win32API, Win32 API, shadow, shadowfb, fb" />
    <meta name="description"
          content="Cygwin/X - Development - XWin Server - Change Log" />
          
</head>

<body>
<!-- HEADER MODIFIED: $Date: 2004/09/17 08:31:46 $ $Author: ago $ -->

    <!-- BEGIN banner - logo, project name and tagline -->

    <table summary="banner"
           cellspacing="0"
           cellpadding="0"
           width="100%"
           border="0">
        <tr>
            <td valign="middle"
                    align="center"
                    class="tdBanner">
                    <p class="companyName">Cygwin/X</p>
            </td>
        </tr>
    </table><!-- END banner - logo, company name and tagline -->

    <table summary="Left bar"
           cellspacing="0"
           cellpadding="0"
           align="left"
           width="100%"
           border="0">
        <tr valign="top">
            <td width="15%"
                rowspan="2">
<!-- ================================================================== -->
<!--                                                                    -->
<!--                         Left Sidebar                               -->
<!--                                                                    -->
<!-- LEFT SIDEBAR MODIFIED: $Date: 2004/09/17 08:31:46 $ $Author: ago $ -->

    <table summary=""
           align="left"
           border="0"
           cellspacing="0"
           cellpadding="5"
           width="100%">
        <tr>
            <td bgcolor="#EEEEEE"
                valign="top">
                <table summary="Leftbar links"
                       border="0"
                       cellspacing="0"
                       cellpadding="3"
                       width="100%">
                    <tr>
                        <td colspan="2">
                        <a href="http://x.cygwin.com/">Cygwin/X
                        Home</a></td>
                    </tr>

                    <tr>
                        <td colspan="2">
                        <a href="http://cygwin.com/">Cygwin
                        Home</a></td>
                    </tr>

                    <tr>
                        <td colspan="2">
                            <a href="http://sources.redhat.com/">sources.redhat.com</a><br />

                            <hr width="80%" />
                        </td>
                    </tr>

                    <tr>
                        <td colspan="2">
                        <a href="http://x.cygwin.com/chat.html">Chat
                        (IRC)</a></td>
                    </tr>

                    <tr>
                        <td colspan="2">
                        <a href="http://x.cygwin.com/contributors.html">
                        Contributors</a></td>
                    </tr>

                    <tr>
                        <td colspan="2">
                        <a href="http://x.cygwin.com/devel/">Development</a></td>
                    </tr>

                    <tr>
                        <td><tt>&nbsp;</tt></td>

                        <td>
                        <small><a href="http://x.cygwin.com/devel/changelogs.html">
                        Change Logs</a></small></td>
                    </tr>

                    <tr>
                        <td><tt>&nbsp;</tt></td>

                        <td>
                        <small><a href="http://x.cygwin.com/devel/documentation/">
                        Documentation</a></small></td>
                    </tr>

                    <tr>
                        <td><tt>&nbsp;</tt></td>

                        <td>
                        <small><a href="http://x.cygwin.com/devel/todo.html">
                        To-Do List</a></small></td>
                    </tr>

                    <tr>
                        <td><tt>&nbsp;</tt></td>

                        <td>
                        <small><a href="http://x.cygwin.com/devel/server/">
                        XWin Server</a></small></td>
                    </tr>

                    <tr>
                        <td colspan="2">
                        <a href="http://x.cygwin.com/docs/">Documentation</a></td>
                    </tr>

                    <tr>
                        <td><tt>&nbsp;</tt></td>

                        <td>
                        <small><a href="http://x.cygwin.com/docs/cg/">
                        Contributor's Guide</a></small></td>
                    </tr>

                    <tr>
                        <td><tt>&nbsp;</tt></td>

                        <td>
                        <small><a href="http://x.cygwin.com/docs/faq/">
                        Frequently Asked Questions</a></small></td>
                    </tr>

                    <tr>
                        <td><tt>&nbsp;</tt></td>

                        <td>
                        <small><a href="http://x.cygwin.com/docs/ug/">
                        User's Guide</a></small></td>
                    </tr>

                    <tr>
                        <td colspan="2">
                        <a href="http://x.cygwin.com/donations.html">
                        Donations</a></td>
                    </tr>

                    <tr>
                        <td colspan="2">
                        <a href="http://x.cygwin.com/features.html">
                        Features</a></td>
                    </tr>

                    <tr>
                        <td colspan="2">
                        <a href="http://cygwin.com/lists.html">Mailing
                        Lists</a></td>
                    </tr>

                    <tr>
                        <td><tt>&nbsp;</tt></td>

                        <td>
                        <small><a href="http://cygwin.com/ml/cygwin-xfree/">
                        cygwin-xfree</a></small></td>
                    </tr>

                    <tr>
                        <td><tt>&nbsp;</tt></td>

                        <td>
                        <small><a href="http://cygwin.com/ml/cygwin-xfree-announce/">
                        cygwin-xfree-announce</a></small></td>
                    </tr>

                    <tr>
                        <td colspan="2">
                        <a href="http://cygwin.com/mirrors.html">Mirror
                        Sites</a></td>
                    </tr>

                    <tr>
                        <td colspan="2">
                        <a href="http://x.cygwin.com/ported-software.html">
                        Ported Software</a></td>
                    </tr>

                    <tr>
                        <td colspan="2">
                        <a href="http://x.cygwin.com/links.html">Related
                        Sites</a></td>
                    </tr>

                    <tr>
                        <td colspan="2">
                        <a href="http://x.cygwin.com/screenshots/">Screenshots</a></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>

            </td>

            <td width="85%">
                <div style="margin-left: 5px;">

    <h2>Cygwin/X - Development - XWin Server - Change Log</h2>
<h4>Release 6.8.2-4</h4>
<table>
<tbody>
<tr><td>Released: 2005-07-06 1200 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Fix simultanious presses of Left and Right Control and Shift keys.
<a href="https://bugs.freedesktop.org/show_bug.cgi?id=3677">[BUG 3677]</a>
(Alexander Gottwald)</li>
<li>Fix problem with fake Control press on Alt-Gr.
<a href="https://bugs.freedesktop.org/show_bug.cgi?id=3680">[BUG 3680]</a>
(Alexander Gottwald)</li>
</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.2-3</h4>
<table>
<tbody>
<tr><td>Released: 2005-07-04 1200 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Do not use alloca since it does crash the program if not enough memory is available (Alexander Gottwald)</li>
<li>Added layout "French (Canada)" as ca_enhanced. (Alexander Gottwald)</li>
<li>Added Czech (QWERTY) layout. (Alexander Gottwald)</li>
<li>Print error code if winStoreColorsShadowDDNL fails (Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.2-2</h4>
<table>
<tbody>
<tr><td>Released: 2005-04-26 1300 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>/tmp/.X11-unix is created without the sticky flag. (Alexander Gottwald)</li>
<li>French canadian keyboard layout has been postponed since no user was able
to provide the correct XKB code nor did they give enough information for 
selecting the correct layout.</li>

</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.2-1</h4>
<table>
<tbody>
<tr><td>Released: 2005-02-23 1800 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Upstream Update to Xorg 6.8.2</li>
<li>Updated fix for ABNT2 and HK_Toggle keys tested with Windows On Screen 
Keyboard. (Alexander Gottwald)</li>
<li>Fixed incorrect wrapping of some server functions which might have 
lead to various problems, maybe crashes. (Alexander Gottwald)<br/>
The bug was discovered while debugging OpenGL integration and lead to a 
crash after several GLX clients had disconnected. Since the bug included
incorrect wrapping of other functions not related to the crash this might
fix other problems too which occured quite randomly or only after several
repeats of an action.</li>

</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.1-11</h4>
<table>
<tbody>
<tr><td>Released: 2005-02-08 1200 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Backout ABNT2 and HK_Toggle fix since it broke keys F1 and F4. (Alexander Gottwald)<br/>
<em>Please Note:</em> Starting with the next upstream release the XKB definitions for ABNT2 and Japanese keyboards will not map some keys properly. Unless some of the users contact me before this it will break some keys.</li>

<li>Moved keyboard layout table to external file. (Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.1-10</h4>
<table>
<tbody>
<tr><td>Released: 2005-02-02 2000 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Fixes mainwindow not showing up with run.exe bug (Alexander Gottwald)</li>

<li>Create windows with SWP_NOACTIVATE flag (Kensuke Matsuzaki)</li>

<li>Fixes for window ordering problem (Kensuke Matsuzaki)</li>

<li>Added hungarian keyboard layout (Alexander Gottwald)</li>

<li>Document the -silent-dup-error switch (Alexander Gottwald)</li>

<li>Do not grab ALT-TAB when window is in multiwindow mode (Alexander Gottwald)</li>

<li>Adjust keysyms for  Hiragana_Katakana toggle and backslash/underscore
on Japanese and ABNT2 keyboards (needs testing) (Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.1-9</h4>
<table>
<tbody>
<tr><td>Released: 2005-01-10 1800 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Make keyhook feature work in multiwindow mode (Alexander Gottwald)</li>

<li>Fix crash with non-nullterminated strings (Alexander Gottwald, reported by &Oslash;yvind Harboe)</li>

<li>Stop unnecessary reordering in multiwindow mode (Kensuke Matsuzaki)</li>

</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.1-8</h4>
<table>
<tbody>
<tr><td>Released: 2004-12-14 1700 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Fixed problem with EnumDisplayMonitors on Window NT4 and 95 (Alexander
Gottwald)</li>
</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.1-7</h4>
<table>
<tbody>
<tr><td>Released: 2004-12-08 2200 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Added support for placing the mainwindow on a non-default monitor
(Mark Fisher)</li>
</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.1-6</h4>
<table>
<tbody>
<tr><td>Released: 2004-12-06 1700 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Added support for placing the mainwindow (Earle Philhower)</li>

<li>The multiwindow mode defines a default cursor (Alexander Gottwald)</li>

<li>Added keyboard layout "French (Switzerland)" (Alexander Gottwald)</li>

<li>Added missing programs/Xserver/XpConfig to source distribution (Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.1-5</h4>
<table>
<tbody>
<tr><td>Released: 2004-10-28 1600 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Fix crash after switching resolutions (eg. games switching to fullscreen).
 (Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.1-4</h4>
<table>
<tbody>
<tr><td>Released: 2004-10-26 1400 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Add entries from /etc/X11/font-dirs to default fontpath. (Alexander Gottwald)</li>

<li>Added "ShowCursor" entry to taskbar menu. If the pointer disappears you can 
click it until the pointer reappears (Alexander Gottwald)</li>

<li>Make -multiplemonitors the default for -multiwindow and -mwextwm (&Oslash;yvind Harboe, Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.1-3</h4>
<table>
<tbody>
<tr><td>Released: 2004-10-05 1800 MET</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Fix bug with two-button mice and button detection. (Alexander Gottwald)</li>

<li>Do not adjust workarea if native windowmanager is used. (Alexander 
Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.1-2</h4>
<table>
<tbody>
<tr><td>Released: 2004-09-22 1200 MEST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>
<tr>
<td>
<ul>
<li>Fix clipboard bug with unicode applications (Kensuke Matsuzaki)</li>

<li>Do not remount font directory to binmode. The font-update script should
work well even on textmounts</li>

</ul>
</td>
</tr>
</tbody>
</table>

<h4>Release 6.8.1-1</h4>
<table>
<tbody>
<tr><td>Released: 2004-09-17 1730 MEST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>
<li>Sync with upstream security release X11R6.8.1<br/>
  The X11R6.8.1 release is a security release on top of X11R6.8.0.
  it patches several holes in the X Pixmap library (libXpm).</li>

<li>fix bug in BigFont extension which caused Xnest to crash if
  IPC was not available (Alexander Gottwald)</li>

<li>fix bug in Xnest which caused it to crash after the second server
  reset (Alexander Gottwald)</li>

<li>Removed code which ignored the users geometry settings if -nodecoration
  was supplied. XWin used the whole screen instead (Alexander Gottwald)</li>

<li>the font-update script will generate encodings.dir in the font dirs</li>
</ul>
</td>
</tr>

</tbody>
</table>

<h4>Release 6.8.0-1</h4>
<table>
<tbody>
<tr><td>Released: 2004-09-09 2123 MEST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>
<li>Sync with upstream release X11R6.8</li>

<li>winclipboardthread.c, winclipboardwndproc.c, winclipboardxevents.c,
winwin32rootlesswndproc.c - fix copy &amp; paste multibyte to unicode 
applications bug (Kensuke Matsuzaki)</li>

<li>win.h, winmessages.h, winmouse.c, winmultiwindowwndproc.c, 
winwin32rootlesswndproc.c, winwndproc.c - Add support for mice with more than
3 buttons and 1 scroll wheel (Chris B)</li>

<li>font-update is run in the postinstall script to update the list of 
installed fonts</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 6.7-12</h4>
<table>
<tbody>
<tr><td>Released: 2004-07-21 1034 MEST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>
<li>xc/programs/Xserver/xdmcp.c - Bugzilla #889: Bind -from address to port 
number 0 instead of 177 (Alexander Gottwald)</li>
</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 6.7-11</h4>
<table>
<tbody>
<tr><td>Released: 2004-07-16 1245 MEST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winconfig.c - Add entry for irish layout (ie) (Alexander Gottwald)</li>

<li>InitOutput.c, winerror.c, winglobals.c - rename g_fUseMsg to 
g_fSilentFatalError (Alexander Gottwald)</li>

<li>InitOutput.c, winglobals.c, winprocarg.c - added commandline option 
-silent-dup-error to allow silent termination if another instance of
XWin was found running (Alexander Gottwald)</li>

<li>winconfig.c - Add entry for us layout. This changes not much but removes 
a strange error message about the unknown us layout (Alexander Gottwald)</li> 

<li>InitOutput.c - Check for textmode mounted /tmp and print a warning
(Alexander Gottwald)</li>

<li>packaging - Added symbolic link /usr/bin/X11 and /usr/lib/X11 to match
FHS</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 6.7-10</h4>
<table>
<tbody>

<tr><td>Released: 2004-06-14 2330 PDT</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>windialogs.c - Fix path to locally installed change log for the
About dialog box.  (Harold L Hunt II)</li>

<li>winpriv.c - Create win32 window if not already created.
(Alexander Gottwald)</li>

<li>winmultiwindowwindow.c - Export winCreateWindowWindow.  (Alexander
Gottwald)</li>

<li>winwindow.h - Allow CYGWINDOWING_DEBUG to defined in the Makefile.
(Alexander Gottwald)</li>

<li>win.h - Allow CYGDEBUG to defined in the Makefile.  (Alexander
Gottwald)</li>

<li>winmultiwindowicons.c - Load the small default icon too.
(Alexander Gottwald)</li>

<li>winprefs.h, winprefs.c - Takes the iconsize as parameter.
(Alexander Gottwald)</li>

<li>win.h, winmultiwindowicons.c (winXIconToHICON): Takes iconsize as
parameter.  (Alexander Gottwald)</li>

<li>winglobals.c, winmultiwindowicons.c - Rename g_hiconX to g_hIconX.
Added new variable g_hSmallIconX for 16x16 icon.  (Alexander
Gottwald)</li>

<li>winwindow.h, winmultiwindowicons.c - Inits the global g_hIconX
handles.  (Alexander Gottwald)</li>

<li>winwindow.h, winmultiwindowicons.c - Free the icon without messing
with the global icon handle.  (Alexander Gottwald)</li>

<li>winmultiwindowicons.c - Generate a custom icon from window
settings or set them to globals.  (Alexander Gottwald)</li>

<li>winmultiwindowshape.c, winmultiwindowwindow.c, winwin32rootless.c,
winwin32rootlesswindow.c, winwin32rootlesswndproc.c - Remove
declaration of g_hiconX.  (Alexander Gottwald)</li>

<li>winmultiwindowwindow.c, winwin32rootless.c - Use winSelectIcons to
get the window icons. Set the small icon too.  (Alexander
Gottwald)</li>

<li>winmultiwindowwindow.c, winmultiwindowicons.c, winprefs.c,
winwin32rootlesswindow.c, winwin32rootless.c - Use winDestroyIcon to
free the icon without destroying the global icon.  (Alexander
Gottwald)</li>

<li>windialogs.c, winmultiwindowwndproc.c, winwndproc.c - Check if
g_fSoftwareCursor is set before calling ShowCursor.  (Alexander
Gottwald, Dan Wilks - Intuit)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 6.7-9</h4>
<table>
<tbody>

<tr><td>Released: 2004-05-13 1300 EDT</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winclipboard.h - Add extern prototypes for winDebug, winErrorFVerb
copied from winmsg.h.  (Dan Wilks - Intuit)</li>

<li>winclipboardinit.c/winFixClipboardChain - Post rather than send
the reinit message to the clipboard window.  Sending the message
caused, or possibly just exacerbated an existing, race condition that
would cause the X server to hang when coming back from a remote
desktop session.  (Dan Wilks - Intuit)</li>

<li>winclipboardwndproc.c/winProcessXEventsTimeout - Switch to new
logging api's.  (Dan Wilks - Intuit)</li>

<li>winclipboardwndproc.c/winClipboardWindowProc - Switch to new
logging api's.  Add some additional debug logging.  Make best effort
to prevent our window appearing twice in the clipboard chain.  Also
detect loops when they occur and try to behave in a reasonable way.
(Dan Wilks - Intuit)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 6.7-8</h4>
<table>
<tbody>

<tr><td>Released: 2004-05-04 1730 EDT</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>windialogs.c - Let the number-of-client display show at least 0
clients.  (Alexander Gottwald)</li>

<li>winmsg.h, winmsg.c - New function winW32Error which prints the
error string with FormatMessage.  (Alexander Gottwald)</li>

<li>wincursor.c - Fix severe GDI leak.  GetIconInfo allocated new
bitmaps which were never deleted.  (Alexander Gottwald)</li>

<li>Xserver/GL/windows/indirect.c - Rename winErrorMessage to
glWinErrorMessage print GetLastError() if FormatMessage fails.  This
will at least give some information if the 1024 byte buffer is to
small for some messages.  (Alexander Gottwald)</li>

<li>wincursor.c - Always free the bitmaps from GetIconInfo.  (Earle
F. Philhower III)</li>

<li>wincursor.c - Disable extensive cursor debug-logging.  If a
problem arises it can be easily switched on again.  (Alexander
Gottwald)</li>

<li>wincursor.c, winmsg.c, winmsg.h - simplify use of winW32Error
function.  (Alexander Gottwald)</li>

<li>winshadgdi.c - Make shadow GDI work with wine.  (Alexander
Gottwald)</li>

<li>winshadgdi.c - Fix wrong color depths for wine.  (Alexander
Gottwald)</li>

<li>winshadgdi.c - Remove warning about weired biHeight signedness.
This has never been a problem in the last two years.  (Alexander
Gottwald)</li>

<li>General - Replace ErrorF with winDebug in all CYGDEBUG sections.
(Alexander Gottwald)</li>

<li>winmessages.h, winwndproc.c, winmultiwindowwndproc.c - Move window
to top if WM_WINDOWPOSCHANGING without NOZORDER is received.  Print
message information WindowProc functions if CYGDEBUG is enabled.
(Alexander Gottwald)</li>

<li>winmultiwindowwm.c - Silence warning about winDebug.  winmsg.h and
win.h can not be included because of conflicting symbol names.
(Alexander Gottwald)</li>

<li>winconfig.c - Fix Japanese jp106 layout.  Reported by takuma and
Munehiro (haro) Matsuda.  (Alexander Gottwald)</li>

<li>winclipboardwndproc.c/winClipboardWindowProc - Don't try to set
the "next window" in the clipboard chain to ourself.  Fixes another
hang when using -clipboard.  (Dan Wilks - Intuit)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 6.7-7</h4>
<table>
<tbody>

<tr><td>Released: 2004-04-27 1100 EDT</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwm.c - Fix typo in function names (Mutli->Multi).
(Earle F. Philhower III)</li>

<li>wincursor.c - Add color cursor support for hicolor and truecolor
modes.  (Earle F. Philhower III)</li>

<li>InitOutput.c, winblock.c, wincmap.c, wincreatewnd.c, winrandr.c,
winshadddnl.c - Use winDebug and winErrorFVerb instead of ErrorF to
respect -loglevel.  (Alexander Gottwald)</li>

<li>wincursor.c - Added 32bpp (alpha+RGB) cursor support in true color
modes.  (Earle F. Philhower III)</li>

<li>win.h - Include winmsg.h to silence warnings about undeclared
functions.  (Harold L Hunt II - CodeWeavers)</li>

<li>wincursor.c - winReallySetCursor was empty and not needed.
(Harold L Hunt II)</li>

<li>winclipboardwndproc.c - Silence repeated messages from the
clipboard subsystem.  (Harold L Hunt II - CodeWeavers, Alexander
Gottwald)</li>

<li>InitOutput.c - Set the logfile verbosity too.  This silences a lot
of debug messages in the logfile.  (Alexander Gottwald)</li>

<li>wincursor.c - CreateIconIndirect sometimes creates an Icon instead
of an Cursor. This breaks the hotspot and makes the cursor
unusable. Discard the garbled cursor and revert to simple black and
white cursor.  (Alexander Gottwald)</li>

<li>wincursor.c - Some code clean up and documentation.  (Alexander
Gottwald)</li>

<li>wincursor.c - Fix color cursor on non-XP systems (use compatible
bitmap, not DIB, for cursor creation).  (Earle F. Philhower III)</li>

<li>wincursor.c - If CreateIconIndirect creates an icon instead of a
cursor, try it again with icon mask and color bitmap.  (Alexander
Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 6.7-6</h4>
<table>
<tbody>

<tr><td>Released: 2004-04-24 1200 EDT</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwm.c - Fix typo in error message.  (Earle
F. Philhower III)</li>

<li>winwndproc.c, wincursor.c - Don't set the HW cursor unless the
mouse is in client area.  (Earle F. Philhower III)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 6.7-5</h4>
<table>
<tbody>

<tr><td>Released: 2004-04-23 1500 EDT</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winwin32rootless.c, winprefs.c, winmultiwindowwndproc.c,
winmultiwindowwindow.c - LoadImage() g_hiconX because it is
DestroyIcon()d cannot use LoadIcon().  Fix off-by-one class naming
problem. More error checking on icon and menu creation.  (Earle
F. Philhower III)</li>

<li>winwin32rootless.c, winwin32rootlesswindow.c - Fix debug
message. Fix GDI leak because of off-by-one class naming problem and
DeleteObject instead of DestroyIcon.  (Kensuke Matsuzaki)</li>

<li>winmultiwindowicons.c - Apply Kensuke's GDI leak fix
[DeleteObject(icon)->DestroyIcon(icon)].  (Earle F. Philhower
III)</li>

<li>XWinrc.man - Added TRAYICON, SILENTEXIT, icon file reading info,
and a small example.  Still needs work but has all keywords
present.  (Earle F. Philhower III)</li>

<li>InitOutput.c, winglobals.c, winprocarg.c - Make --help and
--version available.  (Alexander Gottwald)</li>

<li>winmultiwindowwindow.c - Explicitly reset the system menu to
WS_POPUP when creating.  (Earle F. Philhower III)</li>

<li>General (xorg-x11-etc) - Bugzilla #533: fix slash/questionmark key
for abnt2 keyboard.  (Alexander Gottwald)</li>

<li>winglobals.c - Set default loglevel to 2.  (Alexander
Gottwald)</li>

<li>win.h, wincursor.c - Enable hardware (== Windows) cursor for all
display modes.  (Alexander Gottwald)</li>

<li>winglobals.c, winprocarg.c, winscrinit.c - Add commandline option
to enable software cursor.  Use winDebug and winErrorFVerb instead of
ErrorF to set explicit loglevels.  (Alexander Gottwald)</li>

<li>winvalargs.c, winengine.c - Use winDebug and winErrorFVerb instead
of ErrorF to set explicit loglevels.  (Alexander Gottwald)</li>

<li>Xserver/GL/windows[Imakefile, glwindows.h, indirect.c,
wincursor.c] - Removed code for hardware cursor since it's now in
hw/xwin.  (Alexander Gottwald)</li>

<li>InitOutput.c, XWin.man - Document the -swcursor switch.
(Alexander Gottwald)</li>

<li>Imakefile, win.h, wincursor.c, winmultiwindowwndproc.c, winpriv.c,
winscrinit.c, winwin32rootlesswndproc.c, winwin32rootlesscursor.c -
MWExtWM uses common hardware(windows) cursor code too, and
winwin32rootlesscursor.c is removed.  Clean up unused variables.
Modify comment(winMWExtWM* -> win*).  Fix the problem that cursor
doesn't change when cursor move in a window.  (Kensuke Matsuzaki)</li>

<li>winvalargs.c - Allow screen combinations with 'XWin -query host
-screen 0 -screen 1 -multiwindow'.  This gives an Xdmcp session and a
second screen where I can display single windows.  (Alexander
Gottwald)</li>

<li>XWin.man - Fix typo.  (Rodrigo Medina)</li>

<li>XWin.man, XWinrc.man - Fix spacing after sentences (use standard
two-spaces after period).  (Harold L Hunt II)</li>

<li>win.h - Add prototype for winFixClipboardChain.  (Dan Wilks)</li>

<li>winclipboard.h - Add definition WM_WM_REINIT a private windows
message that the clipboard window uses to reinitialize the clipboard
viewer chain.  (Dan Wilks)</li>

<li>winwndproc.c/winWindowProc - Call winFixClipboardChain on
application activation/deactivation to ensure that XWin is still in
the clipboard chain.  (Dan Wilks)</li>

<li>winclipboardinit.c - Added references to g_fClipboard and
g_hwndClipboard for winFixClipboardChain to use.
(winFixClipboardChain): New function.  Ensures that XWin is still in
the Windows clipboard chain if we're using the internal clipboard.
(Dan Wilks)</li>

<li>winclipboardwndproc.c/winClipboardWindowProc - Process
WM_WM_REINIT and force ourselves back into the clipboard chain.  (Dan
Wilks)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 6.7-4</h4>
<table>
<tbody>

<tr><td>Released: 2004-04-13 2100 EDT</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwindow.c, winmultiwindowwndproc.c,
winwin32rootless.c, winwin32rootlesswndproc.c - Fix MWExtWM resource
leak.  (Kensuke Matsuzaki)</li>

<li>XWin.man - Add missing documentation for command-line parameters.
(Rodrigo Medina)</li>

<li>XWin.man - Rework some parts of the document, remove outdated
information, update other outdated information.  (Harold L Hunt II -
CodeWeavers)</li>

<li>XWinrc.man - New man page for .XWinrc file.  (Rodrigo Medina)</li>

<li>winengine.c - The fix reportedly in 6.7-3 for ShadowGDI being
forced when not required was not actually in that release; include
that fix in this release.  (Harold L Hunt II - CodeWeavers)</li>

<li>winshadgdi.c/winActivateAppShadowGDI - Turn back on the manually
minimizing and restoring of our window when using the ShadowGDI engine
in fullscreen mode.  We perform the restoring or minimizing manually
for ShadowGDI in fullscreen modes so that this engine will perform
just like ShadowDD and ShadowDDNL in fullscreen mode; if we do not do
this then our fullscreen window will appear in the z-order when it is
deactivated and it can be uncovered by resizing or minimizing another
window that is on top of it, which is not how the DirectDraw engines
work.  (Harold L Hunt II - CodeWeavers)</li>

<li>InitOutput.c - Adjust link to FAQ.  (Alexander Gottwald)</li>

<li>winkeybd.c - Fix rare segfault caused by uninitialized event
queue.  Happened if FatalError Messagebox appeared because of missing
font "fixed".  (Alexander Gottwald)</li>

<li>InitOutput.c - Fix segfault if LogInit fails.  (Alexander
Gottwald)</li>

<li>winmsg.c, winmsg.h - New function winDebug which logs messages
with verbosity level 3.  (Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 6.7-3</h4>
<table>
<tbody>

<tr><td>Released: 2004-04-10 1000 EDT</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwindow.c - Reapply the path that fix multi-window
mode crashes when there were multiple instances of XWin.exe.  (Kensuke
Matsuzaki)</li>

<li>General - Enable build of Kensuke Matsuzaki's newer multi-window
mode that works with an external window manager (-mwextwm).  This
newer multi-window mode uses the miext/rootless extension and requires
Kensuke's <a
href="http://peppermint.jp/products/x/xwinwm-20040409-1454.tar.gz">xwinwm</a>
window manager, which will be released later as a Cygwin package.  If
you have to ask how to run this then you should wait until it is
explained better; please do not ask questions about this in the
mailing list for now.</li>

<li>MultiwindowExtWM Mode (-mwextwm) - Fix window reordering. Remove
winMWExtWMReorderWindows.  (Kensuke Matsuzaki)</li>

<li>General - Make most functions static that can be static.  Remove
declarations for functions used in only one place from win.h and put
them in that single file.  (Harold L Hunt II - CodeWeavers)</li>

<li>wincreatewnd.c/winCreateBoundingWindowFullScreen - Stop using
WS_EX_TOPMOST for fullscreen windows.  (Harold L Hunt II -
CodeWeavers)</li>

<li>winshadgdi.c/winActivateAppShadowGDI - Stop manually minimizing
and restoring our window when using the ShadowGDI engine in fullscreen
mode.  (Harold L Hunt II - CodeWeavers)</li>

<li>InitOutput.c - Document -logfile, -logverbose and -[no]keyhook
[Bug 437], and only document -xkb* parameter if XKB is defined.
(Alexander Gottwald)</li>

<li>winshaddd.c - Fix a few DDNL's that should be DD's.  (Harold L
Hunt II - CodeWeavers)</li>

<li>winengine.c/winSetEngine - Oops, fix ShadowGDI being forced when
it doesn't need to be.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 6.7-2</h4>
<table>
<tbody>

<tr><td>Released: 2004-04-08 2100 EDT</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>General - Fix truetype fonts.  (Lev Bishop)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 6.7-1</h4>
<table>
<tbody>

<tr><td>Released: 2004-04-07 0200 EDT</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>General - First release based on X.Org monolithic tree, version
6.7.  See <a
href="http://freedesktop.org/~xorg/X11R6.7.0/doc/RELNOTES.html">X.Org
release notes</a> for more information.</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 4.3.0-67</h4>
<table>
<tbody>

<tr><td>Released: 2004-04-03 2230 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winclipboardxevents.c/winClipboardFlushXEvents/SelectionRequest -
Change the number of elements passed to the first call to
XChangeProperty from 32 * 4 to 4 since we are the count of array
elements, not the byte count of the total array.  (Lev Bishop)</li>

<li>winerror.c/winMessageBoxF - Correct used argument for va_start.
(Alexander Gottwald)</li>

<li>winkeyhook.c, etc. - Add a low-level keyboard hook for catching
special key combinations like Alt+Tab and passing them to the X Server
instead of letting Windows handle them.  Add a "-keyhook" parameter to
enable this experimental feature.  (Harold L Hunt II - CodeWeavers,
Takuma Murakami)</li>

<li>windialogs.c - Display dialog boxes in the center of the Windows
desktop if Cygwin/X is minimized.  The problem was reported by Rodrigo
Medina.  (Takuma Murakami)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-66</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-30 1315 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winclipboardxevents.c/winClipboardFlushXEvents/SelectionRequest -
Change the 'format' value for the first call to XChangeProperty from 8
to 32 since we are passing a data array of Atoms, which are 32 bits
long.  (Lev Bishop)</li>

<li>windialogs.c - Check for hand cursor not present (pre-desktop
update W95/NT).  (Earle F. Philhower III)</li>

<li>winmultiwindowwndproc.c - Don't set focus to windows with
overrideRedirect flag is set.  (Takuma Murakami)</li>

<li>winlayer.c - Remove dead file.  (Harold L Hunt II - CodeWeavers)</li>

<li>Imakefile, win.h, winrandr.c, winscrinit.c - Put in place a
framework for supporting RandR.  RRSetScreenConfig was added to
Xserver/randr/randr.c to allow setting the current resolution from
within the X Server (previously it was only something that X apps
could do).  There is a little bit of work to be done before this will
work, but it compiles fine now and LAYER has been removed since it is
no longer needed for RandR.  (Harold L Hunt II - CodeWeavers)</li>

<li>winclipboardwrappers.c - Clear ownership flag of the other
monitored selection if an X application is taking ownership of a
selection, which might help to prevent clipboard related pauses.
(Harold L Hunt II - CodeWeavers)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-65</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-29 1500 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>_usr_X11R6_lib_X11_system.XWinrc, win.h, windialogs.c, winprefs.h,
winprefslex.l, winprefsyacc.y - Introduce SilentExit feature that is
enabled by .XWinrc file.  Show the number of connected clients in the
exit confirmation dialog.  (Takuma Murakami)</li>

<li>InitOutput.c, winglobals.c - Try to be cleaner about closing down
the clipboard.  (Harold L Hunt II - CodeWeavers)</li>

<li>XWin.rc, windialogs.c, winresource.h, wintrayicon.c - Fix problem
with tray menu in non-multi-window modes, add framework for Takuma to
display the number of connected clients on shutdown.  (Harold L Hunt
II - CodeWeavers)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-64</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-28 1300 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>windialogs.c, XWin.rc - Convert "About..." hyperlink buttons to
show as hyperlinks.  (Earle F. Philhower III)</li>

<li>wintrayicon.c - Don't remove the tray icon menu separator when not
in multi-window mode since the "About..." entry is still above the
separator.  (Harold L Hunt II - CodeWeavers)</li>

<li>cygwin.cf - Enable the X-Resource extension, reported missing by
Nicholas Wourms.  (Harold L Hunt II - CodeWeavers)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-63</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-26 1730 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winclipboardwrappers.c - Be careful to note that neither PRIMARY
nor CLIPBOARD is owned by the clipboard integration manager when text
is selected in X then unselected.  This fixes at least part of the
problem defined by Lev Bishop but needs to be tested.  (Harold L Hunt
II - CodeWeavers)</li>

<li>winmultiwindowicons.c - Use BitsPerPixel() to calculate pixel
stride, handle non-packed modes.  (Earle F. Philhower III)</li>

<li>InitOutput.c, winclipboardthread.c - Properly destroy the
clipboard window.  Unfortunately, calling XCloseDisplay hangs for some
unknown reason, so we have to leave the display open; I suspect this
has something to do with our IOErrorHandler.  (Harold L Hunt II -
CodeWeavers)</li>

<li>XWin.rc - Move the About... entry in the tray icon menu up above
the separator and change the title of the About box to "About
Cygwin/X".  (Jack Tanner)</li>

<li>InitOutput.c - Try to do a better job of removing the tray icon.
It still doesn't seem to be perfect yet.  (Harold L Hunt II -
CodeWeavers)</li>

</ul>
</td>
</tr>
</tbody>
</table>
<h4>Release 4.3.0-62</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-25 2230 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>X-boxed.ico - Use Michael Bax's boxed X icon.</li>

<li>win.h, winmultiwindowwindow.c, winmultiwindowwm.c,
winmultiwindowwndproc.c, winprefs.c - Remove fAlwaysOnTop and
PreserveWin32Stack() instead of reinstating
winReorderWindowsMultiWindow(), which now inhibits reentries to avoid
infinite restacking.  Call winReorderWindowsMultiWindow() in
appropriate places to keep consistent window Z order even if
always-on-top windows are mixed.  (Earle F. Philhower III and Takuma
Murakami)</li>

<li>winwindow.h, winmultiwindowwndproc.c, winmultiwindowwm.c,
winmultiwindowwindow.c - Always-on-top mods: fix popup menus over AOT
windows, AOTs not disappearing, normal windows appearing over AOTs.
(Earle F. Philhower III)</li>

<li>windialogs.c - Exit dialog gets top of Z order, otherwise can be
hidden by X apps.  (Earle F. Philhower III)</li>

<li>winmultiwindowwindow.c - Make winRestackWindowMultiWindow empty
(except calling the wrapped function).  (Takuma Murakami)</li>

<li>win.h, winblock.c, winglobals.c, winmultiwindowwindow.c,
winmultiwindowwndproc.c, winscrinit.c, winshadgdi.c, winwakeup.c -
Remove fRestacking and fWindowOrderChanged cache variables and
winReorderWindowsMultiWindow function from multiwindow mode.  This
function was called around 100 times per second.  Now the ordering
task is done in winTopLevelWindowProc/WM_ACTIVATE handler in event
driven manner.  Stop propagating WM_ACTIVATEAPP messages to the root
window.  Simplify winRedrawAllProcShadowGDI.  (Takuma Murakami)</li>

<li>XWin.rc, win.h, winblock.c, windialogs.c, winglobals.c,
winmultiwindowwindow.c, winresource.h, winshaddd.c, winshadddnl.c,
winshadgdi.c, winwakeup.c, winwndproc.c - Add an About dialog box to
the tray icon menu, complete with links to our local change log
(/usr/X11R6/share/doc/XFree86-xserv/changelog.html) and documentation
on our website.  (Harold L Hunt II - CodeWeavers)</li>

<li>winclipboardwndproc.c - Drop the clipboard failure timeout from 2
seconds to 1 second.  (Harold L Hunt II - CodeWeavers)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-61</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-25 0055 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winclipboardwndproc.c, winclipboardxevents.c - Attempt to fix
clipboard deadlock that was causing hangs.  The nature of the fix was
to stop calling XPeekIfEvent since it will block until the specified
type of event is seen.  Instead, we call XSync to flush output events
and wait for them to be processed, then we do our own little loop with
a call to select() using a timeout of 3 seconds from when we started
(the timeout is adjusted after each call to select()).  This should
alleviate problems with XPeekIfEvent not returning.  Finally, since we
can detect whether the SelectionNotify event has arrived now, I added
code to paste NULL to the Win32 clipboard if the X11 application never
returns any useful clipboard data; this should prevent Win32
applications from freezing when there are problems pasting from X11 to
Win32.  (Harold L Hunt II - CodeWeavers)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-60</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-23 1945 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowicons.c - Use PixmapBytePad to calculate the length
of a line in the icon that miGetImage will return.  Our own
calculation was not allocating enough memory per line and miGetImage
was walking off the end of that memory when Windows is running in 24
bit color and using multi-window mode.  (Fabrizio Gennari)</li>

<li>XWin.rc, winresource.h, wintrayicon.c, winwndproc.c - Change
Show/Hide Root Window menu items to a single item with a check box.
(Harold L Hunt II - CodeWeavers)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-59</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-18 2345 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowclass.c,winmultiwindowclass.h,winmultiwindowwindow.c
- Fix window cascading to not affect popups or menus.  (Earle
F. Philhower III)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-58</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-18 1315 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winconfig.c - Reset variable 's' after each step.  Fixes bug where
the argument to -xkblayout applied also to -xkbvariant and
-xkboptions.  (Alexander Gottwald)</li>

<li>winshadgdi.c - Fix for the Show Root Window 100% CPU bug.  Use
lParam in winRedrawAllProcShadowGDI as indicator which window
initiated the call since EnumerateThreadWindows is called from
WM_PAINT handler too and invalidates the fresh painted window right
after painting it.  (Alexander Gottwald)</li>

<li>X.ico - Include Jehan Bing's icon_test9 version, which includes 24
bit as well as 32 bit icons.  It is hoped that the 24 bit icons will
be used by platforms that do not support the 8 bit alpha channel in
the 32 bit icon.  (Jehan Bing)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-57</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-17 0830 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwindow.c - Cascade Win32 windows when -geometry is
not specified, using CW_USEDEFAULT, instead of always creating at
X(0,0).  (Earle F. Philhower III)</li>

<li>General - Change build script to include this changelog in
/usr/X11R6/share/doc/XFree86-xserv/changelog.html.  (Harold L Hunt II
- CodeWeavers)</li>

<li>General - Change build script to sort file lists and trim lines
that just have a directory but no file; these lists are used for
generating the README files.  (Harold L Hunt II - CodeWeavers)</li>

<li>General - Add build-xserv command that pre-processes cygwin.cf and
sets the current release number for XWin.exe.  (Harold L Hunt II -
CodeWeavers)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-56</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-15 2050 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>General - Change build system files to stop linking against cygipc
and instead use SHM support that is now built into cygwin1.dl.  Note
that you will now use 'cygserver' to setup cygserver as a Windows
Service instead of ipc-daemon2 to enable MIT-SHM support for Cygwin/X.
Please see the cygserver documentation (google for it if you have to)
for more information.  (Harold L Hunt II - CodeWeavers)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-55</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-14 0230 EST</td></tr>

<tr><td>Download source: Now available as src package via setup.exe</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>General - All Cygwin/X packages are now built with a build script
that also packages the source code into about 8 source packages.  You
can now download the source for XFree86-xserv via Cygwin's setup.exe.
More instructions on how to compile this source will follow later.
(Harold L Hunt II)</li>

<li>Preferences (Earle F. Philhower III)

<ul>
<li>Added "TRAYICON" parsing to .xwinrc</li>

<li>Added "&lt;file&gt;.dll,nnn" icon extraction to take icons from compiled
DLL or EXEs</li>

<li>Added ",nnn" icon extraction to take icons compiled into XWin.exe</li>

<li>Fixed ICONDIRECTORY no longer appended to icon path if it is fully
qualified</li>

</ul>

</li>

<li>Icons - Jehan Bing's almost latest X icon (1st icon in XWin.exe)
with alpha channel support.  I just realized that I did not get
Jehan's x_test8.ico in this release, so I will have to make another
release soon.  (Jehan Bing)</li>

<li>Icons - Benjamin Riefenstahl's boxed X icon (2nd icon in
XWin.exe).  (Benjamin Riefenstahl)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-54</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-10 1500 EST</td></tr>

<tr><td>Download source: hw/xwin files not changed since 4.3.0-53</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>X.ico - Add formats with an alpha channel to smooth the edges of
the icon on systems that support alpha channels.  This drastically
improves the appearance of the icon.  (Jehan Bing)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 4.3.0-53</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-10 1135 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winconfig.c - Fix auto-repeat when <i>-kb</i> is passed to
XWin.exe.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-52</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-09 1830 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winglobals.c, winprefs.c, winshadgdi.c - Replace all calls to
EnumWindows by EnumThreadWindows since we need to manipulate only
Cygwin/X windows, which are in the same thread.  (Takuma
Murakami)</li>

<li>winconfig.c, winconfig.h, winprocarg.c - Display warning message
if user uses -xf86config or -keyboard parameters when they are
unsupported.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-51</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-08 2005 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>win.h, winglobals.c, winmultiwindowwindow.c, winshadgdi.c -
Restrict multiwindow redrawing region to the intersection between the
smallest bounding rectangle of damaged areas and each Windows window.
Compare process IDs instead of class names to determine whether a
window is a Cygwin/X window or not.  (Takuma Murakami)</li>

<li>InitOutput.c - Print a log message that XF86Config is unsupported
with pointer to documentation (FAQ).  (Alexander Gottwald)</li>

<li>winconfig.c - Print the keyboardlayout name supplied from Windows
if it was not found.  This makes it easier to add those layouts.
(Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-50</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-03 0815 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwindow.c - Fix window adjustment on multiple
monitors.  (Takuma Murakami)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 4.3.0-49</h4>
<table>
<tbody>

<tr><td>Released: 2004-03-02 2230 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winclipboardwndproc.c, winclipboardwrappers.c,
winclipboardxevents.c - Check if clipboard is already open before
calling OpenClipboard; if it is open and we own it, then call
CloseClipboard in hopes of fixing some reported deadlock situations.
(Harold L Hunt II - CodeWeavers)</li>

<li>InitOutput.c - Add check for multiple instances of XWin trying to
run on the same display number.  Check for uniqueness among all
terminal services sessions.  (Takuma Murakami, Harold L Hunt II)</li>

<li>winvalargs.c - Validate command-line argument combinations; fail
when invalid combinations are found, such as "XWin -query foo_host
-multiwindow".  (Harold L Hunt II - CodeWeavers)</li>

<li>winerror.c/winMessageBoxF - Add a function that works like printf
for Win32 message boxes.  (Harold L Hunt II - CodeWeavers)</li>

<li>winprocarg.c/winLogVersionInfo - Print version, vendor, and
mailing list email address in the log file.  (Harold L Hunt II -
CodeWeavers)</li>

<li>winprocarg.c/winLogCommandLine - Concatenate the command line into
a single string with line breaks at 60 characters.  Print the command
line in the log file and save it for winMessageBoxF to use during
FatalError and ddxUseMsg calls.  (Harold L Hunt II - CodeWeavers)</li>

<li>winerror.c - Make FatalError popup a message box telling the user
that a fatal error occurred, where the log file is, what version they
are running, what the command line used to start XWin was, etc.
(Harold L Hunt II - CodeWeavers)</li>

<li>InitOutput.c/ddxUseMsg - Popup a message box telling the user that
the help information was save to the log file, tell them where the log
file is, what the command line used to start XWin was (in case they
don't realize they typed -help or an invalid parameter name), etc.
(Harold L Hunt II - CodeWeavers)</li>

<li>Xserver/os/utils.c, xdmcp.c - Replace several calls to ErrorF and
exit(1) with calls to FatalError; this allows us to present the user
with a popup message box, whereas the exit(1) call prevented us from
doing this.  (Harold L Hunt II - CodeWeavers)</li>

<li>InitOutput.c/ddxUseMsg - Document Alexander's new -xkb*
parameters.  (Harold L Hunt II - CodeWeavers)</li>

<li>config/cf/cygwin.cf - Specify our own vendor string, version
number, and contact information.  (Harold L Hunt II - CodeWeavers)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-48</h4>
<table>
<tbody>

<tr><td>Released: 2004-02-28 1445 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winprefs* - Rename the WINMULTIWINDOWPREFS structure to WINPREFS,
since it is used even when MultiWindow mode is disabled.  (Harold L
Hunt II - CodeWeavers)</li>

<li>winmultiwindowclass.c, winmultiwindowclass.h,
winmultiwindowicons.c - Identify these files for renaming since they
are not dependent upon MultiWindow mode being enabled.  Do not perform
the actual rename; instead, write this message in hopes that someone
else performs the rename in CVS in a manner that preserves
history.  (Harold L Hunt II - CodeWeavers)</li>

<li>win.h, winclipboard.h, winwindow.h - Remove WIN_*_SUPPORT flags.
(Harold L Hunt II - CodeWeavers)</li>

<li>xc/config/cf/cygwin.cf - Remove the inclusion of xfree86.cf;
including xfree86.cf forced us to have several lines of code that
prevented drivers from being compiled, and forced us to define values
for certain #defines so that they would not be overridden.  Removing
xfree86.cf and restructuring the file led to a decrease in size of
about 30%.  (Harold L Hunt II - CodeWeavers)</li>

<li>xc/config/cf/cygwin.cf - Add the build flags removed from win.h in
the form BuildXWinFoo.  Add defines for the various build options,
such as XWIN_FOO, which are added to the defines passed to the
compiler when building the server.  This allows us to remove the build
flags from the hw/xwin headers and it also allows us to refer to the
BuildXWin* flags in Xserver/Imakefile, which means that we should no
longer have to update that file by hand when enabling and disabling
certain features.  (Harold L Hunt II - CodeWeavers)</li>

<li>General - The above changes required extensive rewriting of
cygwin.cf, which means that I may have accidentally broken or disabled
something that was working previously.  Please verify that things work
as they should.  Note that removing xfree86.cf causes 'xdpyinfo' to
report our vendor string as "The X.Org Group" and our vendor release
number as "6600"; this is different from the previous vendor of
XFree86 with version 4.3.0.1 or some such.  (Harold L Hunt II -
CodeWeavers)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-47</h4>
<table>
<tbody>

<tr><td>Released: 2004-02-25 0715 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwindow.c, winmultiwindowwndproc.c - For the topmost
Windows window, explicitly raise its X counterpart to the top in Z
order to keep correct stacking when there is a minimized window which
formerly obscured it.  (Takuma Murakami)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 4.3.0-46</h4>
<table>
<tbody>

<tr><td>Released: 2004-02-22 1430 EST</td></tr>

<tr><td>Download source: hw/xwin files not changed since 4.3.0-45</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>'make clean &amp;&amp; make' in Xserver/hw/xwin.  The 4.3.0-45 build was
busted for some reason.  This rebuild fixes some segfaults caused by
certain apps, such as xeyes.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-45</h4>
<table>
<tbody>

<tr><td>Released: 2004-02-21 1430 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>win.h, winmultiwindowwindow.c, winmultiwindowwndproc.c,
winscrinit.c, winwindow.h - Improve move, resize, minimize, maximize,
and restore operations on windows in multiwindow mode.  Reorganize
message/event flow, add new scheme to propagate window changes between
Windows and X layers, eliminate bunch of conditional branches and
cache variables.  A couple of bugs should be fixed.  (Takuma
Murakami)</li>

<li>winmouse.c - Properly clear the internal mouse button map when the
mouse device is closed.  (Takuma Murakami)</li>

<li>winmultiwindowwndproc.c, winprefs.c, winprefs.h, winwndproc.c -
Stop passing customized menus to DefWindowProc.  Although it does not
cause visible problems so far, it should be inhibited.  Apply a mask,
which is described in MSDN, for wParam in
winTopLevelWindowProc/WM_SYSCOMMAND handler.  (Takuma Murakami)</li>

<li>winconfig.c, winconfig.h, winprocarg.c - Add some xkb settings
(rules, model, layout, variant, options) to the commandline options
and parse them even with configfile support turned off.  (Alexander
Gottwald)</li>

<li>xc/lib/font/fontfile/dirfile.c, encparse.c, fontfile.c - Some more
font path checks.  (David Dawes)</li>

<li>winmultiwindowwm.c - Make MultiWindow Window Manager detectable
from other wm's as well as allowing it to detect other wm's.  (Takuma
Murakami)</li>

<li>xc/lib/font/fontfile/dirfile.c - Fix an exploitable buffer
overflow.  (Greg MacManus (iDEFENSE Labs))</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-44</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-28 2000 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>xc/programs/Xserver/os/access.c - Prevent 0.0.0.0 addresses from
being sent to the other end of the wire when using Xdmcp.  Suggested
in the \devel at xfree86 dot org\ mailing list and discussed by many
people in that and other forums.  Should fix problems when using
unconfigured network interfaces and attempting to use '-query' to
Xdmcp into a remote machine; this was happening to a lot of users with
wireless and wired network cards in laptop computers of which one or
the other was usually configured but not both.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-43</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-27 0045 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwindow.c, winmultiwindowwndproc.c, winwindow.h - Fix
for Always On Top handling.  (Earle F Philhower III)</li>

<li>windialogs.c - Center dialog boxes in the desktop window.  (Earle
F Philhower III)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-42</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-16 1500 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>InitOutput.c - Only wait for the clipboard thread to exit if the
clipboard client has been started.  (Harold L Hunt II)</li>

<li>winclipboardwrappers.c/winProcQueryTree,
winProcEstablishConnection - Unwrap base function and return if
clipboard is not enabled.  (Harold L Hunt II)</li>

<li>winclipboardxevents.c/winClipboardFlushXEvents - Call
SetClipboardData when aborting; those should allow Win32 apps that are
holding the clipboard open to fail gracefully and close the
clipboard.  (Harold L Hunt II)</li>

<li>winglobals.c - Remove duplicate declaration of
g_fClipboardStarted.  (Takuma Murakami)</li>

<li>winglobals.c - winInitializeGlobals - Reinitialize all clipboard
globals.  (Harold L Hunt II)</li>

<li>winmultiwindowwm.c - Change all error messages that occur before a
call to pthread_exit to make it clear that the window manager is
exiting.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-41</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-15 0100 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Clipboard - Try to check all allocated pointers for NULL before
dereferencing and try to provide clean failures with error messages.
(Harold L Hunt II)</li>

<li>General - Allow XF86Config support to be turned on or off via the
WIN_XF86CONFIG_SUPPORT #define in win.h.  This is needed for the
xserver tree on freedesktop.org (fd.o) since it does not have the
necessary files from the XFree86 DDX (hw/xfree86).  (Harold L Hunt
II)</li>

<li>resource.h - Rename resource.h to winresource.h to fix a problem
with a header of the same name in the xserver tree on fd.o.  (Harold L
Hunt II)</li>

<li>win.h - Wrap #include "layer.h" with #if WIN_LAYER_SUPPORT so that
the header will not be included when layer is not being built.
(Harold L Hunt II)</li>

<li>win.h - Remove XWDFile.h, pXWDCmap, and pXWDHeader; these have not
been used in ages, if ever.  (Harold L Hunt II)</li>

<li>General - Change all includes for Xlib headers from #include
"foo.h" or #include &lt;foo.h&gt; to #include "X11/foo.h" for consistency
and to make the build work in the xserver tree on fd.o.  (Harold L
Hunt II)</li>

<li>General - Grab the rest of Alexander Gottwald's fixes for build
warnings due to malformed prototypes.  Add a few more fixes to silence
additional warnings along the same lines.</li>

<li>General - Protect some more XKB stuff with #ifdef XKB.  Needed for
the build in the xserver tree on fd.o.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 4.3.0-40</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-12 1945 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwindow.c/winReorderWindowsMultiWindow - Fix the
problem that XWin crashes when multiple XWin processes exist.
(Kensuke Matsuzaki)</li>

<li>InitOutput.c, winclipboardthread.c, winglobals.c,
winmultiwindowwm.c - Move calls to setlocale () from
winclipboardthread.c and winmultiwindowwm.c to InitOutput.c and only
call it on the first server generation.  Remove the g_fCalledSetLocale
global variable.  Make sure to call XInitThreads () before calling
XSupportsLocale ().  This may help fix the crash on startup reported
by Lester Ingber.  (Harold L Hunt II)</li>

<li>winclipboardwrappers.c/winProcSetSelectionOwner - Reinitialize the
local list of selection owners when the server generation changes.
This fixes the crash where copying text in X11 followed by copying an
image in Win32 followed by an X Server reset causes XWin.exe to
segfault; this was reported by Alexander Gottwald.  (Harold L Hunt
II)</li>

<li>winmultiwindowwm.c - Move the global variable g_nQueueSize into
the WMMsgQueueRec structure so that it is stored per instance of the
multi-window window manager thread.  (Harold L Hunt II)</li>

<li>winmultiwindowwm.c/winInitWM - Zero memory allocated for
WMProcArgRec, WMInfoRec, and XMsgProcArgRec structures.  This should
help prevent problems with uninitialized variables in these
structures.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-39</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-12 1445 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>win.h - Silence some build warnings.  (Alexander Gottwald)</li>

<li>winclipboardwndproc.c, winclipboardwrappers.c,
winclipboardxevents.c - Silence non-failure run-time messages using
for debugging during development.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-38</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-11 1730 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winconfig.c/winConfigKeyboard - Fix problem with Japanese keyboard
layout being ignored after server reset in XDMCP sessions.  (Takuma
Murakami)</li>

<li>winclipboardwndproc.c/winClipboardWindowProc/WM_DRAWCLIPBOARD -
Release ownership of the X11 PRIMARY and/or CLIPBOARD selections if an
unsupported format is copied to the Win32 clipboard and we currently
own the PRIMARY and/or CLIPBOARD selections.  This will prevent a
silent failure in X11 when pasting after an unsupported item has been
copied to the Win32 clipboard; instead, X11 apps should either paste
from an another owned selection (xterm does this) or they might report
that the clipboard is empty.  (Harold L Hunt II)</li>

<li>winclipboardwrappers.c - Initialize g_iOwners to None.  (Harold L
Hunt II)</li>

<li>winclipboardwrappers.c/winProcSetSelectionOwner - Fix a bug in the
call to MakeAtom for the CLIPBOARD atom that was causing MakeAtom to
return a failure code instead of the CLIPBOARD atom; this caused the
owner window for the CLIPBOARD atom to never be saved by
winProcSetSelectionOwner.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>
<h4>Release 4.3.0-37</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-11 0215 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>InitOutput.c, win.h, winclipboardthread.c, winwndproc.c - Remove
the winDeinitClipboard function since it is no longer needed due to
the OsVendorReset function.  (Harold L Hunt II)</li>

<li>winclipboardxevents.c/winClipboardFlushXEvents - Move variable
declarations into the event loop so that they are reinitialized for
each event that is processed.  Remove all calls to pthread_exit and
replace them with an abort section in each event that frees allocated
resources and sends a SelectionNotify message when the
SelectionRequest event is being aborted.  Make sure that
CloseClipboard will always be called if OpenClipboard has been called.
Review the entire function to make sure that the responses to failures
are appropriate.  The result of this audit is that the clipboard code
should not shut down as often from encountering minor errors.  (Harold
L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-36</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-10 2245 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winclipboardxevents.c/winClipboardFlushXEvents/SelectionRequest -
When aborting because neither CF_TEXT nor CF_UNICODETEXT are available
from the clipboard, be sure to do so before calling OpenClipboard so
that we don't have to be careful to call CloseClipboard when aborting.
This should fix problems with other Win32 apps not being able to use
the clipboard until something was selected in X11.  (Harold L Hunt
II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-35</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-10 2015 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winclipboardwrappers.c/winProcSetSelectionOwner - Remember to
abort if stuff->window == None and we did not previously abort.  This
fixes crashes in some cases when the X11 selection is being disowned
by another X Client.  (Harold L Hunt II)</li>

<li>winclipboardwndproc.c/winClipboardWindowProc/WM_DRAWCLIPBOARD - Do
not take ownership of the X11 selections when something other than
CF_TEXT or CF_UNICODETEXT has been copied into the Win32 clipboard.
(Harold L Hunt II)</li>

<li>winclipboardxevents.c/winClipboardFlushXEvents - Make sure that
CF_TEXT and CF_UNICODETEXT are available from the clipboard before
request their contents.  This some fix some weird behavior and
possible crashes.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 4.3.0-34</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-10 0200 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winwndproc.c/winWindowProc/WM_DISPLAYCHANGE - Save value of
SM_C*VIRTUALSCREEN when fMultipleMonitors is true, instead of
SM_C*SCREEN.  (Harold L Hunt II)</li>

<li>winclipboardwrappers.c/winProcEstablishConnection - Change delay
in starting clipboard client from the 3rd call to the 4th call when
using Xdmcp.  Should fix the problem reported by Andrew Braverman; if
not, I'll have to make a much more robust system for starting the
clipboard client when using Xdmcp.  (Harold L Hunt II)</li>

<li>winclipboardwrappers.c/winProcSetSelectionOwner - Always advertise
CF_TEXT clipboard format, optionally advertise CF_UNICODETEXT format.
(Harold L Hunt II)</li>

<li>winclipboardwndproc.c/winClipboardWindowProc/WM_RENDERFORMAT - If
wParam is CF_UNICODETEXT, pass TRUE for Unicode support flag
(regardless of fUnicodeSupport value) when calling
winClipboardFlushXEvents.  (Harold L Hunt II)</li>

<li>winclipboardwndproc.c/winClipboardWindowProc/WM_DESTROYCLIPBOARD -
Add new handling for this message; we are supposed to process this
message for delayed rendering support.  (Harold L Hunt II)</li>

<li>General Clipboard - Restructure the clipboard system to run a
single thread, regardless of the number of screens created in the
current process; the reason for this is that X selections are
per-display, not per-screen, thus there is no reason to have one
thread per screen for managing the clipboard integration.  Changing
from per-screen to one thread greatly simplified the clipboard
handling code and reduced the likelihood of errors due to interaction
between multiple clipboard client threads.  (Harold L Hunt II)</li>

<li>winclipboardwrappers.c/winProcSetSelectionOwner - Track whether
the PRIMARY and CLIPBOARD selections are owned and if they are
transitioning from owned to not owned.  When one of PRIMARY or
CLIPBOARD is still owned the Win32 clipboard is not disowned; if both
PRIMARY and CLIPBOARD are not owned and a transition from one being
owned to being disowned is detected, then the Win32 clipboard is
disowned.  The user-level change is that you can select text in
certain X11 apps (which usually sets both the PRIMARY and CLIPBOARD
selections), click elsewhere to unselect the text (frees ownership of
one of the selections but not the other) and still paste the text in
Win32.  The previous behavior would not allow you to paste the text in
Win32 if the selection was no longer highlighted.  (Harold L Hunt
II)</li>

<li>winclipboardwndproc.c/winClipboardWindowProc/WM_DRAWCLIPBOARD - We
cannot bail out when NULL == GetClipboardOwner() because some
applications deal with the clipboard in a manner that causes the
clipboard owner to be NULL when they are in fact taking ownership.
One example of this is the Win32 native compile of emacs.  Without
this fix, text could not be copied from the Win32 compile of emacs and
pasted within Cygwin/X.  (Harold L Hunt II)</li>

<li>InitOutput.c - Remember to delete the functions that were moved to
the new file called winprocarg.c.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 4.3.0-33</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-07 2315 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>General - If you use the diff above, note that the Imakefile was
missing from previous tarballs, so this diff includes the whole
Imakefile.  I have updated my source packaging script so that this
does not happen again.  Also, the source code in this release has
already been committed to the xorg repository on freedesktop.org's
CVS.  (Harold L Hunt II)</li>

<li>winauth.c - New File - Move winGenerateAuthorization into this new
file.  This function generates a cookie to be used by the clipboard
client for authorization when using Xdmcp.  (Harold L Hunt II)</li>

<li>winglobals.c - New File - Start moving global variables into this
file.  (Harold L Hunt II)</li>

<li>winclipboardwrappers.c - New File - Move all clipboard wrappers of
ProcVector and InitialVector functions into this file.  (Harold L Hunt
II)</li>

<li>winprocarg.c - New File - Move winInitializeDefaultScreens and
ddxProcessArgument from InitOutput.c into this file.  The same will be
done eventually for other functions in InitOutput.c.  (Harold L Hunt
II)</li>

<li>win.h, General - Get started on removing "extern" declarations
from win.h by including explicit references to extern symbols in the
source files that use those symbols.  The long term goal is to start
breaking up the monolithic win.h header file.  (Harold L Hunt II)</li>

<li>Xserver/dix/dispatch.c/Dispatch() - Add hook to OsVendorReset
function that can be optionally defined in the DDX layer when
DDXOSRESET is defined.  (Harold L Hunt II)</li>

<li>InitOutput.c/OsVendorReset() - New Function - Send a message to
the clipboard client telling it to shutdown, then wait for the
clipboard client thread to exit before proceeding.  This allows us to
cleanly shutdown the clipboard client.  Incidentally, I noticed that
the previous code would spawn *additional* clipboard client threads
when the X Server was reset; this was happening because we trapped IO
errors and attempted to reconnect when they happened.  There was no
code that told a clipboard client thread to exit when the server was
being reset so that it could be replaced by a new clipboard client
thread (which was happening correctly).  This should lead to greater
stabilility across X Server resets, though I did discover that this
version and previous versions where shutting down after two or three
resets without any error message being logged nor exception being
thrown.  That problem will be looked into later.  (Harold L Hunt
II)</li>

<li>winclipboardinit.c, winclipboardthread.c, winclipboardxevents.c,
winclipboardwndproc.c - Fix problems getting killed by Xdmcp code and
remote XDM/KDM/GDM client on startup.  Fix problems not being
authorized to connect when using Xdmcp by calling XSetAuthorization
and passing it our cookie that was created earlier; this removes the
need to save the cookie to a .Xauthority file.  Watch the CLIPBOARD
selection in addition to the PRIMARY selection and track which was
changed within X last so that we know which one we should paste within
Win32.  Fix crashes when the server resets (as explained above, it
still exits after one or two resets, for an unknown reason).  The
improved clipboard code should now be good to go.  (Harold L Hunt
II)</li>

<li>winmultiwindowwm.c - Clean up the startup of the two multi-window
threads.  Create separate error and IO error handlers for the XMsgProc
thread since it was using the same IO error handler as another thread
and would try to longjmp into the other thread if it received an IO
error, which was likely causing some crashes.  The multi-window code
needs additional work to confirm that it properly shuts down and exits
both threads; something similar to the clipboard shutdown message in
OsVendorReset will be needed.  (Harold L Hunt II)</li>

<li>winclipboardxevents.c - Find and fix a last minute bug that caused
Unicode clipboard translations to be broken.  (Kensuke Matsuzaki,
Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 4.3.0-32</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-05 1715 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>win.h/WIN_CLIPBOARD_AUTH_SUPPORT - Disable the new Xauth support
for the clipboard integration manager with a build-time flag.  Be sure
to delete ~/.Xauthority if you have one; X Client connections may be
prevented if you do not delete this file.  (Harold L Hunt II)</li>

<li>InitInput.c/InitInput - Only wrap ProcVector[X_SetSelectionOwner]
when serverGeneration is 1, which prevents multiple wrapping of the
function when the server resets (the ProcVector table is not
re-initialized upon X Server reset).  (Harold L Hunt II)</li>

<li>InitInput.c/winProcSetSelectionOwner - Use ((DrawablePtr)
pWindow)->id instead of client->lastDrawableID for determining the ID
of the window that the selection is being owned by.  (Harold L Hunt
II)</li>

<li>InitInput.c/winProcSetSelectionOwner - Detect when pWindow is
None, in which case the selection is being unowned in X11; add code to
release ownership of the Win32 clipboard if we currently own it.
(Harold L Hunt II)</li>

<li>InitInput.c/winProcSetSelectionOwner - Abort if IsWindow fails for
the clipboard manager Win32 window handle; this may prevent problems
when the X Server resets.  (Harold L Hunt II)</li>

<li>winclipboardwndproc.c/winClipboardWindowProc/WM_DRAWCLIPBOARD -
Don't call XSetSelectionOwner when GetClipboardOwner returns NULL,
since this means that the Win32 clipboard is unowned; there are many
reasons why the Win32 clipboard may be unowned, one of which is that
we release ownership of it when the X11 selection is unowned (see
above item).  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 4.3.0-31</h4>
<table>
<tbody>

<tr><td>Released: 2004-01-05 0105 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>General - Everything up to the last three entries describes the
new clipboard handling system that does not steal ownership of the X11
selection each time that something is selected; this seems to work
fine, but it needs to be tested.  The last three entries describe my
nearly complete attempt at generating a MIT-MAGIC-COOKIE-1, adding it
to the list of cookies that the X Server recognizes, and using it when
the clipboard client tries to connect during an XDMCP connection.
This authentication approach should work, but I need a break from
trying to figure out which of the function calls has a minor error in
its parameters; thus, it does not currently work.  However, feel free
to examine the source code and let me know if any of my calls to
GenerateAuthorization, AddResource, or XauWriteAuth are incorrect.  I
would really like to get this automatic authorization working as soon
as possible.  Until then I will mark this release (and all releases
based upon it) as 'test'.</li>

<li>InitInput.c - Add a function, winProcSetSelectionOwner, and wrap
the generic function ProcVector[X_SetSelectionOwner] with it.  This
allows us to get a notification each time the selection (clipboard)
owner changes.  Call SetClipboardData (foo, NULL) so that the
WM_RENDERFORMAT message will be posted when a Win32 app requests the
clipboard contents.  (Harold L Hunt II, Alexander Gottwald)</li>

<li>winclipboardxevents.c/winClipboardFlushXEvents/SelectionNotify -
No longer steal ownership of the selection each time it changes in
X11.  We can do this because we have notification when
SetSelectionOwner is called (see above).  (Harold L Hunt II)</li>

<li>winclipboardxevents.c/winClipboardFlushXEvents/SelectionClear -
Remove handling, it is no longer needed; it used to request the
contents of the selection that we lost ownership of.  (Harold L Hunt
II)</li>

<li>winclipboardwndproc.c/winClipboardWindowProc/WM_CREATE,WM_DESTROY
- Add information to be used on each call to a window property.
(Harold L Hunt II)</li>

<li>winclipboardwndproc.c/winClipboardWindowProc/WM_CREATE,WM_DESTROY,WM_CHANGECBCHAIN,WM_DRAWCLIPBOARD
- Add ourselves to the clipboard viewer chain so that we receive
notification when the clipboard contents are changed by a Win32
application.  Our normal response to this is to call
XSetSelectionOwner, but we specifically do nothing if we currently own
the Win32 clipboard.  (Harold L Hunt II)</li>

<li>winclipboardwndproc.c/winClipboardWindowProc/WM_RENDERFORMAT,WM_RENDERALLFORMATS
- Request the contents of the X11 selection.  Use XPeekIfEvent to wait
until the response is added to our event queue (this could probably
lead to a dead-lock of a client exists before responding), then call
winClipboardFlushXEvents to handle the SelectionNotify event.  UTF8
and CompoundText targets require that we call XConvertSelection from
the SelectionNotify event, which will cause another SelectionNotify
event to be fired; be careful to check for this and do the
XPeekIfEvent/winClipboardFlushXEvents thing again if this is the
case (this is untested because I did not see any UTF8 or CompoundText
targets that needed conversion).  Copy the returned contents to the
Win32 clipboard with SetClipboardData ().  (Harold L Hunt II)</li>

<li>winscrinit.c/winFinishScreenInitFB - Generate a
MIT-MAGIC-COOKIE-1 cookie and add it to the server's list of cookies.
(Harold L Hunt II)</li>

<li>winclipboardthread.c/winClipboardSaveXauthData - Add the generated
MIT-MAGIC-COOKIE-1 cookie to the Xauthority file.  Beware that this is
hard-coded to 127.0.0.1:0 and that the entry is not cleaned up upon
exit; this will force the host-based access to be disabled in some
cases and could cause problems starting X Clients until this is fixed.
(Harold L Hunt II)</li>

<li>xc/programs/Xserver/Imakefile - Add $(OS) to the XWINLIBS just
after libXwin.a is included, which allows us to call unreferenced
functions in libXau.a, such as XauWriteAuth.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-30</h4>
<table>
<tbody>

<tr><td>Released: 2003-12-31 1855 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>xc/programs/XServer/os/access.c - Fix a typo that was causing
localhost connections to be sent in xdmcp request packets.  On Darwin
this connection was even advertized first, causing troubles later.
(Matthieu Herrb)
<br />http://cvsweb.xfree86.org/cvsweb/xc/programs/Xserver/os/access.c.diff?r1=3.50&amp;r2=3.51</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 4.3.0-29</h4>
<table>
<tbody>

<tr><td>Released: 2003-12-24 1624 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winkeybd.c/winIsFakeCtrl_L - Call Sleep (0) if the first call to
PeekMessage returns nothing.  TweakUI occasionally causes the Alt_R
press/release to not be in the message queue at the time that we
receive the fake Ctrl_L press/release.  Calling Sleep (0) gives up the
rest of our time slice to other apps that need it, which causes the
Alt_R message to show up on our queue.  We can then call PeekMessage
again and check if the Alt_R is there or not.  If it is not there,
then we assume that we have a real Ctrl_L press, if it is there, then
we discard the fake Ctrl_L as usual.  I tested this with the
US-International layout and it seemed to work fine.  I originally
coded this fix with a short "keytest" program and was able to confirm that
the fix works there as well.  (Harold L Hunt II)</li>

<li>win.h, winkeybd.c, winkeybd.h, winwndproc.c - Remove dead code
that was wrapped with #if WIN_NEW_KEYBOARD_SUPPORT.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-28</h4>
<table>
<tbody>

<tr><td>Released: 2003-12-23 1125 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>General - Rebrand Cygwin/XFree86 as Cygwin/X since we aren't
really a port of XFree86's DDX to Windows; rather, we are a port of
the X Window System to Windows.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 4.3.0-27</h4>
<table>
<tbody>

<tr><td>Released: 2003-12-23 0035 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>wincreatewnd.c - Don't bring the top-level window to the top in
Multi-Window and Rootless modes.  (Kensuke Matsuzaki)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-26</h4>
<table>
<tbody>

<tr><td>Released: 2003-12-18 1015 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winkeybd.c - Properly save and clear the pointer to the internal
mode key state data when the keyboard is initialized, enabled, and
disabled.  (Takuma Murakami)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-25</h4>
<table>
<tbody>

<tr><td>Released: 2003-11-24 0915 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winkeybd.c - Before setting the autorepeat defaults, check if XKB
was not disabled and suppress the error message in the other case.
(Alexander Gottwald)</li>

<li>winconfig.c - Set xkb.disable even if no default keyboard is
configured.  (Takuma Murakami, Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-24</h4>
<table>
<tbody>

<tr><td>Released: 2003-11-21 1425 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>InitOutput.c/ddxProcessArgument () - Keep track of the -kb
parameter.  (Alexander Gottwald)</li>

<li>winwndproc.c/winWindowProc () - Only discard the windows
autorepeat messages if the XKB layer is not disabled.  (Alexander
Gottwald)</li>

<li>winconfig.c - Query windows about its keyboard autorepeat rate and
use this as default for the xserver.  (Alexander Gottwald)</li>

<li>winconfig.c - Changed log output for keyboard autodetection to use
the probed-prefix instead of the default-prefix.  (Alexander
Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-23</h4>
<table>
<tbody>

<tr><td>Released: 2003-11-17 2100 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>General - Recompile all libraries and executables against fixed
Xaw and Xt libraries.  Enabled OS/2-style fix for VendorShell and
vendorShellWidgetClass.  (Harold L Hunt II)</li>

<li>winkeybd.c/winKeybdProc () - Check xkbi pointer for NULL.  Fixes
crash when XKB was disabled with ``-kb''.  (Alexander Gottwald)</li>

<li>winconfig.c/winConfigKeyboard () - Read the AutoRepeat option from
the configfile.  (Alexander Gottwald)</li>

<li>winkeybd.c/winKeybdProc () - Initialize the XKB input layer with
the AutoRepeat options from the configfile.  (Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-22</h4>
<table>
<tbody>

<tr><td>Released: 2003-11-09 1622 EST</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>win.h, winkeybd.c, winmultiwindowwndproc.c, winwndproc.c - Remove
winStoreModeKeyStates () function and stop storing mode key state
within the hw/xwin layer.  Instead, query the internal X Server mode
key state, when we know that no key press/release events are pending,
and send key press/release events to get that state in sync with the
Windows mode key states.  This removes the possibility that the
hw/xwin and internal X Server mode key state vectors would get out of
sync.  This is also a general cleanup that utilizes more existing code
and removes some Cygwin-specific code.  (Takuma Murakami)</li>

<li>winwndproc.c - Catch WM_ENDSESSION message and perform clean
shutdown.  (Takuma Murakami)</li>

<li>winwndproc.c - WM_*KEYDOWN - Discard key presses generated from
Windows auto-repeat (these sorts of auto-repeats are handled by X).
(Takuma Murakami)</li>

<li>winmouse.c - Remap mouse buttons here when XFree86Server and
XINPUT are defined, since this combination of flags prevents a lower
layer from performing such remapping.  The end result is that
remapping mouse buttons works for the first time.  (Takuma
Murakami)</li>

<li>winconfig.c - Load the US keyboard layout for Japanese keyboards.
This ensures that WM_KEYUP messages are sent for the Caps Lock
key.  (Takuma Murakami, Kensuke Matsuzaki)</li>

<li>win.h, winengine.c, winmultiwindowwindow.c, winmultiwindowwm.c,
winpfbdd.c, winshaddd.c, winshadddnl.c, winshadgdi.c, winwindow.h -
Add an engine-specific function that is called after a Windows-window
is created in -multiwindow mode.  This is a start for adding
DirectDraw support to -multiwindow mode.  However, I got a little
confused here and thought that one primary surface would need to be
created per window, which is not correct.  There will be one primary
surface with a clip list that causes blits to stay within the region
of all of our visible windows.  In any case, this is a step in the
right direction.  There code is currently disabled since the engine
setting code only allows the GDI engine when -multiwindow is being
used.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-21</h4>
<table>
<tbody>

<tr><td>Released: 2003-10-28 1355 EDT</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>General - Recompile all libraries and executables against
stand-alone freetype2 and fontconfig packages.  (Harold L Hunt
II)</li>


<li>General - Cygwin now has strl{cat,cpy}(), so #define HasStrlcat as
YES in xc/config/cf/cygwin.cf and rebuild all apps and libraries.
(Matthieu Herrb)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 4.3.0-20</h4>
<table>
<tbody>

<tr><td>Released: 2003-10-17 1340 EDT</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Clipboard Support - Enabled copying and pasting of non-ascii
characters even when Windows does not support Unicode (i.e. Windows
95/98/Me).  (Kensuke Matsuzaki)</li>

<li>Clipboard Support - Add ``-nounicodeclipboard'' command-line
parameter that instructs the clipboard support in XWin.exe to not use
Unicode functions, even if Windows supports them.  (Kensuke
Matsuzaki)</li>

<li>winconfig.c - Prevent JP layouts loaded for JP Windows with US
keyboards.  (Takuma Murakami)</li>

<li>winscrinit.c - Bail if -rootless and -multiwindow flags both
present.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-18</h4>
<table>
<tbody>

<tr><td>Released: 2003-10-06 2120 EDT</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winclipboardxevents.c - Fix crash when copying large amounts of
data from an X application.  The crash was caused because the encoding
of the XTextProperty was INCR, which is an incremental transfer of
large amounts of text.  The problem isn't really fixed because copying
or cutting large amounts of text now causes that text to be lost
without warning, rather than copied to the clipboard.  The real
solution will be to implement the INCR protocol, which will follow in
a few days.  (Kensuke Matsuzaki, Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-17</h4>
<table>
<tbody>

<tr><td>Released: 2003-10-05 1305 EDT</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winwndproc.c - Ignore Win32 repeats for the VK_CAPITAL (Caps Lock)
key.  This may or may not help to keep the state of the Caps Lock key
in X and Windows in sycnh; it all depends on whether we are receiving
multiple VK_CAPITAL key press messages, or if we are receiving one key
press message with a repeat count greater than 1.  If this doesn't
work then we may need to look at masking key press events for Lock
keys that are already pressed in X.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-16</h4>
<table>
<tbody>

<tr><td>Released: 2003-10-04 1735 EDT</td></tr>

<tr><td>Note: No Cygwin-specific changes this time.  The only file
changed was xc/programs/Xserver/os/WaitFor.c, which was merely
synchronized with XFree86's CVS HEAD version.</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>xc/programs/Xserver/os/WaitFor.c - Backport Ivan Pascal's final
changes to timer processing (which was causing duplicate keystrokes in
some situations).</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4.3.0-15</h4>
<table>
<tbody>

<tr><td>Released: 2003-10-03 2100 EDT</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winconfig.c - Add another German keyboard layout.  (Alexander
Gottwald)</li>

<li>winconfig.c - Setting the default layout for Japanese to jp (was
jp106 before).  (Alexander Gottwald)</li>

<li>winconfig.c - Add a new default for Portuguese (Brazil, ABNT2).
(Alexander Gottwald)</li>

<li>winconfig.c - Print the layout number in hexadecimal instead of
decimal.  (Alexander Gottwald)</li>

<li>winmultiwindowwndproc.c/winTopLevelWindowProc() - Add processing
for WM_WINDOWPOSCHANGED to cause window to repaint when using
TweakUI's focus-follows-mouse behavior.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 4.3.0-14</h4>
<table>
<tbody>

<tr><td>Released: 2003-09-22 1550 EDT</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winconfig.c - Add the Japanese keyboard layout to the list of
defaults as jp106.  (Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 4.3.0-13</h4>
<table>
<tbody>

<tr><td>Released: 2003-09-21 0014 EDT</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Merge NativeGDI development branch.  The NativeGDI engine is now
accessible via the "-engine 16" command-line parameter.  Note that the
byte order for 1-bit bitmaps is only configurable at compile time,
which causes the output to be totally messed up.  Although, you can at
least examine how the engine currently works.  (Alan Hourihane)</li>

<li>Display the argument to the -query option in the window title.
(Alexander Gottwald)</li>

<li>winprefslex.l - Remove use_unused_functions(), which was only used
to force two functions to be imported, thus eliminating a compiler
warning.  This is no longer needed with the newest test version of
flex.  (Earle F Philhower III)</li>

<li>cygwin.cf - Define HasExpat as YES.  This adds a dependency on
Cygwin's expat lib, but it removes the distribution of an out of date
version of expat that was included with the XFree86 source code.
(Gerrit P. Haase, Harold L Hunt II, Alexander Gottwald)</li>

<li>Fix the occasional repeating of keystrokes in the xkb layer.  This
problem has been present in XFree86 for years, but it was more
apparent on Cygwin/X.  This patch is not yet in the XFree86 CVS
tree, so any bugs caused by this patch will need to be reported to
XFree86.  See the following email for a description of how the patch
works <a
href="http://www.mail-archive.com/devel%40xfree86.org/msg03245.html">XFree86
patch email</a>.  (Ivan Pascal)</li>

<li>General - Add runtime detection for the Cygwin IPC Daemon.  This
allows SHM (shared memory) support when the IPC Daemon is running.
SHM support is automatically disabled, with no adverse effect, when
the IPC Daemon is not running.  There is now a dependency on the
cygipc package, but no additional installation steps are required,
unless you want SHM support; in which case you need to run ipc-daemon2
(See the cygipc documentation for more details).  (Ralf Habacker,
Harold L Hunt II)</li>

<li>cygwin.cf - Ditch "-DNO_ALLOCA" and replace with
"-DINCLUDE_ALLOCA_H" for AllocateLocalDefines.  (Nicholas Wourms)</li>

<li>cygwin.cf - Ditch "-DUSE_XWCHAR_STRING -DUSE_XMBTOWC" and use
"-DHAS_WCHAR_H -DHAS_WCTYPE_H -DHAS_ISW_FUNCS -DNO_WIDEC_H" for
XawI18nDefines.  (Nicholas Wourms)</li>

<li>General - Recompile all libraries and executables for run-time
enabled shared memory support (SHM).  (Harold L Hunt II)</li>

<li>General - Recompile all libraries and executables for Cygwin
  1.5.3+.  (Harold L Hunt II)</li>

<li>X11.tmpl, cygwin.rules - Fix some warnings about undefined symbols
during cross compilation.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>
<h4>Release 99</h4>
<table>
<tbody>

<tr><td>Released: 2003-09-14 1740 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: Release 98</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.3.0-9</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwm.c - Add handling for WM_CHANGE_STATE IconicState
messages; minimize the associated Windows window when these messages
are received.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 98</h4>
<table>
<tbody>

<tr><td>Released: 2003-09-11 1314 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: Release 97</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.3.0-7</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winconfig.c - Disable the check for the specific keyboardtype 4
(pc105) and always assume that a 105 key keyboard is present.  This
fixes undetected layouts because of keyboard drivers which return
undocumented keyboardtypeids.  (Alexander Gottwald)</li>

<li>Xserver/xkb/ddxLoad.c - Read keymaps generated by xkbcomp as
binary files.  (Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 97</h4>
<table>
<tbody>

<tr><td>Released: 2003-09-03 1955 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: Release 96</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.3.0-6</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winconfig.c - Print the name of the keyboard layout to help in
adding new layouts.  (Alexander Gottwald)</li>

<li>winshadddnl.c - Stop printing the IDirectDrawSurface4_Blt()
failure messages after 10 times.  The message was clogging some
people's log files.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 96</h4>
<table>
<tbody>

<tr><td>Released: 2003-08-27 1505 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: Release 95</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.3.0-4</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winprefs* - Add a system to allow the user to specify arbitrary
commands for the system tray menu (e.g. program launching shortcuts)
as well as custom icons for certain window classes.  This is a huge
system and is really very amazing.  Preferences are stored in
~/.XWinrc or in /usr/X11R6/lib/X11/system.XWinrc, which is formatted
as in this <a
href="http://www.msu.edu/~huntharo/xwin/devel/server/example.XWinrc">example
.XWinrc file</a>.  (Earle F. Philhower III)</li>

<li>winmultiwindowclass.c - Fix a string copy bug in MultiWindow mode
that was likely to have been causing crashes for some people.  (Earle
F. Philhower III)</li>

<li>winconfig.c - Add new defaults for keyboardlayout: English (USA,
Dvorak) and Norwegian.  (Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 95</h4>
<table>
<tbody>

<tr><td>Released: 2003-08-02 2115 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: Release 94</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.3.0-3</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Signal the clipboard and multiwindow window manager threads to
stop trying to reconnect when the server is being shutdown.  These
reconnection attempts were causing intermittent GPFs (General
Protection Faults) on shutdown.  (Earle F. Philhower III)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 94</h4>
<table>
<tbody>

<tr><td>Released: 2003-08-01 2345 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: Release 93</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.3.0-2</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwm.c, winmultiwindowclass.h, winmultiwindowwndproc.c
- Automatically validate the sizes of windows while you're sizing
them, just like you find in most X11 window managers.  (Earle
F. Philhower III)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 93</h4>
<table>
<tbody>

<tr><td>Released: 2003-07-30 1915 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: Release 92</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-44</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>wintrayicon.c - Change code that shows/hides the seperator on the
tray icon menu.  This change was required to stay in synch with the
change in the position of the tray icon menu items that was applied to
XWin.rc in Release 92.  (Earle F. Philhower III)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 92</h4>
<table>
<tbody>

<tr><td>Released: 2003-07-28 2010 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 91</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-43</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winconfig.c - Add new defaults for keyboardlayout: German
(Switzerland) and English (USA, International).  (Alexander
Gottwald)</li>

<li>XWin.rc - Move Exit button to the bottom of the tray icon's menu.
(List suggestion)</li>

<li>winmultiwindowclass.c - Add checks for NULL pointers.  Should help
fix some crashes in MultiWindow mode.  (Ralf Habacker)</li>

<li>General - Add global variable that tracks whether XInitThreads ()
has been called so that it is only called once per process.  Calling
XInitThreads multiple times may have been contributing to crashes.
(Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 91</h4>
<table>
<tbody>

<tr><td>Released: 2003-06-02 1055 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 90</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-42</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winconfig.c - Change nodeadkeys default to NULL for the German
(Germany) keyboard layout.  (Alexander Gottwald, Benjamin
Riefenstahl)</li>

<li>X.ico - Add 24 x 24 - 256 color and 24 x 24 - 16 color icons.
(Harold L Hunt II, Benjamin Riefenstahl)</li>

<li>wintrayicon.c - Change hard-coded 16 x 16 icon load to use
GetSystemMetrics (SM_CXSMICON) and GetSystemMetrics (SM_CYSMICON) to
retrieve size of small icon to be used.  Hopefully this loads the 24 x
24 icon on systems that have been changed to use 24 x 24 icons for the
notification tray.  (Harold L Hunt II, Benjamin Riefenstahl)</li>

<li>winmultiwindowwindow.c - Break some functions from this file into
several new files: winmultiwindowicons.c, winmultiwindowshape.c, and
winmultiwindowwndproc.c.  Provide enough Tender Loving Care (TLC) to
the various header files so that all files still build with no
warnings.  Note that this drops the size of winmultiwindowwindow.c
from 55 KiB to 21 KiB and creates three new files, none of which is
larger than 23 KiB.  Of those three new files, winmultiwindowicons.c
is 10 KiB, winmultiwindowshape.c is 6 KiB, and winmultiwindowwndproc.c
is 23 KiB.  Finally, it is interesting to note that
winmultiwindowwndproc.c contains a single function,
winTopLevelWindowProc(), so that file cannot be made any smaller by
breaking other functions into separate files.  (Harold L Hunt II)</li>

<li>winclass.c, winclass.h - Rename these files to
winmultiwindowclass.c and winmultiwindowclass.h, respectively, since
they are only used in MultiWindow mode.  Prefix the functions in these
files with MultiWindow.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 90</h4>
<table>
<tbody>

<tr><td>Released: 2003-06-01 1655 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 89</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-41</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>wintrayicon.c/winInitNotifyIcon() - Replace call to LoadIcon with
a call to LoadImage that specifies the 16x16 icon as the size to be
loaded.  This makes the tray icon look much cleaner.  (Colin
Harrison)</li>

<li>wintrayicon.c/winDeleteNotifyIcon() - Call DestroyIcon on the icon
that was loaded in winInitNotifyIcon().  (Harold L Hunt II)</li>

<li>Clean up all compiler warnings in xc/programs/Xserver/hw/xwin.
The code now builds without a single warning when using the default
compilation flags on a Cygwin host.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 89</h4>
<table>
<tbody>

<tr><td>Released: 2003-05-31 2255 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 88</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-40</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwindow.c/winTopLevelWindowProc() - Rework the mouse
polling timer so that it is attached to the root-level window.  This
prevents multiple mouse polling timers from being created, which was
happening in the old versions.  Introduce a new way of determining
that the timer should be created or deleted, which will hopefully fix
some corner cases where the timer was not being created.  (Harold L
Hunt II)</li>

<li>XWin.rc - Remove a couple of window style flags that were not
compatible with Earle's patch for removing the minimize and maximize
buttons from the dialog boxes.  (Earle F. Philhower III)</li>

<li>XWin.rc - Make ``x'' and ``C'' hotkeys for the Exit Confirmation
dialog box.  (Colin Harrison, Biju G C)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 88</h4>
<table>
<tbody>

<tr><td>Released: 2003-05-30 2355 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 87</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-39</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwindow.c/winScaleXBitmapToWindows() - Clear the bits
in the alpha channel of the converted 32 bpp bitmap because it was
causing problems with window icons for certain display drivers.  Most
notably, display drivers from ATI were exhibiting these problems.
(Earle F. Philhower III)</li>

<li>wincursor.c/winPointerWarpCursor() - Discard the first cursor warp
message, since this is just X putting the mouse cursor in the center
of the screen, which is undesirable in Windows.  (Earle F. Philhower
III, Harold L Hunt II)</li>

<li>windialogs.c/winDisplay[Exit|DepthChange]Dialog() - Add calls to
drop the minimize and maximize buttons from the Exit Confirmation and
Depth Change dialog boxes, while preserving the icon on the upper left
hand corner of the dialog window.  (Earle F. Philhower III)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 87</h4>
<table>
<tbody>

<tr><td>Released: 2003-05-29 0045 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 86</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-38</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Convert X application icons set in WM_HINTS from XPMs to Windows
BMPs using an internal algorithm.  Earle, Ralf, and Colin worked
together on this one with coding, suggesting ideas, and testing.  The
end result is, as they say, very nearly perfect.  Each top-level X
window is now given its own class that has an icon associated with it.
The icon can be even changed while the application is running and this
is properly handled.  Icons are properly freed when a window and its
associated class are destroyed.  This entry encompasses a flurry of
emails and patches that I cannot possibly recount here; hopefully no
one feels slighted by this brief summary.  (Earle F. Philhower III,
Ralf Habacker, Colin Harrison)</li>

<li> Set XIconSizes() to the Windows approved 16, 32, and 48.  It
doesn't seem to be looked at by anything, but it is in the XLib
documents as something a WM should set.  (Earle F. Philhower III)</li>

<li>Removed several misc compile warnings.  (Earle F. Philhower
III)</li>

<li>winmultiwindowwindow.c/winTopLevelWindowProc() - Add a call to
winKeybdReleaseKeys () in WM_KILLFOCUS.  This fix stops the phantom
key presses that people were seeing.  The example here would be to
launch an xterm, then launch another xterm from that xterm.  Type
``exit'' in the first xterm and press enter.  The enter keydown
message is processed by the second xterm, but the keyup is never
processed so it got sent repeatedly to the root-level message loop
(which performs all keyboard processing), causing phantom key presses
to show up in any X app that currently had the focus.  At least, I
think that is that the problem was.  An interim solution was to press
and release the enter key, which would cause a keydown/keyup message
combo to be sent, thus ending the crazy looping.  This fix pops all
keys that are pressed when the current X app looses the keyboard
focus.  Colin suggested this, Earle move the location of the call to
the proper place.  (Colin Harrison, Earle F. Philhower III)</li>

<li>XWin.rc - Change the Exit Confirmation and Depth Change dialog
boxes to be centered by adding the DS_CENTER flag to the STYLE
attribute.  (Biju G C, Harold L Hunt II)</li>

<li>winmultiwindowwindow.c/winTopLevelWindowProc() - Let
DefaultWindowProc() handle the Alt+F4 key combo in the WM_*KEYDOWN
messages.  This allows a user to close a top-level X window (which has
an associated Windows window) by pressing Alt+F4.  Note that this
happens regardless of the -[no]winkill command-line parameter.  This
is the desired behavior since -[no]winkill should only affect the
behavior of the root-level window, not the individual X Client
windows.  (Biju G C, Harold L Hunt II)</li>

<li>winwndproc.c/winWindowProc() - Define a WM_GIVEUP message that
calls GiveUp(); remove the GiveUp() call from WM_CLOSE and replace it
with a call to winDisplayExitDialog(), which displays the Exit
Confirmation dialog box.  This only makes sense in conjunction with
the next change log entry.  (Biju G C, Harold L Hunt II)</li>

<li>windialogs.c/winExitDlgProc()/WM_COMMAND/ID_OK - Pass WM_GIVEUP to
PostMessage() instead of passing WM_CLOSE.  This patch causes the end
result that, in MultiWindow mode, selecting Close from the system menu
for non-root-level Windows window causes that particular X Client to
be killed.  The previous result was that the XWin.exe process was
exited without displaying the Exit Confirmation dialog box.  This must
have been a frustrating situation indeed and it makes this bug a
marvelous catch on Biju's part.  NOTE: The system menu can be opened
by right clicking on the title bar, or by left clicking the icon in
the upper left-hand corner of the app window, or by right clicking on
the application entry in the task bar.  (Biju G C, Harold L Hunt
II)</li>

<li>windialogs.c/winDisplay(Exit)|(ChangeDepth)Dialog() - Call
SetForegroundWindow() if the dialog box has already been created.
This pulls the dialog box to the foreground if it has been buried by
other windows.  It is legitimate to do this here because we are
responding to user input of some sort when this function gets called.
(Harold L Hunt II)</li>

<li>XWin.rc - Add the extended style WS_EX_DLGMODALFRAME and the
normal style WS_DLGFRAME to the Exit Confirmation dialog box in an
attempt to stop the dialog box from being listed in the task bar,
which was reported by one user.  This task bar listing has been
negatively confirmed in Windows 2000 and Windows XP, but it may be
happening in other versions of Windows.  Of course, this could have
been a reference to the fact that the dialog is present in the Alt+Tab
list.  However, that is the desired behavior and will not be changed
(how else could you get back to that dialog box?).  (Biju G C, Harold
L Hunt II)</li>

<li>Try, in vain, to maintain a uniform coding style and
variable/function naming convention.  I am mostly winning the
curly-brace (curly braces on separate lines please), indenting (emacs
default please), parameter spacing (e.g. func&nbsp;(x, y) instead of
func(&nbsp;x,y&nbsp;), func(&nbsp;x, y&nbsp;), or even func(x,y)), and
binary operator spacing ((x&nbsp;+&nbsp;y) instead of (x+y)) wars, but
I am pitiful excuse for a belligerent dictator when it comes to the
variable naming (follow examples in winwndproc.c), variable prefixing
(follow winwndproc.c, which is my own sick mix of Hungarian prefixes
(int, dw, psz, f) and old-school C prefixes (i, n, l)), and function
naming wars.  I would like to ask all contributors to try to follow
the code that they see in the files that I authored, but I don't feel
that I have the right to reject patches that don't follow those
conventions.  I will, however, try my best to adapt all patches so
that I can read them and more easily maintain them in the future.  You
may also have noticed that I am a profuse commentor... I do that
because I have a very poor memory of why things were done they way
that they were done, so I sprinkle tips throughout the code to help
myself remember things.  You know, I have been realizing the entire
time that I was writing this change log that I have low blood sugar, I
am very tired, and this is so not the place for such huge amounts of
text.  Time for bed.  Change log over.  (Anonymous... Like you have to
guess)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 86</h4>
<table>
<tbody>

<tr><td>Released: 2003-05-18 1426 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 85</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-37</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwindow.c/winTopLevelWindowProc() - Remove a
dependency on GetWindowInfo(), which is only present in NT 4.0 SP6,
Windows 98, and later.  Thanks to Dr. Charles L. Werner for reporting
this problem on Windows NT 4.0 SP3 and to Alexander Gottwald for
confirming that GetWindowInfo() is not present in Windows 95.  (Earle
F. Philhower III)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 85</h4>
<table>
<tbody>

<tr><td>Released: 2003-05-17 1320 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 84</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-36</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Implement window title changing in MultiWindow mode.  (Earle
F. Philhower III)</li>

<li>Implement an Always On Top command in the right-click menu (System
Menu) for each window in MultiWindow mode.  (Earle F. Philhower,
III)</li>

<li>Move the XNextEvent loop into a separate thread for MultiWindow
mode.  (Earle F. Philhower III)</li>

<li>Fix a race between the startup of the clipboard thread and
MultiWindow window manager thread that caused window title changing to
bork.  (Harold L Hunt II)</li>

<li>Stop calling pthread_exit () from winClipboardErrorHandler ().  An
error is an error, not a reason to dump core.  This may fix problems
people have been having with -clipboard, but I don't make any
promises.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 84</h4>
<table>
<tbody>

<tr><td>Released: 2003-05-13 0954 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 83</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-35</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Fix/implement window maximizing and restoring in MultiWindow mode.
(Earle F. Philhower III)</li>

<li>Implement handling in MultiWindow mode for monitors to the left of
the primary monitor on systems with multiple monitors.  (Earle
F. Philhower III)</li>

<li>Destroy the Exit confirmation dialog box and NULL its pointer when
the server is reset.  This fixes a problem that occurred when the Exit
confirmation dialog box was displayed and the server was reset; the
Exit confirmation dialog box would never display again after that
happened, preventing you from normally exiting Cygwin/X.
(Harold L Hunt II)</li>

<li>Make the Windows window title include the display number and
screen number (e.g. Cygwin/X 0:0) for the main window in
non-MultiWindow modes and the normally hidden root window in
MultiWindow mode.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 83</h4>
<table>
<tbody>

<tr><td>Released: 2003-05-01 1250 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 82</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-34</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Fix the Exit confirmation dialog box so that the arrow keys, tab
keys, and Enter/Escape keys all work.  Additionally, make the Exit
confirmation dialog box get the keyboard focus when it is opened.  It
was being set as the active window, but the keyboard focus was not
being set properly.  (Harold L Hunt II)</li>

<li>Make the Cancel button the default button on the Exit confirmation
dialog box.  Thanks to Biju G C for giving me a heads-up on this one.
(Harold L Hunt II)</li>

<li>Fix the cursor hiding on the Exit confirmation dialog box that was
occurring when no X Client windows were open in MultiWindow
mode.  (Harold L Hunt II)</li>

<li>Fix the Exit confirmation dialog box so that it doesn't prevent
the keyboard focus from returning to X Client windows in MultiWindow
mode when you dismiss the dialog box by closing it or by pressing
Cancel.  (Harold L Hunt II)</li>

<li>Change the root window title in MultiWindow mode to
``Cygwin/X'' from ``Cygwin/X rl''.  (Harold L Hunt
II)</li>

<li>Change MultiWindow mode to use XWin.log again, instead of
XWinrl.log.  (Harold L Hunt II)</li>

<li>Change the top-level window procedure for MultiWindow mode to
share a global cursor hidden/shown flag with the root window
procedure.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 82</h4>
<table>
<tbody>

<tr><td>Released: 2003-04-30 2025 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 81</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-33</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Add an exit confirmation dialog box for when the user selects Exit
from the tray icon right-click menu and for when the user presses
Alt-F4 or Ctrl-Alt-Backspace (if the -unixkill command-line parameter
was specified).  (Harold L Hunt II)</li>

<li>Add ``Show Root Window'' and ``Hide Root Window'' commands to the
tray icon right-click menu when using MultiWindow mode (-multiwindow
command-line parameter).  These commands should be self-explanatory.
Thanks to Biju G C for the idea for this.  (Harold L Hunt II)</li>

<li>Add the X icon to the Depth Change dialog box.  Has anyone ever
seen this dialog box?  I added it months ago and have never heard from
anyone that it works or doesn't work.  (Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 81</h4>
<table>
<tbody>

<tr><td>Released: 2003-04-29 2347 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 80</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-32</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Fix tray icon right-click menu to make sure that it disappears
when you click outside of the menu.  (Harold L Hunt II)</li>

<li>Delete the tray icon in the per-screen close procedure, which
ensures that every tray icon is deleted.  This also causes the tray
icons to be deleted when the server is reset, which is required since
the tray icons are recreated when the server is reset.  (Harold L Hunt
II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 80</h4>
<table>
<tbody>

<tr><td>Released: 2003-04-29 1932 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: Release 79</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-31</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Add automatic keyboard detection for ``Portuguese (Brazil)'',
``Portuguese (Portugal)'', and ``Italian''.  (Alexander Gottwald)</li>

<li>Add taskbar notification area (tray) icon.  Exit on double-click
of icon.  (Early Ehlinger)</li>

<li>Add popup menu for right-click on tray icon.  Add menu item for
``Exit''.  (Harold L Hunt II)</li>

<li>Add -[no]trayicon command-line parameters.  The default is for the
tray icon to be created for each screen (as if -trayicon were
passed).  You can turn tray icons off by placing -notrayicon at the
beginning of the parameter list to XWin.exe (must be before any
-screen x parameters).  You can then enable the tray icon on a
screen-by-screen basis by placing -trayicon after any -screen x
parameter that you wish to have tray icons enabled for.  For example,
``XWin.exe -notrayicon -screen 0 -screen 1 -screen 2 -trayicon'',
would create three screens, two of which (screens 0 and 1) would not have tray
icons, while the third (screen 2) would.</li>

<li>Hide root window in MultiWindow mode.  (Early Ehlinger)</li>

<li>Add some initial support files that might eventually hold code for
the X Video Extension.  These files do not currently affect the
operation of the server and I have stopped working on them for the
time, but I will leave them there as a place holder.  (Harold L Hunt
II)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 79</h4>
<table>
<tbody>

<tr><td>Released: 2003-03-12 0937 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-27</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>MultiWindow Mode - Fix for the focus jumping rapidly and
uncontrollably between windows in certain scenarios.  (Kensuke
Matsuzaki)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 78</h4>
<table>
<tbody>

<tr><td>Released: 2003-02-24 0828 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-07-29</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-26</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Automatically detect several non-U.S. keyboard configurations by
querying Windows for the current locale.  (Alexander Gottwald)</li>

<li>Add a check for the height not being toggled to a positive integer
when the Shadow GDI DIB is created.  One user has reported it so far,
so it may be due to a single video card or driver version.  Also, this
may not fix the problem.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 77</h4>
<table>
<tbody>

<tr><td>Released: 2003-01-29 1415 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-02-12 1005 EST</td></tr>

<tr><td>Basis: Release 76</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-25</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Only call setlocale () once per process.  This was causing crashes
on startup when using both the -clipboard and -multiwindow
command-line parameters.  (Kensuke Matsuzaki, Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 76</h4>
<table>
<tbody>

<tr><td>Released: 2003-01-28 1923 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-02-12 1005 EST</td></tr>

<tr><td>Basis: Release 75</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-24</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winshadgdi.c/winAllocateFBShadowGDI - Fix how dwStride was being
calculated, which was causing a crash on startup with both the
-engine 1 and -multiwindow command-line parameters.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 75</h4>
<table>
<tbody>

<tr><td>Released: 2003-01-26 2245 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-02-12 1005 EST</td></tr>

<tr><td>Basis: Release 74</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-23</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winshaddd[nl].c/winReleasePrimarySurfaceShadowDD[NL] - Check that
pddsPrimary is not NULL before calling
IDirectDrawSurface[2|4]_SetClipper.  This most likely showed up as a
crash during video depth changes.  (Alexander Gottwald)</li>

<li>winshaddd.c - Change a few accidental IDirectDrawSurface4
references to IDirectDrawSurface2.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>
<h4>Release 74</h4>
<table>
<tbody>

<tr><td>Released: 2003-01-24 1105 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-02-12 1005 EST</td></tr>

<tr><td>Basis: Release 73</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-22</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>xc/lib/xtrans/Xtransutil.c - Remove Cygwin-specific defines of
fchown and fchmod to chown and chmod, respectively.  It is not clear
when these were added, but they are certainly no longer needed and are
likely the cause of the first segfault that occurs if you debug
XWin.exe under gdb.  (Takashi Sawanaka)</li>

<li>Remove the condition variable used in the startup of the threaded
clipboard manager and multi-window window manager; the condition
variable was not needed and actually caused a race condition that
could prevent either manager from starting up.  Instead, just use a
mutex to hold the threads until the server has started, at which point
the mutex is unlocked.  (Harold Hunt)</li>

<li>winmultiwindowwm.c, winclipboardthread.c - Remove calls to
_Xsetlocale and replace them with calls to setlocale, since
_Xsetlocale is just defined to be setlocale.  (Kensuke Matsuzaki)</li>

<li>Fix a problem where the server window would shrink each time the
server was reset.  This problem only happened in non-rootless,
non-fullscreen, non-nodecoration, and non-scrollbars modes.  In other
words, it only happened when you ran the X Server in a single window
that had a window border but no scrollbars.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 73</h4>
<table>
<tbody>

<tr><td>Released: 2003-01-20 0108 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-02-12 1005 EST</td></tr>

<tr><td>Basis: Release 72</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-21</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Preliminary integration of the <em>xwinclip</em> functionality
into the main server executable.  This functionality is accessible via
the <em>-clipboard</em> command-line parameter.  (Harold Hunt)</li>

<li>Delay the execution of the Multi-Window Window Manager thread
until the X Server has finished starting up.  (Harold Hunt)</li>

<li>Restructure the way that the Multi-Window Window Manager handles
fatal errors.  Return FALSE when we encounter an initialization error
so that the server can make a clean exit, instead of aborting
immediately by calling exit (1).  For later errors, call pthread_exit
(NULL) instead of exit (1) so that only the Multi-Window Window
Manager aborts; there is no need to kill the X Server process since
work could still be recovered without the window manager module.
(Harold Hunt)</li>

<li>Destroy the pthread mutex and condition variables, used for
synchronization in the Multi-Window Window Manager, upon X Server
exit.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 72</h4>
<table>
<tbody>

<tr><td>Released: 2003-01-17 0153 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-02-12 1005 EST</td></tr>

<tr><td>Basis: Release 71</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-20</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winmultiwindowwindow.c - Add an evil, naughty, ugly, shameless,
and worthless hack to the multi-window mode to enable the X
Non-Rectangular Shape extension.  This will need to be evaluated and
fixed by other developers.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 71</h4>
<table>
<tbody>

<tr><td>Released: 2003-01-15 1007 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-02-12 1005 EST</td></tr>

<tr><td>Basis: Release 70</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>This is an unstripped build to aid in debugging the new
multiwindow mode.</li>

<li>Attempt at fixing the segfault on startup that some users are
reporting.  (Kensuke Matsuzaki)</li>

<li>New <em>-multimonitor</em> command-line parameter that is used to
tell XWin.exe to display across all available displays.  (Nick
Crabtree)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 70</h4>
<table>
<tbody>

<tr><td>Released: 2003-01-12 1434 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-02-12 1005 EST</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-18</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>EXPERIMENTAL: New multiwindow mode (invoked with the
<em>-multiwindow</em> command-line parameter) that creates each
top-level X window in a Microsoft Windows window.  Note that there are
still debugging options on in this release, so do not expect
multiwindow mode to be polished enough for everyday use.  (Kensuke
Matsuzaki)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 69</h4>
<table>
<tbody>

<tr><td>Released: 2002-11-07 0015 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2003-02-12 1005 EST</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-16</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Fix memory leaks in rootless mode.  (Kensuke Matsuzaki)</li>

<li>The test releases, and all future stable releases, are now built
with GCC 3.2.  There were no problems encountered when switching to
the new compiler version.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 68</h4>
<table>
<tbody>

<tr><td>Released: 2002-10-20 2321 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2002-10-31 0610 EST</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-15</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Add support for non-rectangular windows created by the X Shape
Extension while in Rootless mode (e.g., ``XWin -rootless'').
(MATSUZAKI Kensuke)</li>

<li>Not in the release build, but in the sources: Clean up the RANDR
extension code to match the latest RANDR interface.  This can't be enabled
yet because it crashes on startup in 32 bit per pixel mode. (Harold Hunt)
</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 67</h4>
<table>
<tbody>

<tr><td>Released: 2002-10-18 2248 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-14</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Turn off debugging message in winwindow.c/winAddRgn () that was
being printed thousands, if not millions, of times.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 66</h4>
<table>
<tbody>

<tr><td>Released: 2002-10-16 2004 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2002-10-17 0400 EDT</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-13</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Include an X icon and the necessary build rules for building
Windows resource files (even while cross compiling).  (Harold Hunt,
Jehan Bing)</li>

<li>Include a preliminary rootless mode.  (MATSUZAKI Kensuke)</li>

<li>XF86Configfile suppport.  (Alexander Gottwald)</li>

<li>Scrollbars support.  (Jehan Bing, Harold Hunt)</li>

<li>Warning dialog on disruptive screen depth change --- not quite perfect.
(Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 65</h4>
<table>
<tbody>

<tr><td>Released: 2002-07-16 0051 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-12</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Enable initial scrollbar support, when the new ``-scrollbars''
command-line argument is passed.  (Jehan Bing, Harold Hunt)</li>

<li>Correct the preprocesor definition of PROJECTROOT for
xc/programs/Xserver/hw/xwin/Imakefile.  (Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 64</h4>
<table>
<tbody>

<tr><td>Released: 2002-07-08 2212 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-11</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winconfig.c, winconfig.h, winmsg.c, winmsg.h, InitOutput.c,
winkeybd.c - Add support for using XF86Config-style configuration
files.  (Alexander Gottwald)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 63</h4>
<table>
<tbody>

<tr><td>Released: 2002-07-04 0300 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2002-07-06 0959 UTC</td></tr>

<tr><td>Basis: Release 62</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-10</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>General - Fix the broken build that was Release 62.  Release 62 crashed
during its startup sequence for anyone unfortunate to download it
before it was pulled from distribution.  (Harold Hunt)</li>

<li>win.h, winmisc.c, winpfbdd.c, winshadgdi.c, winshaddd.c,
winshadddnl.c, winscrinit.c - Reimplement the stride pixel
calculations that were removed in Release 61.  The ``stride'' is the
number of whole pixels that fit in a padded scan line; in other words,
the stride is the number of bits in a scanline divided by the number
of bits used to store each pixel (i.e., bits per pixel).  We cannot
pass the simple pixel width of the window to the fb initialization
routines because sometimes we have invisible pixels on the scanline
that must be accounted for (e.g., when the number of pixels in the
width is odd).  Had anyone seen this bug they would have seen a server
that drew things diagonally (only -engine 2 seemed to exhibit this
problem).  (Harold Hunt)</li>

<li>winshaddd.c, winshadddnl.c - Add support for the `-clipupdates
num_boxes' parameter when using `-engine 2' or `-engine 4', in
addition to the previously supported `-engine 1'.  Once again, I can't
tell if this feature has any benefit whatsoever.  I need some
volunteers to perform rigorous testing with different values for the
threshold at which point updated boxes are collected into a clipping
region.  One may find the ``x11perf'' program beneficial here, as well
as ``glxgears'', which gives a frames per second reading.  Of course,
it would be most beneficial to have performance comparisons for a few
different machine types (processors, memory amounts, video cards, PCI
or AGP, etc.).  Update clipping is off by default.  (Harold Hunt)</li>

<li>win.h, InitOutput.c, winengine.c, winshaddd.c, winshadddnl.c,
winshadpfb.c - Change the DirectDraw module handle and function
pointers from screen privates to global variables.  Loading the
DirectDraw module and function pointers needs to be done only at
server initialization, not at screen initialization.  Similarly, we
don't need to unload and reload DirectDraw for each screen when the
server regenerates; rather, we need only unload DirectDraw when the
server is shutting down.  This cleanup makes it much for difficult to
misunderstand what is going on with the DirectDraw module handle and
function pointers.  (Harold Hunt)</li>

<li>win.h, InitOutput.c, winengine.c - Detect the supported engines
only once at startup, rather than once per screen initialization.
Rework the supported engine detection logic to assume that the
DirectDraw module handle and function pointers have already been
loaded if they are present and working.  (Harold Hunt)</li>

<li>win.h, InitOutput.c, winwndproc.c - Add a global module handle for
``comctl32.dll'' and ``_TrackMouseEvent''.  Try to get a pointer to
the _TrackMouseEvent function and print an informational message if we
cannot find the function, suggesting to the user that they install
Internet Explorer 3.0 or greater if they have not already done so.
We also set the _TrackMouseEvent function pointer to point to the no
operation function if we can't find a valid function so that any calls
to the function pointer will do nothing (instead of trying to
dereference a NULL and crashing).  Mouse pointer hiding/showing may be
messed up when we don't have _TrackMouseEvent, but the user can
remedy that by following the advice in the information message.
Remove our compile-time link to comctl32.dll.  (Harold Hunt)</li>

<li>InitOutput.c, winshadgdi.c, winshaddd.c, winshadddnl.c - Add an
`-emulatepseudo' parameter that causes a depth 8 PseudoColor visual to
be created in TrueColor modes, with the same limitations described in
the Release 62 change log.  PseudoColor emulation is off by default.
(Harold Hunt)</li>

<li>winscrinit.c - Add special handling for 8 bits per pixel screens
when calculating the depth of the screen.  An 8 bit per pixel screen
has no color masks so we can't sum up the bits in the color masks.
Fortunately, we know that an 8 bit per pixel screen is always depth
8.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 62</h4>
<table>
<tbody>

<tr><td>Released: 2002-07-02 0026 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2002-07-06 0959 UTC</td></tr>

<tr><td>Basis: Release 61</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-9</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winscrinit.c, InitOutput.c, winshadgdi.c, winshaddd.c,
winshadddnl.c - Correctly calculate the number of bits used to store
color information by counting the total number of bits that are set in
our color masks.  This should fix problems introduced in Release 61 for
users with 24bpp or 15bpp displays.  (Alan Hourihane, Harold Hunt)</li>

<li>InitOutput.c, winshadgdi.c, win.h - Add support for an
experimental parameter, that only works with `-engine 1', that
combines a specified number of boxes in the shadow update region into
a GDI clipping region then performs a single Blt operation for the
entire shadow framebuffer to the primary framebuffer, using the
clipping region to constrain the Blt to the updated area.  You specify
the number of boxes in a region that should be combined into a
clipping region using the new `-clipupdates num_boxes' parameter; by
defaul the feature is disabled, which is done by setting num_boxes to
zero.  (Harold Hunt)</li>

<li>winshadgdi.c, winshaddd.c, winshadddnl.c - Add a call to
initialize an 8bpp PseudoColor visual on top of our TrueColor visual
when WIN_EMULATE_PSEUDO_SUPPORT is enabled; by default,
WIN_EMULATE_PSEUDO_SUPPORT is not enabled.  This new PseudoColor
visual will allow programs such as Magic 7.1 to display when
Cygwin/X is running with a TrueColor default visual; however,
the colors are all messed up.  It may be possible to fix the colors by
making changes to our local colormap handling funtions (and enabling
them in TrueColor mode, which they currently are not), or by making
some change to FB and/or SHADOW.  This feature is being added now
because Cygwin/X doesn't crash when we call
miSetVisualTypesAndMasks a second time; I must be doing something
differently now that fixed the crashing (probably the bpp and depth
handling fixes).  (Harold Hunt)</li>

<li>winshadgdi.c, winshaddd.c, winshaddnl.c - Add a #if conditional to
winInitVisuals* that calls miSetVisualTypesAndMasks or
fbSetVisualTypesAndMasks depending on if XFree86Server is defined.
Currently this isn't useful because Mesa (similar to Open GL) doesn't
work when XFree86Server is undefined.  I'll leave this here for now
for future reference.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 61</h4>
<table>
<tbody>

<tr><td>Released: 2002-06-27 0020 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2002-07-06 0959 UTC</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-8</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>General - Fix the KDE 3.0 alpha-channel icon bug that appeared
only when running Windows at 32 bits per pixel.  Many more details
below.  (Alan Hourihane)</li>

<li>
<p>General - pScreenInfo->dwDepth used to refer to the depth that the
user specified with the -depth parameter or the depth returned by
GetDeviceCaps (BITSPIXEL) and pScreenInfo->dwBPP used to refer to the
bits of color per pixel.  For example, running Windows at 32 bit color
would mean dwDepth == 32 and dwBPP == 24.  It turns out that this was
exactly backwards from what it should be.</p>

<p>The dwDepth variable new refers to the color ``depth'' of a pixel,
that is, the number of bits that make up the color specification for a
pixel.  For example, a 32 bit pixel uses 24 bits to represent color
plus an 8 bit pad for alignment purposes and a 16 bit pixel can use 15
or 16 bits to represent color.  The dwBPP variable now refers to the
bits used to store each pixel, that is, the number of bits that each
pixel occupies in the framebuffer memory.  For example, a 32 bit pixel
occupies 32 bits in the framebuffer memory while a 24 bit pixel
occupies 24 bits in the framebuffer memory (the former pixels are 32
bit aligned, while the latter pixels are called ``packed'' because the
pixels are not aligned and any given pixel may actually be stored in
two separate 32 bit units).</p>

<p>The meaning of dwDepth and dwBPP was corrected throughout the
source code, touching files such as wincmap.c, winscrinit.c,
InitOutput.c, winshadddnl.c, winshaddd.c, winshadgdi.c,
winnativegdi.c, winpfbdd.c, and win.h.  Also, we modify the depth 24
pixmap format at runtime to use 24 bits per pixel, instead of 32, when
Windows is running in 24 bit color; this matches the Windows pixel
format when running in 24 bit color.</p>

<p>The end result of all of this is that we now no longer report that
we have a depth 32 visual, as depth 32 visuals do not exist.  What we
were previously calling a depth 32 visual is actually a depth 24
visual with a different bits per pixel.  Advertising a proper visual
when running Windows at 32 bit color corrects the problem of KDE 3.0
not displaying icons or text with alpha channels.  Alan did the
magical part of discovering the underlying problem, I did the grunt
work of cleaning the code and making sure that all of the corner cases
were still handled.  (Alan Hourihane, Harold Hunt)</p>
</li>

<li>winshaddd.c, winshadddnl.c, winshadgdi.c, win.h, winscrinit.c -
Remove the essentially unused dwStride and dwStrideBytes variables
from the ScreenInfoRec.  (Harold Hunt)</li>

<li>winshaddd.c, winshadddnl.c - In winBltExposedRegionsShadowDD* ()
we try to restore the primary DirectDraw surface up to
WIN_REGAIN_SURFACE_RETRIES (currently 1) times when a bit block
transfer of the exposed regions fails.  This corrects the case where
switching a notebook from its internal display to an external display
(or vice versa) would cause the Cygwin/X window to blank and
fail to redraw itself until the Cygwin/X window was minimized
and then restored.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 60</h4>
<table>
<tbody>

<tr><td>Released: 2002-06-22 0007 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2002-07-06 0959 UTC</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-7</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Do a clean before rebuilding the server to ensure that the RENDER
extension is compiled in and enabled.  The RENDER extension is now
reenabled.  Unfortunately, the RENDER extension is the cause of the
display problem with KDE 3.0 icons that have alpha channels at a depth
of 32 bits per pixel.  It was previously thought that the LAYER and
RANDR extensions were causing the problem because a rebuild of the
server with RENDER enabled did not actually have RENDER enabled, thus
making it seem that RENDER was not causing the problem.  (Harold
Hunt)</li>

<li>wincreatwnd.c - Remove a seemingly erroneous return from
winCreateBoundingWindowFullScreen when we are using the Shadow GDI
engine.  This return was before we called UpdateWindow and
BringWindowToTop.  This seems to have snuck in at some point during
merging of my local 4.2.0 and main trees.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 59</h4>
<table>
<tbody>

<tr><td>Released: 2002-06-14 0826 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2002-06-17 0804 UTC</td></tr>

<tr><td>Basis: Release 58</td></tr>

<tr><td>Cygwin setup.exe package: XFree86-xserv-4.2.0-6</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>win.h, xc/config/cf/cygwin.cf - Stop building RANDR and disable
Cygwin/X's LAYER support.  These two extensions were causing KDE
3.0 icons with alpha channels to not display.  RENDER is still
enabled.  (Harold Hunt)</li>

<li>xc/programs/Xserver/os/osinit.c - Don't close the stdin, stdout,
stderr file handles on Cygwin.  We are no longer a command-line
application so stdin, stdout, and stderr point to our first three file
handles, rather than to their usual locations.  This keeps the log
file from being closed when you run XWin.exe with 'start XWin.exe'.
(Stuart Adamson)</li>

<li>winwndproc.c - Call TrackMouseEvent to setup tracking for the
WM_MOUSELEAVE message.  When we see a WM_MOUSELEAVE message we show
the cursor if we are hiding it.  This will prevent cursors from
disappearing when using the -lesspointer parameter.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 58</h4>
<table>
<tbody>

<tr><td>Released: 2002-06-13 0102 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2002-06-17 0804 UTC</td></tr>

<tr><td>Basis: Release 57</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>InitOutput.c, XWin.man, win.h, winwndproc.c - Add the -lesspointer
command line parameter which causes Cygwin/X to hide the Windows
mouse cursor when the mouse is over any Cygwin/X window (whether
activated or not).  (Stuart Adamson)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 57</h4>
<table>
<tbody>

<tr><td>Released: 2002-06-08 2149 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2002-06-17 0804 UTC</td></tr>

<tr><td>Basis: Release 56</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winwndproc.c - Call DefWindowProc after processing WM_NCMOUSEMOVE
messages.  This should fix the highlighting of the minimize and exit
buttons in Windows XP.  (Jehan Bing)</li>

<li>winwndproc.c, win.h, winallpriv.c - Make the cursor state
variable, fCursor, a static local variable in
winwndproc.c/winWindowProc (), rather than a member variable in the
winPrivScreenRec structure.  This makes sense because the Windows
cursor is either hidden or shown, as Windows does not hide or show the
mouse cursor on a per-window basis.  This also greatly simplifies the
handling of hiding and showing the Windows mouse cursor.  (Jehan
Bing)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 56</h4>
<table>
<tbody>

<tr><td>Released: 2002-06-07 2235 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2002-06-17 0804 UTC</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>InitOutput.c, win.h, wincreatewnd.c - Add a -nodecoration
parameter that creates the Cygwin/X window that is the same size
as the desktop, without a border.  The end effect is that you can
still get to the taskbar (even with Auto Hide enabled) and easily
switch to other application while not giving up any screen space to
the title bar, borders, etc.  (Jehan Bing)</li>

<li>winkeybd.c - Disregard the bogus key releases that we see when
losing the focus via Alt+Tab.  (Stuart Adamson)</li>

<li>win.h, winkeybd.h, winkeybd.c, winwndproc.c - Release all pressed
keys when the X server loses the keyboard focus.  (Stuart
Adamson)</li>

<li>InitOutput.c - Fix a typo that set iE3BTimeout to TRUE instead of
the specified timeout parameter when using the 3 button mouse
emulation timeout parameter with a single X screen.  (Stuart
Adamson)</li>

<li>wincursor.c - See if we are the foreground window before warping
the Windows cursor position.  This fixes the new bug that occurs if
you launch Cygwin/X and give another application the focus.  In
that case the Windows mouse cursor would still jump to the center of
the screen, even though the Cygwin/X window was not active.
(Harold Hunt)</li>

<li>winkeybd.h - Fix the bug where pressing both shift keys then
releasing them both would still cause all keyboard input to be
shift-modified.  The fix was to set the fixup for the non-extended
VK_SHIFT key to KEY_ShiftL.  (Harold Hunt)</li>

<li>wincreatewnd.c - Pass SW_SHOWNORMAL instead of SW_HIDE to
ShowWindow when running a DirectDraw engine in fullscreen mode.  This
fixes the bug where launching Cygwin/X then giving another
application the focus before the Cygwin/X window was displayed
would cause Cygwin/X to never display a window or register a
window handle on the Windows taskbar.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 55</h4>
<table>
<tbody>

<tr><td>Released: 2002-04-04 2206 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2002-04-11 0825 UTC</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>wincursor.c - Try to fix winPointerWarpCursor by offsetting by the
coordinates of the Cygwin/X client area upper left-hand
corner.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 54</h4>
<table>
<tbody>

<tr><td>Released: 2002-04-03 2033 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2002-04-11 0825 UTC</td></tr>

<tr><td>Basis: XFree86 4.2.0 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>wincursor.c - Attempt to make WarpCursor function correctly by
adding function winWarpCursor.  The new function calls SetCursorPos ()
with the x and y coordinates passed to winWarpCursor.  Hopefully this
works.  (Harold Hunt)</li>

<li>winkeybd.c - Change winKeybdBell () to call MessageBeep (MB_OK)
instead of Beep (0, 0).  Beep () uses the PC speaker on Windows
NT/2000, which isn't desireable.  It also seems that Beep () may have
been causing freezes for some users.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 53</h4>
<table>
<tbody>

<tr><td>Released: 2001-11-11 1500 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-11-12 0348 EST</td></tr>

<tr><td>Basis: Release 52</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>winkeybd.c - winRestoreModeKeyStates () - This function is
supposed to handle the case where the user switches out of
Cygwin/X, changes the state of a mode key (i.e. Num Lock), then
returns to Cygwin/X.  Back in May I replaced a macro, WIN_XOR,
with the C binary operator ^.  At the time I didn't realize that I was
using the binary operator instead of the logical operator.  The end
result is that some of the mode keys were toggled each time that
Cygwin/X gained and lost focus, regardless of whether the key
state had changed.  The WIN_XOR macro is being used again, and I have
added a note as to why the C xor operator cannot be used.  This has
been broken for months, I'm really surprised that no one noticed it
yet.</li>

<li>winwndproc.c - winWindowProc () - Move the mode key state
save/restore function calls to the WM_KILLFOCUS and WM_SETFOCUS
messages, from the WM_ACTIVATE message.</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 52</h4>
<table>
<tbody>

<tr><td>Released: 2001-11-11 1200 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-11-11 1746 EST</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>InitOutput.c - ddxProcessArgument () - Add an undocumented
parameter, -ignoreinput, to allow programmers to see how the
non-NativeGDI engines behave when they do not receive input
events.</li>

<li>win.h - Remove a duplicate declaration for winRestoreModeKeyStates
().</li>

<li>win.h - Add defines for ABS_AUTOHIDE and ABS_ALWAYSONTOP that
should be in Cygwin's w32api shellapi.h</li>

<li>winengine.c - New file.  Move winDetectSupportedEngines () and
winSetEngine () here from winscrinit.c</li>

<li>wincreatewnd.c - New file.  Move winCreateBoundingWindowFullScreen
() and winCreateBoundingWindowWindowed () here from winscrinit.c</li>

<li>wincreatewnd.c - Add a function, winAdjustForAutoHide (), to
detect the location of auto-hide Window's TaskBars then back away one
pixel from those edges of the screen to allow the TaskBars to popup
when the mouse is moved over them.</li>

<li>winkeybd.c - winKeybdReleaseModifierKeys () - Don't check which
modifier keys are down when we lose focus, just release them all; this
doesn't have any adverse effect and it makes the code simpler.</li>

<li>winkeybd.c - Add a function, winSendKeyEvent () to simplify
sending a keystroke event.</li>

<li>winscrinit.c - Move winPaintBackground () to winmisc.c</li>

<li>winwndproc.c - winWindowProc () - Remove duplicate checks for
pScreenPriv == NULL.</li>

<li>winwndproc.c - winWindowProc () - Only reload the privates
property when the window handle has changed.  I think I did this
correctly this time around.</li>

<li>winwndproc.c - winWindowProc () - WM_HOTKEY - Create an engine
specific function to handle the Alt+Tab hotkey.  Move the Primary FB
engine's functionality into that new engine specific function.  Set all
other engine's function to perform no operation.</li>

<li>winwndproc.c - winWindowProc () - Change the check on input events
from pScreenInfo->dwEngine == WIN_ENGINE_NATIVE_GDI to
pScreenInfo->fIgnoreInput.</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 51</h4>
<table>
<tbody>

<tr><td>Released: 2001-10-30 1000 EST</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-11-01 0724 EST</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>The NativeGDI engine now correctly draws the familiar X background
on startup.</li>

<li>The NativeGDI engine is now allowed to continue past the point of
drawing the X background, as a few needed spans operations are now
implemented.</li>

<li>Check out the NativeGDI engine yourself by launching 'XWin -engine
16'.  You'll see a series of message boxes telling you what operations
have been completed and /tmp/XWin.log will have over one thousand
lines describing those operations.  Note: The NativeGDI engine doesn't
do anything useful yet, other than drawing the background and a
primitive cursor.</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 50</h4>
<table>
<tbody>

<tr><td>Released: 2001-10-20 1622 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-10-22 1122 EDT</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>General - The NativeGDI engine can now create the familiar X
background pattern that is used to fill the initial X Server screen.
However, an all white pattern, instead of the correct pattern, is
being used to fill the server screen.  I can't find the mistake in
winfillsp.c, wingetsp.c, or winsetsp.c, so I'm making this release to
see if anyone can find the mistake.</li>

<li>winwndproc.c/winWindowProc () - Replace #if
!WIN_NATIVE_GDI_SUPPORT checks with checks for pScreenInfo->dwEngine
== WIN_SERVER_NATIVE_GDI.  Certain sections of winWindowProc (), such
as mouse input, cannot yet be processed by the NativeGDI engine.
Prohibiting user input causes the server startup process to be the
same every time, which makes debugging possible.</li>

<li>win.h/WIN_NATIVE_GDI_SUPPORT - Set to YES, again.  This works now
because we are no longer omitting sections of winwndproc.c (see
above).</li>

<li>win.h/DEBUG_MSG () - Make the macro accept a format string and a
variable list of data parameters in a similar manner to printf ().
DEBUG_MSG () sends a text message to the Win32 API's MessageBox ()
function.</li>

<li>winpixmap.c/winCreatePixmap () - Call
winnativegdi.c/winCreateDIBNativeGDI () for device independent bitmap
(DIB) creation.</li>

<li>winnativegdi.c/winCreateDIBNativeGDI () - Setup a simple black and
white color table for monochrome DIBs.</li>

<li>win.h - Remove duplicate #include of stdio.h</li>

<li>win.h - Move debugging message macros to after stdio.h in
included.</li>

<li>win.h/winPrivPixmapRec - Change the pixmap bits pointer from void
* to BYTE *.</li>

<li>winfillsp.c, wingetsp.c, winsetsp.c, wingc.c - Don't select the
drawable bitmap in wingc.c, rather, select and deselect the drawable
bitmap in the function that operates upon it.  A given bitmap can only
be selected into one device context (hdc) at a time; selecting bitmaps
in wingc.c/winValidateGC () could cause a bitmap to be selected into
more than one hdc at a time which would cause graphics operations to
fail.</li>

<li>winfillsp.c, winsetsp.c - Check for a failure from SelectObject ()
when selecting bitmaps into a device context; this is a sanity check
to make sure that a bitmap was deselected after a previous
operation.</li>

<li>winwndproc./winWindowProc (), winshaddd.c/winCloseScreenShadowDD
(), winshadddnl.c/winCloseScreenShadowDDNL (),
winshadgdi.c/winCloseScreenShadowGDI (),
winpfbdd.c/winCloseScreenPrimaryDD () - Remove #if 0'd code for
clipboard chain functionality that was moved to the <a
href="http://x.cygwin.com/devel/xwinclip/">xwinclip
program</a>.</li>

</ul>
</td>
</tr>
</tbody>
</table>
<h4>Release 49</h4>
<table>
<tbody>

<tr><td>Released: 2001-10-03 0056 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-10-04 1603 EDT</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Send ErrorF () output to XWin.log</li>

<li>Prevent XWin.exe from opening a DOS box on launch</li>

<li>Enable FatalError () vendor specific function, currently does
nothing</li>

<li>Cleanup winkeybd.c/winTranslateKey ().  Replace switch statement
with table lookup; table stored in new file winkeybd.h</li>

<li>Force ShadowGDI engine when Windows color depth is 8 bits and
!FullScreen</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 48</h4>
<table>
<tbody>

<tr><td>Released: 2001-09-02 1252 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Revert the default screen initialization process to pre-Release 46
functionality.  Document, with comments, what is happening so that I
don't accidentally mess it up again.</li>

<li>Remove the clipboard support introduced with Release 46, as this
functionality is now handled by <a href="../xwinclip/">xwinclip</a>.
xwinclip will contain all clipboard support until the XWin.exe headers
are rewritten to prevent collisions between the X client headers and
the X Server headers.</li>

<li>Remove the Release 47 binary from the servers to prevent people from
downloading it, as it is quite broken.</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 47</h4>
<table>
<tbody>

<tr><td>Released: 2001-08-31 0115 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: Release 46</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Fix broken argument processing in Release 46 when no -screen parameter
was passed.</li>

<li>Remove the Release 46 binary from the servers to prevent people from
downloading it, as it is quite broken.</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 46</h4>
<table>
<tbody>

<tr><td>Released: 2001-08-30 1830 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: not yet</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Open the Windows clipboard and dump new clipboard text to
XA_CUT_BUFFER0 whenever the Windows clipboard changes.  This provides
rudimentary one-way Windows to X clipboard integration.</li>

<li>Remove cruft used to call winInitializeDefaultScreens () before
our OsVendorInit () function was working properly.</li>

<li>Add xc/programs/Xserver/hw/xwin/winerror.c which contains a
function that we can use to customize the ErrorF () output.  We will
use this to redirect ErrorF () messages to a file so that we can start
XWin.exe without a console.</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 45</h4>
<table>
<tbody>

<tr><td>Released: 2001-08-28 1734 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: Prior to release</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no updates to hw/xwin, only to
miext/layer</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Transposed arguments in layer CopyClip wrapper caused Mozilla to
break.  (Keith Packard)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 44</h4>
<table>
<tbody>

<tr><td>Released: 2001-08-15 1958 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-08-16 0424 EDT</td></tr>

<tr><td>Basis: Release 43</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Bump the client connection limit from 32 to 1024 by passing the
square of getdtablesize () to setdtablesize ().</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 43</h4>
<table>
<tbody>

<tr><td>Released: 2001-08-13 1915 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-08-16 0424 EDT</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Fix, finish, and enable miext/layer support.  (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 42</h4>
<table>
<tbody>

<tr><td>Released: 2001-08-04 1347 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-08-06 0703 EDT</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Add support to handle Ctrl+Alt+Backspace as shutdown signal.
(Alexander Gottwald)
</li>

<li>Add command line options to enable/disable each of the two key
combos that cause the server to shutdown.  (Alexander Gottwald)</li>

<li>Disable the -ansi build flag.  Causes the 'hypot' function to be
correctly prototyped, fixing some crashes.  (Brian Genisio, Alan
Hourihane)</li>

<li>Fix a namespace conflict in xc/lib/font/Type1/regions.c by
renaming 'infinity' to '_infinity'.  (Alan Hourihane)</li>

</ul>
</td>
</tr>

<tr><td>Usage:</td></tr>

<tr>
<td>
<ul>

<li>-[no]winkill enables/disables the Alt+F4 server shutdown key
combo.</li>

<li>-[no]unixkill enables/disables the Ctrl+Alt+Backspace server
shutdown key combo.</li>

<li>Default behavior:
<ul>

<li>Alt+F4: enabled</li>

<li>Ctrl+Alt+Backspace: disabled</li>

</ul>
</li>

</ul>
</td>
</tr>

</tbody>
</table>


<h4>Release 41</h4>
<table>
<tbody>

<tr><td>Released: 2001-07-26 1608 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-07-31 0547</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Abstract the GDI PseudoColor handling into a set of functions for
each engine.</li>

<li>Add support for PseudoColor visuals when using DirectDraw engines
in fullscreen 8 bit color modes.  Support may never be added for using
PseudoColor visuals with DirectDraw engines in windowed mode, as the
DirectDrawPalette object has the first ten and the last ten colors
reserved in windowed mode.  Thus, adding PseudoColor support for
windowed DirectDraw modes would be rather difficult.</li>

<li>Fall back on StaticColor if running a DirectDraw engine in
windowed mode.</li>

<li>Turn off WIN_LAYER_SUPPORT for now, as it was causing the server to
crash on exit when running in 8 bit color modes.</li>

<li>Remove the WIN_PSEUDO_SUPPORT build flag; it is no longer used
because the PseudoColor support is stable.</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 40</h4>
<table>
<tbody>

<tr><td>Released: 2001-07-15 1615 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-07-25 1031 EDT</td></tr>

<tr><td>Basis: Release 39</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Remove tests for the return value of MapWindowPoints (), as a
return value of zero doesn't necessarily mean that the function
failed.  Rather, a return value of zero can simply indicate that the
from window and to window have the same upper-left hand corner.</li>

<li>Test the return value of pwinCreateBoundingWindow () in
winFinishScreenInitFB (), return FALSE if pwinCreateBoundingWindow ()
fails.</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 39</h4>
<table>
<tbody>

<tr><td>Released: 2001-07-02 0503 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-07-25 1031 EDT</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Enable OsVenderInit () in hw/xwin/InitOutput.c by fixing a type in
the DDXOSINIT flag in xc/config/cf/cygwin.cf.  There as a 'D' missing
from the flag. (Harold Hunt)</li>

<li>Add a default screen in OsVenderInit () if no screen parameters
were processed by hw/xwin/InitOutput.c/ddxProcessArgument ().  This
allows Cygwin/X to startup without any parameters, such as what
will happen if ia user runs /usr/X11R6/bin/X. (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 38</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-29 1717 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-07-02 0538 EDT</td></tr>

<tr><td>Basis: Release 37</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Pick up the value of the monitorResolution global variable that is
set by passing the '-dpi' parameter to XWin.exe. (Harold Hunt)</li>

<li>Add file winlayer.c, which provides the source code framework, and
intial implementations for RandR and miext/layer support.
Unfortunately, the layer support doesn't work correctly when it is
enabled.  The server just draws a black screen when layer support is
enabled.  I would appreciate it if someone with layer experience or
some extra time on their hands would look into finishing this. (Harold
Hunt)</li>

<li>Make PseudoColor, as opposed to StaticColor, the default visual
class when running the GDI engine at 8 bits per pixel. (Harold
Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 37</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-26 0001 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-07-02 0538 EDT</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>PseudoColor - Fixed the strange colors when redrawing portions of
the Cygwin/X window that have been covered then exposed by
another Window. (Harold Hunt)</li>

<li>Stop creating a fake PseudoColor visual in when using a TrueColor
display.  Emulating PseudoColor on TrueColor is a long standing
problem and will be handled by the RandR extension when it
stabilizes. (Harold Hunt)</li>

<li>Move the palette realization code into an engine specific
function. (Harold Hunt)</li>

<li>Move the screen redrawing code into an engine specific
function. (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 36</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-24 1656 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-07-02 0538 EDT</td></tr>

<tr><td>Basis: Release 35</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Changed the PseudoColor whitePixel location from 255 to 1, which
allows Magic 7.1 to use the default colormap, as opposed to creating
its own.  This prevents colormap changes when moving into and out of
the Magic window, which keeps the window viewable when the focus
is in another X window. (Harold Hunt)</li>

<li>Brought the experimental Native GDI support back from the dead by
setting up Pixmap privates and GC privates so that the global device
context handles could be gotten rid of.  Actually, the global handles
were long since gone, as the code that used them was #if 0'd out.  I
managed to change the drawing logic in the process, so the code now
only draws a white window, whereas before it was drawing the X hatched
background. (Harold Hunt)</li>

<li>Rewrote the winFinishScreenInitNativeGDI () procedure so that it
defers most of the default setup work to miScreenInit (). (Harold Hunt)</li>

<li>Added winnativegdi.c, which includes functions to fit the Native
GDI support into the current engine framework. (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 35</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-23 2225 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-06-25 0703 EDT</td></tr>

<tr><td>Basis: Release 34</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>PseudoColor support is now enabled, albeit with lots of
caveats. (Harold Hunt)

<ul>

<li>PseudoColor is only supported by the GDI blitter (-engine 1), so
you have to pass the '-engine 1' parameter to XWin.exe.</li>

<li>PseudoColor is only supported when Windows is running in 256 color
mode (8 bit color); the GDI engine cannot change the Windows display
depth, so you must be running Windows in 256 color mode before
starting XWin.exe.</li>

<li>There are plenty of situations that cause the colors displayed by
Cygwin/X to become garbled.</li>

<li>Release 35 has been tested only on Windows 2000.  There is no reason
why Release 35 should not run on the other versions of Windows, but I
would appreciate some quick feedback on whether Release 35 functions on
Windows 95, 98, Me, and NT 4.0 when running Windows in 256 color mode
and passing '-engine 1' to XWin.exe.</li>

</ul>
</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 34</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-21 1500 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-06-25 0703 EDT</td></tr>

<tr><td>Basis: Release 33</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Add desired display depth vs. current display depth as criteria
for whether to change the video mode when using a DirectDraw engine in
fullscreen. (Harold Hunt)</li>

<li>Add experimental support for a real PseudoColor visual.  Toggled
on and off with WIN_PSEUDO_SUPPORT in win.h. (Harold Hunt)</li>

<li>Add DirectDraw return values to error messages for failed function
calls in winshaddd.c and winshadddnl.c. (Harold Hunt)</li>

<li>The StaticColor colormap only had 20 colors when using the GDI
engine.  Create the colormap with all 256 colors in the default GDI
palette, and set the shadow DIB palette to the default GDI palette so
that all colors in the colormap display correctly.  In other words,
fix the StaticColor support when using the GDI engine. (Harold
Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 33</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-19 2255 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-06-25 0703 EDT</td></tr>

<tr><td>Basis: Release 32</td></tr>

<tr><td>Download source: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Add warning message if the requested DIB or DirectDraw surface
will be larger than 16 MB.  There is a 16 MB size limit for DIBs in
Windows 95, 98, and, presumably, Me.  For more information, see <a
href="http://msdn.microsoft.com/library/psdk/gdi/bitmaps_5d4g.htm">MSDN
Library->Platform SDK->Graphics and Multimedia Services->Windows
GDI->Bitmaps->Bitmap Reference->Bitmap
Functions->CreateDIBitmap</a>. (Harold Hunt)</li>

<li>Re-disable UseSmartScheduler, and add a note to
xc/config/cf/cygwin.cf that UseSmartScheduler has terrible performance
on Cygwin. (Harold Hunt)</li>

<li>Add processing for the '-screen' command to handle 'WxH', if it is
present.  This is in addition to the new 'W H' format. (Harold Hunt)</li>

<li>Grab a new ddraw.h header from the Wine project.  The new header
has several fixes to function parameter types, thus preventing
compilation warnings, and a few fixes to some structures that may have
been causing DirectDraw Surface creation problems. (Harold Hunt)</li>

<li>Add a check for a NULL hardware device context being returned by
BeginPaint in the winBltExposedRegions functions. (Harold Hunt)</li>

<li>Add error messages and extra sanity checks to winBltExposedRegions
functions. (Harold Hunt)</li>

<li>Remove the ShadowWindowProc functions, as the Cygwin/X
ShadowUpdateProcs do not need ShadowWindowProcs. (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 32</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-17 2256 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-06-25 0703 EDT</td></tr>

<tr><td>Basis: Release 31</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Process keyboard message repeat counts.  The repeat count is
usually 1 on fast or lightly loaded machines. (Harold Hunt)</li>

<li>Disable processing of the left and right Windows keys, as they
cause focus to be returned to Windows.  Some users were reporting that
this caused endless keypresses to show up in Cygwin/X. (Harold
Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 31</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-15 1953 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-06-25 0703 EDT</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>A set of recent releases changed the '-screen n
WIDTHxHEIGHTxDEPTH' parameter to '-screen n width height' and added
the '-depth color_bit_depth' parameter.  The '-depth color_bit_depth'
parameter is only used in fullscreen mode when using a DirectDraw
engine.  Some of that information was missing from previous change log
entries. (Harold Hunt)</li>

<li>Tell X Server to quit when Alt-F4 key combination is
pressed. (Harold Hunt)</li>

<li>Don't call IDirectDraw_SetDisplayMode if the desired mode is the
same as the current mode.  This makes fullscreen server startup and
switching back and forth between the server and Windows much
faster.  This also causes the current refresh rate to be used by
default in fullscreen mode, rather than the minimal refresh rate that
is chosen by DirectDraw when you change the display mode but do not
specify a refresh rate.  Translation: yay! (Harold Hunt)</li>

<li>Added '-refresh rate_in_Hz' command line parameter to specify a
refresh rate.  Specifying an invalid refresh rate will cause the X
Server to abort on startup. (Harold Hunt)</li>

<li>Switch from DirectDraw to DirectDraw2 to support changing the
refresh rate.  The minimum DirectDraw version required to date has
been DirectDraw3, which is not affected by this release; therefore, I
don't foresee anyone being forced to upgrade to a new version of
DirectDraw. (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 30</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-13 0027 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-06-15 0411</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Send release messages for modifier keys (Alt, Ctrl, and Shift) to
the X Server when Cygwin/X loses the Windows keyboard focus.
This fixes the keyboard problems experienced when locking an NT
workstation by pressing Ctrl-Alt-Del when Cygwin/X had the
keyboard focus. (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 29</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-07 2034 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-06-08 0408 EDT</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Be a little more clever about handling cursor hiding/unhiding when
the server has regenerated itself.  Server regeneration happens when
you log off of an XDMCP session and are subsequently presented with a
new XDMCP login screen.  This fix addresses the server error message,
"Couldn't get last screen privates". (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 28</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-06 1427 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-06-06 1406 EDT</td></tr>

<tr><td>Basis: Release 27</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Detect when the cursor has crossed into a new X screen without
causing a Windows activation event; notify the cursor handling code
that the transition has happened.  (e.g. Launch two screens, place
them side by side, then move the cursor between them; previously, the
mouse events from the second screen would cause mouse movement on the
first screen, not on the second screen.) (Harold Hunt)</li>

<li>Improve cursor hiding/unhiding when using multiple screens
(e.g. 'XWin -screen 0 640x480 -screen 1 640x480').  Cursor
hiding/unhiding with multiple screens is not perfect yet, but using
multiple screens is now much more bearable. (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 27</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-05 2009 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-06-06 1406 EDT</td></tr>

<tr><td>Basis: Release 26</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Added a debug message to display the value returned by a failed
call to IDirectDraw_SetDisplayMode ().</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 26</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-05 0723 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-06-06 1406 EDT</td></tr>

<tr><td>Basis: XFree86 CVS</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Try installing a PseudoColor visual after the real visual to see
if this helps programs that require an 8 bit PseudoColor visual.  Try
running such programs at TrueColor depths (bit depth >= 15) and at
StaticColor (bit depth == 8). (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 25</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-05 0335 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-06-05 0614 EDT</td></tr>

<tr><td>Basis: Release 24</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Added support for 8 bit display modes in both the GDI and
DirectDraw based server engines!  Currently, 8 bit mode is handled
using a StaticColor visual, which means that the values in the color
palette cannot be changed by X clients at runtime.  That should be
okay for most people, as the primary purpose of 8 bit display mode
support is to ensure that new users have a good first impression of
running Cygwin/X; it is likely that most new users will
eventually move on to higher color modes. (Harold Hunt)</li>

<li>Verify that the desired or current display depth is in the list of
supported depths when starting the server.  This is now a mostly
useless feature, due to 8 bit mode support. (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>
<h4>Release 24</h4>
<table>
<tbody>

<tr><td>Released: 2001-06-03 2030 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-06-05 0614 EDT</td></tr>

<tr><td>Basis: XFree86 4.1.0</td></tr>

<tr><td>Download binary: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Remove depth from '-screen n WxHxD' parameter, now the parameter
is '-screen n WxH'. (Harold Hunt)</li>

<li>Add optional '-depth n' parameter, only used with DirectDraw
engines in fullscreen mode. (Harold Hunt)</li>

<li>Remove unused '-linebias n' parameter. (Harold Hunt)</li>

<li>Remove unused '-blackpixel n' parameter. (Harold Hunt)</li>

<li>Remove unused '-whitepixel n' parameter. (Harold Hunt)</li>

<li>Normalize naming of a few global variables. (Harold Hunt)</li>

<li>Replace lingering fprintf ()'s with ErrorF ()'s. (Harold
Hunt)</li>

<li>Move #include of atKeynames.h from win.h to winkeybd.c (The header
is only needed in winkeybd.c). (Harold Hunt)</li>

<li>Remove BuildDPMS cruft from hw/xwin/Imakefile, as display power
management will *always* be handled by Windows, not by X. (Harold
Hunt)</li>

<li>Remove BuildDPMS cruft from Xserver/Imakefile. (Harold Hunt)</li>

<li>General cleanup and consolidation of Xserver/Imakefile #if
XWinServer section. (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 23</h4>
<table>
<tbody>

<tr><td>Released: 2001-05-07 0309 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-05-08 0415 EDT</td></tr>

<tr><td>Basis: Release 22</td></tr>

<tr><td>Download binary: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Added 3 button mouse emulation support. (Alexander Gottwald,
Harold Hunt)</li>

<li>Removed extraneous text following an #endif from winshadgdi.c
(Harold Hunt)</li>

<li>Pulled mouse button handling out of winwndproc.c, deposited said
code into winmouse.c. (Harold Hunt)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 22</h4>
<table>
<tbody>

<tr><td>Released: 2001-05-01 1908 EDT</td></tr>

<tr><td>Committed to XFree86 CVS: 2001-05-01 2046 EDT</td></tr>

<tr><td>Basis: Release 21</td></tr>

<tr><td>Download binary: no longer distributed</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Pulled AltGr handling out of winwakeup.c/winWakeupHandler (),
deposited said code into winkeybd.c/winIsFakeCtrl_L (); this function
is now called from winwndproc.c/winWindowProc ().  Thanks to Alexander
Gottwald for showing me the GetMessageTime () function in his 3 button
emulation patches; I did not know about this function
previously. (Harold Hunt)</li>

<li>Some calls to ReleaseDC () had the hdc parameter in the wrong
position; thus, an hdc was being leaked. (Alan Hourihane, Harold
Hunt)</li>

<li>Fixed warnings on some calls to DirectDrawCreate () and
IDirectDraw_CreateSurface (). (Alan Hourihane, Harold Hunt)</li>

<li>Pulled engine specific WM_ACTIVATEAPP handling out of
winwndproc.c/winWindowProc ().  Created a new engine dependent
function to handle application activation/deactivation. (Harold
Hunt)</li>

<li>Fixed some coding and commenting style inconsistencies. (Harold
Hunt)</li>

<li>Fix Xrender extension by adding a call to miSetPixmapDepths () in
winscrinit.c/winFinishScreenInitFB (). (Alan Hourihane)</li>

</ul>
</td>
</tr>
</tbody>
</table>




<h4>Release 21</h4>
<table>
<tbody>

<tr><td>Released: 2001-04-22 1438</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Fixed AltGr handling by discarding Ctrl_L presses/releases with
the same timestamp as an immediately following AltGr press/release.
(Alexander Gottwald, Harold L Hunt II)</li>

<li>Fake Ctrl_L discarding should now work on both Windows NT/2000 and
Windows 95/98/Me.  (Alexander Gottwald, Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 20</h4>
<table>
<tbody>

<tr><td>Released: 2001-04-22 1325</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Fixed AltGr handling by discarding Ctrl_L presses/releases with
the same timestamp as an immediately following AltGr press/release.
(Alexander Gottwald, Harold L Hunt II)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 19</h4>
<table>
<tbody>

<tr><td>Released: 2001-04-20 1648</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li><p>Fixed 24 bpp color.  (Harold L Hunt II)</p>

<p>I was able to fix 24 bpp color because I finally switched my monitor to use
my built in graphics card which supports 24 bpp.</p>

<p>There were only two things preventing 24 bpp color from
working:</p>

<ul>
<li>hw/xwin/InitOutput.c/g_PixmapFormats had the wrong bitsPerPixel, 32, for
24 bit depth pixmaps.  The correct bitsPerPixel for 24 bit depth pixmaps is
32.</li>
<li>hw/xwin/winshadgdi.c/winQueryRGBBitsAndMasks() cannot detect the color
masks for 24 bpp; however, the color masks for 24 bpp are standardized, so I
hard coded them.</li>
</ul>
</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 18</h4>
<table>
<tbody>

<tr><td>Released: 2001-04-12 1508</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Fixed a file descriptor leak when the server was respawned, as
when you log out of an xdmcp session; the /dev/windows file was being
opened in each call to hw/xwin/InitInput.c/InitInput (), when it
should only be opened on the very first call to InitInput ().</li>

<li>Added a patch to cygwin.cf to cause imake to handle binmode and
textmode mounts automagically.</li>

<li>Applied Suhaib's patch to cygwin.rules.</li>

<li>Cleaned up some cruft from winwakeup.c and winblock.c.</li>

<li>Fixed dual declarations of g_winGeneration and
g_winScreenPrivateIndex.</li>

<li>Wrapped nonessential debugging messages in #if CYGDEBUG.  Turned
CYGDEBUG off by default.</li>

<li>Cleaned up color mask detection in
hw/xwin/winshadgdi.c/winInitVisualsShadowGDI ().</li>

<li>Cleaned up some cruft in win.h.</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 17</h4>
<table>
<tbody>

<tr><td>Released: 2001-04-11 1406</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Fixed client exits causing a crash; these crashes were due to
#ifdef __CYGWIN__'d code in os/connection.c, io.c, osinit.c, utils.c,
and osdep.h.  I haven't tracked down exactly which line(s) caused the
crash, as I removed them all at once and the problem went away.  The
gist of the correction is that the #ifdef __CYGWIN__'d sections of
code were the same as the #ifdef WIN32'd sections of code; we don't
use the WIN32 define, and Cygwin has all of the functions used by the
non-WIN32 sections.  Basically, we weren't using a coherent mix of
APIs.  (Harold L Hunt II)</li>

<li>Fixed, hopefully, the freeze on startup when running on Windows
Me, as well as removing the 10 millisecond wakeup from
WaitForSomething; the server now only wakes up when it has real events
pending, or when the usual timeout of around 2 minutes has
expired.  (Pierre Humblet)</li>

</ul>
</td>
</tr>
</tbody>
</table>


<h4>Release 16</h4>
<table>
<tbody>

<tr><td>Released: 2001-04-06 1824</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>ASCII scan codes are now used for key presses instead of Windows
virtual key codes.  Alexander Gottwald pointed out that I was mistaken
in my assumption that virtual key codes would make Cygwin/XFree86 more
compatible with foreign keyboards.  Quite the contrary of my
assumptions, ASCII scan codes are desired because they allow
non-U.S. keyboard users to use existing modmaps.  I believe that all
keys, excepting AltGr, should return the correct scan code.  AltGr
returns the correct scan code, I believe, but it still has a problem
with the ghost Control_L press/release.</li>

<li>Failed blits no longer result in a call to FatalError.  Failed
blits are essentially ignored.  However, Ctrl-Alt-Del handling is a
little strange, because you have to press and release the Alt key when
the server regains focus after pressing Ctrl-Alt-Del; failing to do so
will cause your mouse clicks and key presses to be ignored.</li>

<li>xc/programs/Xserver/Imakefile has been cleaned up and the
dependency warning has been fixed.</li>

<li>Keyboard related functions have been moved from InitInput.c and
winwndproc.c to a new file called winkeybd.c.</li>

<li>Mouse related funtions have been moved from InitInput.c to a new
file called winmouse.c.</li>

<li>winUpdateFBPointer has been moved from winwndproc.c to
winmisc.c.</li>

<li>winkeymap.h has been removed.  XFree86's standard key map header
and AT key names header are used in its place; those headers are
xf86Keymap.h and atKeynames.h, both located in
xc/programs/Xserver/hw/xfree86/common/.</li>

<li>Several definitions in win.h that mirrored defintions in
xf86Keymap.h and atKeynames.h have been removed.</li>

<li>Removed lots of #if 0'd code.</li>

<li>Got the winScreenInit/winFinishScreenInit division of labor
working.</li>

<li>Removed some debugging messages, placed them within if
(failed)... blocks.</li>

<li>Engine 8 (Primary framebuffer DirectDraw) has gone undocumented.
It is still there, but it is no longer reported in the usage message.
From here on I won't be supporting engine 8, nor will I be
expecting/handling bug reports for it.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 15</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-30 1037</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Test 14 clobbered 32 bits per pixel support; that has been
fixed.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 14</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-29 1425</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Mode key states are initialized to their current state upon server
startup (NumLock, CapsLock, etc).</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 13</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-29 1349</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>The bitmask for detecting right and left modifier keys was
incorrect.</li>

<li>Right and left modifier key detection was reversed, had the mask
been correct.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 12</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-28 2040</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>A great developer (John Fortin) once told me that the
DDLOCK_NOSYSLOCK flag for IDirectDrawSurface_Lock was not introduced
until DirectDraw4, which is not available for Windows NT 4.0.
Including that flag causes the surface lock to fail on NT 4.0.  I
removed the flag from all calls to IDirectDrawSurface_Lock.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 11</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-28 1943</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Keyboard input distinquishes between right and left Shift,
Control, and Alt keys.</li>

<li>Added key maps for Help, Select, Clear, and language mode
switches.  The language mode key codes are probably incorrect, but
having them at least cause an input event will allow people to map
them to the correct symbol for their language.</li>

<li>Numeric keypad Enter causes an XK_KP_Enter instead of
XK_Return.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 10</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-26 1206</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Restart messages, such as the one sent by the "Close Connection"
button when using xdcmp, caused the server to crash, as I was not
completely closing the screen resources.  This has no been fixed.  You
can send restart messages, till your heart is content, and the Test 10
server will cheerily process them and give you a fresh server every
time.  I hope :)</li>

<li>Neat new feature, as a consequence of 1: you can now run multiple
screens in one server, for example:

start XWin -screen 0 1024x768x16 -screen 1 800x600x16
start rxvt -display 127.0.0.1:0.0 -fn "Lucidia Console-12"
start rxvt -display 127.0.0.1:0.1 -fn "Lucidia Console-12"
start twm -display 127.0.0.1:0.0
start twm -display 127.0.0.1:0.1

Caveats:
Don't try throwing in any -fullscreen parameters.
There is some strange mouse behavior that I'm working on.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 9</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-26 0047</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Test 9 is the same as Test 8 except that is compiled using the
XFree86 4.0.3 source code.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 8</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-25 2043</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Server engine codes changed:
<ul>
<li>Shadow GDI DIB is "-engine 1"</li>
<li>Shadow DD is "-engine 2"</li>
<li>Shadow DD Non Locking is "-engine 4"</li>
<li>Primary DD is "-engine 8"</li>
</ul>
</li>

<li>Added code to detect supported server engines.</li>

<li>Added code to automatically choose the optimum supported engine.
You no longer have to specify a "-engine n" parameter.  However, you
can suggest that the server use a particular engine with an "-engine
n" parameter.</li>

<li>Made a quick fix to handle the incorrect depth being passed when
running the engines in windowed mode.</li>

<li>Updated the "XWin -help" message with the new engine codes.</li>

<li>Rearranged the internal server structure to new engines to be
added more easily, as well as making the current code easier to read
and maintain.</li>

<li>Test 8 is built against XFree86 4.0.2, as the previous tests in
this series.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 7</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-25 0322</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>The server is comprised of four "engines" specifiable on the
command line:
<ul>
<li>A GDI based shadow framebuffer server "-engine 1"</li>

<li>A DirectDraw3 based shadow framebuffer server "-engine 2"</li>

<li>A DirectDraw4 based shadow framebuffer server "-engine 3" This
server is special becuase it doesn't have to lock and unlock the
shadow framebuffer for blitting.  This server seems to have the
highest performance.</li>

<li>A DirectDraw3 based primary framebuffer server "-engine 4" Engine
4 has the worst performance and is not as complete as the other
servers, and it probably never will be complete, as the performance
doesn't warrant the effort.</li>
</ul>
</li>

<li>Each server can be run in two modes:
<ul>
<li>Standard windowed mode, this is the default</li>

<li>Full screen mode, accessible via the "-fullscreen" parameter</li>
</ul>
</li>

<li>All engines, except engine 4, clip their output to their display
window.</li>

<li>All engines, except engine 4, redraw areas of their display window
that has been covered and reexposed by another application's
window.</li>

<li>All engines should automatically detect the color masks</li>

<li>Engines 2, 3, and 4 change the video mode to the mode specified on
the command line.  However, these engines do not currently verify that
the mode is valid, nor do they fallback on another mode, they simple
exit if the mode cannot be set.</li>

<li>Engines 1, 2, and 3 can be minimized and moved all over the screen
without crashing.</li>

<li>A bug was fixed in the window repainting code that caused an
infinite loop.  I lost track of whether I ever released a version that
contained that bug; but it is fixed now, so who cares? :)</li>

<li>All engines allow you to specify modes that will hang your
computer.  I'm not kidding... be careful what engine and mode you
specify.</li>

<li>Engine 4 will freeze Window 95/98/Me in its tracks, don't try to
run it on those versions of Windows.  Besides, engines 1, 2, and 3 are
much faster than engine 4, so you have no reason to try running engine
4.</li>

<li>Engine 3 only works when you have DirectX 6+ installed.</li>

<li>Mouse wheel support, just in case you missed the last couple of
announcements :)</li>

</ul>

<p>Thanks to John Fortin for pointing me in the direction of a client
memory DirectDraw shadow surface, which allowed the non locking server
to be created; also thanks for the example code.</p>

<p>As a side note, the Shadow Framebuffer Test name is now a misnomer,
as the server includes an engine that writes directly to the primary
framebuffer, without the need for the shadow fb code.</p>
</td>
</tr>
</tbody>
</table>



<h4>Release 6</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-23 1113</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>I think I have fixed the bitfield color mask detection.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 5</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-22 2143</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Screen bitfield formats are now automatically detected for 15, 16,
24, and 32 bits per pixel.  I'm not sure if 24 bpp or 15 bpp works
though, cause my display can only do 16 and 32 bpp; 16 and 32 bpp have
been tested on my machine.  This release has much better chances of
working on those problem machines that are out there, so please give
it a try.</li>

<li>Those of you running at 8 bits per pixel will also notice that I have
started working on supporting 8 bits.  The server will currently startup in
8 bits per pixel, but it doesn't have the correct colormap yet, so colors
are mostly black with some pink and yellow thrown in for fun :)</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 4</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-22 1425</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Crash on startup when resolution close to screen resolution.</li>

<li>Crashes when a Windows window is moved over the border of the
Cygwin/XFree86 window.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 3</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-22 0135</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>The mouse wheel was only scrolling once every other turn.  I fixed
it so that it scrolls with every turn.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 2</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-21 2250</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>Alexander Gottwald pointed me in the direction using 'xdpyinfo' to
understand the visual formats being used by the X server.  Combined
with my examination of the XonX folks code I was able to get colors
displaying correctly for some screen depths, namely 16 and 32, and
possibly 24 bits per pixel.</li>

<li>While I was fixing things I decided to throw in some dogfood:
mouse wheel scrolling now works :) Of course, mouse wheeling under X
has plenty of caveats, so don't expect all of your applications to
magically support the wheel.</li>

</ul>
</td>
</tr>
</tbody>
</table>



<h4>Release 1</h4>
<table>
<tbody>

<tr><td>Released: 2001-03-20 2126</td></tr>

<tr><td>Changes:</td></tr>

<tr>
<td>
<ul>

<li>I'm happy to announce a shadow framebuffer based test server.
This server should work on Windows 95/98/Me, as well as Windows NT 4.0
and Windows 2000.</li>

</ul>
</td>
</tr>
</tbody>
</table>
				</div>
			</td>
		</tr>

        <tr>
            <td align="right">
            <a href="http://validator.w3.org/check/referer"><img border="0"
                 src="http://x.cygwin.com/images/valid-xhtml10.png"
                 alt="Valid XHTML 1.0!"
                 height="31"
                 width="88" /></a>
                 <a href="http://jigsaw.w3.org/css-validator/check/referer/">
            <img border="0"
                 src="http://x.cygwin.com/images/vcss.png"
                 alt="Valid CSS!"
                 height="31"
                 width="88" /></a>
			</td>
        </tr>
    </table>

<!-- FOOTER MODIFIED: $Date: 2004/09/17 08:31:46 $ $Author: ago $ -->    </body>
</html>
