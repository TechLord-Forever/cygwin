2005-06-14  Simon Josefsson <simon@josefsson.org>

	* NEWS: Version 0.5.7.

2005-06-14  Simon Josefsson <simon@josefsson.org>

	* doc/Makefile.am: Fix opencdk-api.html generation.

2005-06-14  Simon Josefsson <simon@josefsson.org>

	* doc/gen-doc.sh: Make it work.

2005-06-14  Simon Josefsson <simon@josefsson.org>

	* configure.ac: EOL newline.

2005-06-14  Simon Josefsson <simon@josefsson.org>

	* configure.ac: Bump versions.

2005-06-14  Simon Josefsson <simon@josefsson.org>

	* src/opencdk.h: Remove (see opencdk.h.in).

2005-06-14  Simon Josefsson <simon@josefsson.org>

	* configure.ac: Add src/opencdk.h to CONFIG_FILES.

2005-06-14  Simon Josefsson <simon@josefsson.org>

	* src/opencdk.h.in: Add, frin opencdk.h but with version number
	replaced by @VERSION@.

2005-06-14  Simon Josefsson <simon@josefsson.org>

	* src/Makefile.am: Use new libtool age variables.

2005-06-14  Simon Josefsson <simon@josefsson.org>

	* configure.ac: Remove OPENCDK_*_VERSION.  Simplify automake init.
	Rename LT age variables.

2005-06-14  Simon Josefsson <simon@josefsson.org>

	* src/opencdk.m4: Fix under-quoted AC_DEFUN, to avoid warnings.

2005-06-13  Simon Josefsson <simon@josefsson.org>

	* Makefile.am: Add release targets.

2005-06-13  Simon Josefsson <simon@josefsson.org>

	* configure.ac: Bump version.

2005-06-13  Simon Josefsson <simon@josefsson.org>

	* NEWS: Add.

2005-06-13  Simon Josefsson <simon@josefsson.org>

	* configure.ac: Fix license.

2005-06-13  Simon Josefsson <simon@josefsson.org>

	* src/armor.c, src/cipher.c, src/cipher.h, src/compress.c,
	src/context.h, src/encrypt.c, src/filters.h, src/kbnode.c,
	src/keydb.c, src/keygen.c, src/keylist.c, src/keyserver.c,
	src/main.c, src/main.h, src/md.c, src/md.h, src/misc.c,
	src/new-packet.c, src/opencdk.h, src/packet.h, src/plaintext.c,
	src/pubkey.c, src/read-packet.c, src/seskey.c, src/sig-check.c,
	src/sign.c, src/stream.c, src/stream.h, src/sym-cipher.c,
	src/trustdb.c, src/types.h, src/verify.c, src/write-packet.c: Fix
	license, sync from gnutls.

2005-06-13  Simon Josefsson <simon@josefsson.org>

	* src/main.c: Comment out unused stuff, sync from gnutls.

2005-06-13  Simon Josefsson <simon@josefsson.org>

	* src/misc.c: Include stdlib too, sync from gnutls.

2005-03-07  Nikos Mavrogiannopoulos <nmav@gnutls.org>

	* tests/t-stream.c: commented some stuff that seemed non
	functional.

2004-10-30  Simon Josefsson <simon@josefsson.org>

	* autogen.sh: Use autoreconf.  Don't mention
	--enable-maintainer-mode.

2004-10-30  Simon Josefsson <simon@josefsson.org>

	* acinclude.m4, depcomp: Remove.

2004-10-30  Simon Josefsson <simon@josefsson.org>

	* Makefile.am: Use ACLOCAL_AMFLAGS (to find libgcrypt.m4).

2004-10-30  Simon Josefsson <simon@josefsson.org>

	* libgcrypt.m4: Fix autoconf warning.

2004-10-30  Simon Josefsson <simon@josefsson.org>

	* configure.ac: Fix AC_GNU_SOURCE call.  Use AC_CHECK_HEADERS
	instead of obsolete AC_HAVE_HEADERS.

2004-10-30  Simon Josefsson <simon@josefsson.org>

	* src/libopencdk.vers: Remove.

2004-10-30  Simon Josefsson <simon@josefsson.org>

	* configure.ac: Use AC_GNU_SOURCE instead of ad-hoc AC_DEFINE.

2004-10-30  Simon Josefsson <simon@josefsson.org>

	* configure.ac, src/Makefile.am: Replace LD version script with
	libtool -export-symbols-regex.

2004-10-30  Simon Josefsson <simon@josefsson.org>

	* configure.ac: Fix library ordering problem, reported by Yoann
	Vandoorselaere <yoann@prelude-ids.org>.

2004-08-21  Simon Josefsson <simon@josefsson.org>

	* src/armor.c:
	(armor_encode): Use PACKAGE_VERSION instead of VERSION, in Version:
	header, to make sure the package name is mentioned too.

2004-08-16  Simon Josefsson <simon@josefsson.org>

	* doc/Makefile.am, doc/gen-doc.sh: Enable building outside of
	srcdir, from Timo Schulz <twoaday@freakmail.de>.

2004-08-11  Simon Josefsson <simon@josefsson.org>

	* configure.ac: If socklen_t doesn't exist, use size_t (needed for
	Darwin).

2004-08-11  Simon Josefsson <simon@josefsson.org>

	* src/encrypt.c, src/main.c, src/misc.c: removed the malloc.h
	include.

2004-08-11  Simon Josefsson <simon@josefsson.org>

	* src/keyserver.c: Need sys/types.h, for FreeBSD 4.10.

2004-06-16  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, NEWS:

	About to release 0.5.5

2004-05-28  Timo Schulz <twoaday@gnutls.org>

	* AUTHORS, TODO, configure.ac:

	Removed 'mdlib' dir.

2004-05-27  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/main.h, src/opencdk.h, src/pubkey.c,
	src/read-packet.c, src/sig-check.c, tests/minpg.c:

	2004-05-27  Timo Schulz  <twaoaday@freakmail.de>

	    * sig-check.c (pk_check_sig): New argument to
	    figure out if it is a self sig.

	    (cdk_pk_check_sigs): New flag to find out if the
	    has valid signers.

	    * keydb.c: Changed all callers.

	    * pubkey.c (cdk_pk_get_npkey): Set algo 16 to 20
	    because libgcrypt returns '0' for algorithm 16.

2004-05-14  Timo Schulz <twoaday@gnutls.org>

	* configure.ac, libgcrypt.m4:

	Apply Nikos libgcrypt patches.

2004-02-28  Nikos Mavrogiannopoulos <nmav@gnutls.org>

	* configure.ac, src/opencdk.h: [no log message]

2004-02-27  Nikos Mavrogiannopoulos <nmav@gnutls.org>

	* configure.ac: [no log message]

2004-02-27  Nikos Mavrogiannopoulos <nmav@gnutls.org>

	* NEWS, configure.ac, libgcrypt.m4, src/Makefile.am,
	src/libopencdk.vers: added versioned symbols.

2003-12-16  Nikos Mavrogiannopoulos <nmav@gnutls.org>

	* src/opencdk.m4: corrected bug in opencdk detection script.

2003-11-21  Nikos Mavrogiannopoulos <nmav@gnutls.org>

	* src/opencdk.m4: removed broken stuff.

2003-11-13  Nikos Mavrogiannopoulos <nmav@gnutls.org>

	* src/encrypt.c, src/main.h, src/misc.c: some vasprintf fixes.

2003-11-05  Nikos Mavrogiannopoulos <nmav@gnutls.org>

	* src/verify.c: [no log message]

2003-11-05  Nikos Mavrogiannopoulos <nmav@gnutls.org>

	* NEWS, configure.ac, src/context.h, src/opencdk.h, src/types.h:
	unsigned long types were changed to unsigned int, which have the
	same size in 32 and 64 bit machines. This is a hack until a real fix
	is commited.

2003-11-03  Nikos Mavrogiannopoulos <nmav@gnutls.org>

	* configure.ac, src/misc.c: added a configure check for
	vasprintf().

2003-11-03  Nikos Mavrogiannopoulos <nmav@gnutls.org>

	* Makefile.am, NEWS, configure.ac, src/Makefile.am, src/armor.c,
	src/context.h, src/keygen.c, src/main.c, src/md.c, src/opencdk.h,
	src/pubkey.c, src/seskey.c, src/sym-cipher.c, src/types.h,
	tests/mk-minpg.sh: modified opencdk 0.5.1 for use with the new
	libgcrypt.

2003-07-06  Timo Schulz <twoaday@gnutls.org>

	* src/kbnode.c, src/keydb.c:

	        * keydb.c (keydb_find_byusage): Return the key with the newest
	        timestamp.

2003-07-06  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/compress.c, src/context.h, src/keygen.c,
	src/plaintext.c, src/stream.h:

	        * compress.c (skip_pktheader): Removed. Whenever a compressed
	        packet header appear it's a bug and we need to fix the
	        problem at the root.
	        * context.h: Use typedef's for integers.

2003-07-06  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/cipher.h, src/compress.c,
	src/context.h, src/encrypt.c, src/filters.h, src/kbnode.c,
	src/keyserver.c, src/main.c, src/main.h, src/md.c, src/md.h,
	src/new-packet.c, src/opencdk.h, src/packet.h, src/random.h,
	src/read-packet.c, src/sign.c, src/stream.c, src/trustdb.c,
	src/types.h, src/verify.c, src/write-packet.c:

	2003-07-06  Timo Schulz  <twoaday@freakmail.de>

	        * sign.c (put_hash_line): Don't write '\n' but the pre-defined
	        line ending string.
	        (file_clearsign): Simplified.

2003-07-04  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/encrypt.c, src/kbnode.c,
	src/keydb.c, src/keygen.c, src/keylist.c, src/main.c, src/md.c,
	src/misc.c, src/new-packet.c, src/opencdk.h, src/pubkey.c,
	src/read-packet.c, src/seskey.c, src/sig-check.c, src/sign.c,
	src/stream.c, src/sym-cipher.c, src/trustdb.c, src/verify.c,
	src/write-packet.c, tests/minpg.c, tests/t-stream.c:

	        * md.c: Due to the fact that all md algos use the same
	        context struct, there is no need to allocate it.
	        (cdk_md_open, cdk_md_copy): Do not return the context
	        directly.
	* cipher.c (cdk_cipher_new, cdk_cipher_open): Likewise.
	        * Indent all case statements to enhance the readability.
	        * keygen.c: Simplified context.

2003-07-01  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.h, src/keygen.c, src/keyserver.c,
	src/md.c, src/md.h, src/opencdk.h:

	2003-07-01  Timo Schulz  <twoaday@freakmail.de>

	        * keygen.c (check_pref_array): Simplified.
	        (read_mpibuf_from_sexp): Likewise. Changed all callers.
	        (pk_genkey): New.
	        (generate_subkey): Removed. Merged into cdk_keygen_start.
	        (cdk_keygen_set_keyserver_flags): With return code now.
	        * opencdk.h: Made MD library interface public.
	        Made CIPHER library interface public.

2003-06-28  Timo Schulz <twoaday@gnutls.org>

	* src/seskey.c:

	Comment out debug code.

2003-06-28  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/keydb.c, src/main.h, src/md.c, src/md.h,
	src/new-packet.c, src/pubkey.c, src/seskey.c, src/sig-check.c,
	src/sym-cipher.c:

	2003-06-28  Timo Schulz  <twoaday@freakmail.de>

	        * sig-check.c (_cdk_hash_pubkey): Remove md_putc concept
	        and use one buffer to avoid all the function calls.
	        (_cdk_hash_sig_data): Likewise.
	        * cipher.c (write_mdc_packet): use md_write, not md_putc
	        to spare one function call.
	        * keydb.c (cdk_keydb_idx_rebuild): Set handle to null
	        after it was closed.
	        * sym-cipher.c (cdk_cipher_get_algo_keylen): TWOFISH
	        hash 256-bit not 128-bit.

2003-06-26  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/context.h, src/encrypt.c, src/keydb.c,
	src/keylist.c, src/main.h, src/misc.c, src/new-packet.c,
	src/opencdk.h, src/packet.h, src/sign.c, src/stream.c,
	src/verify.c, src/write-packet.c:

	2003-06-26  Timo Schulz  <twoaday@freakmail.de>

	        * opencdk.h (cdk_pkt_user_id_t): Removed 'created' because
	        it was never used. Add self signature packet.
	        * new-packet.c (_cdk_copy_signature): Corrected code.
	        (_cdk_copy_userid): Copy also the signature.
	        * keydb.c (find_selfsig_node): New.
	        (_cdk_keydb_get_sk_byusage): Copy selfsig to user-id.
	        (_cdk_keydb_get_pk_byusage): Likewise.
	        * sign.c (_cdk_sig_create): Add an "preferred keyserver"
	        packet if the user-id contains a self signature and the
	        sub packet is part of the hashed subpacket area.
	        * write-packet.c (write_secret_key): Fixed size calculation.
	        Considered as harmful, next release will be scheduled!

2003-06-25  Timo Schulz <twoaday@gnutls.org>

	* src/keygen.c, src/keyserver.c, src/read-packet.c, src/sign.c,
	src/stream.h:

	2003-06-25  Timo Schulz  <twoaday@freakmail.de>

	        * keygen.c (sig_subkey_create): set sub packet key flags
	        if needed.
	        (correct_subkey_algo): Correct obsolete algorithms and
	        return key flags instead.
	        * sign.c (_cdk_sig_complete): Use a pointer to the digest
	        instead an hardcoded buffer.

2003-06-25  Timo Schulz <twoaday@gnutls.org>

	* Makefile.am:

	Remove mpilib from the directory list.

2003-06-25  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/cipher.c, src/cipher.h, src/compress.c,
	src/context.h, src/encrypt.c, src/filters.h, src/keydb.c,
	src/keylist.c, src/main.c, src/main.h, src/md.c, src/md.h,
	src/opencdk.h, src/pubkey.c, src/random.h, src/seskey.c,
	src/sig-check.c, src/sign.c, src/stream.c, src/types.h,
	src/verify.c, src/write-packet.c, tests/minpg.c, tests/t-stream.c,
	Makefile.am, NEWS, configure.ac:

	2003-06-24  Timo Schulz  <twoaday@freakmail.de>

	        * keydb.c (_cdk_keydb_get_sk_byusage): Copy the user-id to the
	        secret key struct to allow to use the
	        CDK_SIGSUBPKT_SIGNERS_UID.
	(_cdk_keydb_check_userid): Check if the given user-id really
	        belongs to the keyid specified by @keyid. Thanks to David
	        who reminded me of this possible security risk.
	        (cdk_keydb_import): skip non-exportable signatures.
	        * sign.c (_cdk_sig_create): If pk->uid is set, add the
	        described signature subpacket above.
	        * encrypt.c (store_verify_result): Try to extract the
	        signers user-id from the signature subpackets.
	        (cdk_stream_encrypt): Enable blockmode if requested.
	        (sym_stream_encrypt): Likewise.
	        * cipher.c (write_partial_block): Finished the code, but it
	        needs testings.
	        (write_header): Corrected calculation for the blockmode.

2003-06-21  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/opencdk.h, tests/minpg.c,
	tests/sec-with-pwd.gpg, tests/t-stream.c, Makefile.am, NEWS,
	README, TODO, configure.ac:

	2003-06-21  Timo Schulz  <twoaday@freakmail.de>

	        * Released 0.5.1.

2003-06-21  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/encrypt.c, src/kbnode.c, src/keydb.c,
	src/keygen.c, src/keylist.c, src/keyserver.c, src/main.h, src/md.c,
	src/new-packet.c, src/opencdk.h, src/packet.h, src/pubkey.c,
	src/read-packet.c, src/seskey.c, src/sig-check.c, src/sign.c,
	src/stream.c, src/sym-cipher.c, src/types.h, src/verify.c,
	src/write-packet.c:

	        * write-packet.c (write_secret_key): Support for the very
	        old v2 keys which are similar to v3 keys in all respects.
	        Do not try to calculate the mpi size when it is a encrypted
	        v4 key. Likewise with the 20 extra bytes for the SHA-1
	        checksum.
	(write_public_key): Likewise.

2003-06-21  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/compress.c, src/context.h,
	src/encrypt.c, src/filters.h, src/kbnode.c, src/keydb.c,
	src/keygen.c, src/keylist.c, src/main.c, src/main.h, src/md.c,
	src/new-packet.c, src/opencdk.h, src/packet.h, src/plaintext.c,
	src/pubkey.c, src/read-packet.c, src/seskey.c, src/sig-check.c,
	src/sign.c, src/stream.c, src/stream.h, src/trustdb.c,
	src/write-packet.c:

	2003-06-21  Timo Schulz  <twoaday@freakmail.de>

	        * new-packet.c (cdk_prefs_get_array): Renamed to..
	        (cdk_userid_get_pref_array): this.
	        * read-packet.c (check_s2k_mode): New macro.
	        * opencdk.h: Add enums for the S2K modes.

2003-06-19  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, NEWS, README, configure.ac:

	2003-06-19  Timo Schulz  <twoaday@freakmail.de>

	        * pubkey.c: Changed API to the internal crypto lib.
	        * cipher.c (cdk_cipher_test_algo): It is used all over
	        the place and not _cdk_cipher_test_algo any longer.
	        * sym-cipher.c, cipher.h: New.

2003-06-19  Timo Schulz <twoaday@gnutls.org>

	* tests/t-stream.c:

	2003-06-19  Timo Schulz  <twoaday@freakmail.de>

	        * pubkey.c: Changed API to the internal crypto lib.
	        * cipher.c (cdk_cipher_test_algo): It is used all over
	        the place and not _cdk_cipher_test_algo any longer.
	        * sym-cipher.c, cipher.h: New.

2003-06-19  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/cipher.c, src/cipher.h, src/context.h,
	src/filters.h, src/keydb.c, src/keygen.c, src/keylist.c,
	src/main.c, src/opencdk.h, src/pubkey.c, src/read-packet.c,
	src/seskey.c, src/sym-cipher.c:

	2003-06-19  Timo Schulz  <twoaday@freakmail.de>

	        * pubkey.c: Changed API to the internal crypto lib.
	        * cipher.c (cdk_cipher_test_algo): It is used all over
	        the place and not _cdk_cipher_test_algo any longer.
	        * sym-cipher.c, cipher.h: New.

2003-06-17  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/kbnode.c, src/keydb.c, src/keylist.c,
	src/keyserver.c, src/opencdk.h, src/seskey.c, src/sign.c,
	src/trustdb.c, src/verify.c:

	2003-06-17  Timo Schulz  <twoaday@freakmail.de>

	        * keydb.c (keydb_idx_build): Simplified a little.
	        (cdk_keydb_open): Rewind the stream for all search modes
	        except _NEXT.
	        (classify_data): Be more liberal with the 0x prefix.

2003-06-15  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/keydb.c:

	Forgot to add some actual code...

2003-06-15  Timo Schulz <twoaday@gnutls.org>

	* NEWS:

	Updated.

2003-06-15  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/keydb.c, src/opencdk.h, tests/minpg.c,
	tests/t-stream.c:

	2003-06-15  Timo Schulz  <twoaday@freakmail.de>

	        * keydb.c (cdk_keydb_search_new): Renamed to...
	        (cdk_keydb_search_start): ..this. Now the search context
	        is internal.
	        (cdk_keydb_search_free): is not public any longer.
	        (cdk_keydb_search_auto): Merged into..
	        (cdk_keydb_search): ..this. Two new search modes
	        implemented.

2003-06-15  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/compress.c, src/context.h,
	src/encrypt.c, src/filters.h, src/kbnode.c, src/keydb.c,
	src/keygen.c, src/keylist.c, src/keyserver.c, src/main.c,
	src/main.h, src/md.c, src/md.h, src/misc.c, src/new-packet.c,
	src/opencdk.h, src/packet.h, src/plaintext.c, src/pubkey.c,
	src/read-packet.c, src/seskey.c, src/sig-check.c, src/sign.c,
	src/stream.c, src/stream.h, src/trustdb.c, src/types.h,
	src/verify.c, src/write-packet.c, tests/minpg.c, tests/t-stream.c:

	2003-06-15  Timo Schulz  <twoaday@freakmail.de>

	        * armor.c (is_compressed): Use a separate argument to
	        return the compression algo.
	        (check_armor): Likewise.
	        (cdk_armor_filter_use): Set internal stream flag if the
	        stream is compressed.
	        (cdk_file_dearmor): Simplified the code.
	        * opencdk.h (cdk_stream_fpopen): Is not public any longer.
	        * new-packet.c (cdk_revoke_key_walk): renamed to..
	        (cdk_key_desig_revoker_walk): this. Renamed the context.

	2003-06-04  Timo Schulz  <twoaday@freakmail.de>

	        * read-packet.c (cdk_pkt_parse): Renamed to...
	        (cdk_pkt_read): this.
	        * write-packet.c (cdk_pkt_build): Renamed to...
	        (cdk_pkt_write): this.
	        * new-packet.c (cdk_subpkt_set_buf): Renamed to...
	        (cdk_subpkt_init): this.
	        (cdk_subpkt_get_buf): Renamed to...
	        (cdk_subpkt_get_data): this.

2003-05-10  Timo Schulz <twoaday@gnutls.org>

	* Makefile.am, NEWS, configure.ac:

	Update autoconf entries.

2003-05-10  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/cipher.c, src/compress.c, src/encrypt.c,
	src/filters.h, src/kbnode.c, src/keydb.c, src/keygen.c,
	src/keylist.c, src/main.c, src/main.h, src/md.c, src/md.h,
	src/misc.c, src/new-packet.c, src/opencdk.h, src/plaintext.c,
	src/pubkey.c, src/read-packet.c, src/seskey.c, src/sig-check.c,
	src/sign.c, src/stream.c, src/trustdb.c, src/verify.c,
	src/write-packet.c:

	Add message digest minilib.

2003-04-04  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/encrypt.c, src/kbnode.c, src/keygen.c,
	src/keylist.c, src/keyserver.c, src/new-packet.c, src/opencdk.h,
	src/plaintext.c, src/sig-check.c, src/sign.c, src/write-packet.c,
	tests/minpg.c, NEWS, configure.ac:

	2003-04-04  Timo Schulz  <twoaday@freakmail.de>

	        * write-packet.c (write_symkey_enc): Check version of the packet.
	        (write_pubkey_enc): Likewise.
	        (write_head_old): Check return values.
	        (calc_s2k_size): Corrected S2K for mode 1.
	        * keylist.c (cdk_pklist_encrypt): Initialize packet version
	        with 3.

2003-03-25  Timo Schulz <twoaday@gnutls.org>

	* src/new-packet.c:

	Fix memory leak.

2003-03-25  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/keydb.c, src/keygen.c, src/misc.c,
	src/new-packet.c, src/opencdk.h, src/pubkey.c, src/read-packet.c,
	src/sig-check.c, tests/Makefile.am, tests/minpg.c, NEWS,
	configure.ac:

	2003-03-25  Timo Schulz  <twoaday@freakmail.de>

	        * Released 0.5.0.

2003-03-16  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/compress.c, src/context.h,
	src/encrypt.c, src/filters.h, src/keydb.c, src/keygen.c,
	src/main.c, src/main.h, src/opencdk.h, src/packet.h, src/seskey.c,
	src/stream.c, src/stream.h, src/verify.c, tests/minpg.c,
	Makefile.am, NEWS, README, TODO, configure.ac:

	Prepare a release.

2003-03-15  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/cipher.c, src/keydb.c, src/keylist.c,
	src/main.h, src/opencdk.h, src/sig-check.c, src/verify.c,
	tests/Makefile.am, tests/minpg.c:

	2003-03-15  Timo Schulz  <twoaday@freakmail.de>

	        * cipher.c (read_header): Check return values for decryption.
	        (write_header): Likewise.
	        * keydb.c (cdk_keydb_pk_cache_sigs): New. Walk over all
	        signatures and check them. The result is stored in the sig
	        cache.
	(keydb_parse_allsigs): Add a key database handle so we can
	        really check the signatures (if requested).

2003-03-13  Timo Schulz <twoaday@gnutls.org>

	* src/kbnode.c, src/keydb.c, src/keygen.c, src/main.c, src/main.h,
	src/misc.c, src/new-packet.c, src/opencdk.h, src/packet.h,
	src/plaintext.c, src/pubkey.c, src/read-packet.c, src/seskey.c,
	src/sign.c, src/stream.c, src/write-packet.c, tests/minpg.c, NEWS:

	2003-03-13  Timo Schulz  <twoaday@freakmail.de>

	        * opencdk.h: Make sig sub packet constants public.
	        * kbnode.c (cdk_kbnode_hash): High-level API to perform hash
	        operations on key nodes.

2003-03-05  Timo Schulz <twoaday@gnutls.org>

	* NEWS, TODO, configure.ac:

	Bump version to 0.5.0-cvs.

2003-03-05  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, tests/minpg.c:

	Bump version to 0.5.0-cvs

2003-03-05  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/kbnode.c, src/keydb.c, src/opencdk.h:

	2003-03-06  Timo Schulz  <twoaday@freakmail.de>

	        * keydb.c (cdk_listkey_start): New.
	        (cdk_listkey_close): New.
	        (cdk_listkey_next): New.
	        * kbnode.c (cdk_kbnode_get_attr): New.
	        * opencdk.h: Context for listing keys.
	        Add fingerprint to the public key context.

2003-02-10  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/cipher.c, src/context.h, src/new-packet.c,
	src/opencdk.h, src/packet.h, src/pubkey.c, src/sign.c,
	src/stream.h, tests/minpg.c, NEWS, THANKS, configure.ac:

	2003-02-10  Timo Schulz  <twoaday@freakmail.de>

	        * Released 0.4.5.

2003-02-08  Timo Schulz <twoaday@gnutls.org>

	* NEWS, TODO, configure.ac:

	2003-02-08  Timo Schulz  <twoaday@freakmail.de>

	        * Released 0.4.4.

2003-02-08  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/context.h, src/encrypt.c, src/keydb.c,
	src/keygen.c, src/main.c, src/opencdk.h, src/pubkey.c,
	src/read-packet.c, src/sign.c, src/stream.c, tests/t-stream.c:

	2003-02-08  Timo Schulz  <twoaday@freakmail.de>

	        * Released 0.4.4.

2003-02-05  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/encrypt.c, src/filters.h, src/main.h,
	src/plaintext.c, src/read-packet.c, src/sign.c, src/stream.c:

	2003-02-05  Timo Schulz  <twoaday@freakmail.de>

	        * cipher.c (finalize_mdc): Be paranoid and check the
	        hash algorithm and its length.
	        * read-packet.c (read_plaintext): Allow partial bodies.
	        Don't use the packet size for allocation but only the name
	        length. This bug fix prevents denial of services because
	        it's possible to allocate large memory blocks when the
	        packet is very long.
	        * verify.c: Changed all GCRY_ constants to CDK_ constants
	        whenever possible.
	        * cipher.c: Likewise.
	        * stream.c (cdk_stream_set_literal_flag): Support for
	        partial bodies.
	        * plaintext.c (plaintext_decode): Implement the partial
	        bodies here.

2003-01-31  Timo Schulz <twoaday@gnutls.org>

	* src/kbnode.c, src/keydb.c, src/keyserver.c, src/main.c,
	src/main.h, src/opencdk.h, src/plaintext.c, src/pubkey.c,
	src/sig-check.c, src/stream.c:

	2003-01-30  Timo Schulz  <twoaday@freakmail.de>

	        * keydb.c (cdk_keydb_idx_rebuild): Now it's public.
	        (cdk_keydb_search_new): Check arguments.
	        More comment header for the API docs.
	        * stream.c: Use assert() to check the context in each
	        static function.
	        * sig-check.c (check_key_signature): Renamed to...
	        (pk_check_one_sig): this.
	        * pubkey.c (_cdk_fingerprint_get): Renamed to...
	        (_cdk_pkt_get_fingerprint): this.

2003-01-25  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/context.h, src/encrypt.c, src/main.c,
	src/main.h, src/opencdk.h, src/seskey.c, src/trustdb.c,
	tests/minpg.c, Makefile.am, NEWS, configure.ac:

	2003-01-24  Timo Schulz  <twoaday@freakmail.de>

	        * Released 0.4.3.

2003-01-24  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/encrypt.c, src/keylist.c, src/main.c,
	src/main.h, src/opencdk.h, src/read-packet.c, src/seskey.c,
	src/sign.c, tests/minpg.c, tests/mk-minpg.sh:

	** prepare a new release because the control bug should be
	   considered as serious. it is no real security bug, but due to the
	   fact that weaker cipher modes are likely we should fix it. **

	2003-01-23  Timo Schulz  <twoaday@freakmail.de>

	        * sklist.c (cdk_sklist_write): If the retrieved digest algo
	        is different than the used, set the algo to the one from the
	        message digest context.
	        (cdk_sklist_write_onepass): Add parameter for the
	        digest algo. This is needed when we want to force a special
	        digest algorithm.
	        (cdk_sklist_build): Now we also need the session handle.
	        * seskey.c (_cdk_sk_unprotect_auto): Add session handle as
	        parameter.
	        (cdk_dek_extract): Likewise.
	        * encrypt.c (sym_stream_encrypt): Likewise.
	        (handle_symkey_enc): Likewise.
	        (rfc1991_get_sesskey): Likewise.
	        * read-packet.c (read_symkey_enc): Fix if the S2K mode is
	        zero.
	* main.c (cdk_handle_control): If a command uses more than one
	        argument, put the values into static vars to avoid a
	        reserved order.

2003-01-23  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/encrypt.c, src/keydb.c, src/keygen.c,
	src/keyserver.c, src/main.c, src/main.h, src/opencdk.h,
	src/pubkey.c, src/seskey.c, src/sig-check.c, src/sign.c,
	src/verify.c, tests/Makefile.am, tests/minpg.c, tests/mk-minpg.sh,
	tests/t-stream.c, NEWS, configure.ac:

	2003-01-23  Timo Schulz  <twoaday@freakmail.de>

	        * Remove all libpopt related stuff.

2003-01-16  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, src/read-packet.c, src/sign.c, tests/minpg.c,
	NEWS, configure.ac:

	2003-01-16  Timo Schulz  <twoaday@freakmail.de>

	        * Released 0.4.2.

2003-01-16  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/encrypt.c, src/keydb.c, src/misc.c,
	src/opencdk.h, src/read-packet.c, src/sign.c, src/stream.c,
	src/verify.c, tests/minpg.c, tests/t-stream.c, NEWS:

	2003-01-16  Timo Schulz  <twoaday@freakmail.de>

	        * keydb.c (keydb_parse_allsigs): Mark all subkeys as invalid
	        when the primary key has been revoked or it expired.
	        (keydb_check_key): Special handling for secret keys.
	        * opencdk.h (cdk_handle_set_armor): New. Shortcut.
	        (cdk_handle_set_compress): Likewise.
	        * verify.c (cdk_stream_verify): Filter reset.
	        (cdk_file_verify): Likewise.

2003-01-15  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/keydb.c, src/opencdk.h, src/sign.c,
	src/verify.c:

	2003-01-15  Timo Schulz  <twoaday@freakmail.de>

	        * verify.c (cdk_sig_get_info_as_xml): New.
	        * encrypt.c (cdk_data_transform): Now it supports all kind
	        of operations.

2003-01-15  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/encrypt.c, src/main.h, src/verify.c:

	2003-01-15  Timo Schulz  <twoaday@freakmail.de>

	        (_cdk_proc_packets): Dual mode. One supports the output via a
	        filename and the other via a stream handle.
	        (handle_plaintext): Support this.
	        (cdk_stream_decrypt): New.
	        (cdk_data_transform): Support for decryption.
	        * armor.c (armor_decode): Remove debug output.

2003-01-14  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/misc.c, src/opencdk.h, src/sign.c,
	src/stream.c:

	2003-01-15  Timo Schulz  <twoaday@freakmail.de>

	        * encrypt.c (cdk_data_transform): New.

2003-01-13  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/encrypt.c, src/kbnode.c, src/keylist.c,
	src/main.c, src/main.h, src/misc.c, src/opencdk.h,
	src/read-packet.c, src/sig-check.c, src/sign.c, src/stream.c,
	src/verify.c, src/write-packet.c:

	2003-01-13  Timo Schulz  <twoaday@freakmail.de>

	        * read-packet.c (read_public_key): Make sure we know the algorithm
	        to avoid problems later.
	        (read_pubkey_enc): Likewise.
	        (read_signature): Likewise.
	        (read_secret_key): Likewise.

2003-01-07  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/keylist.c, src/main.c, src/main.h,
	src/opencdk.h:

	2003-01-07  Timo Schulz  <twoaday@freakmail.de>

	        * keydb.c (_cdk_keydb_get_pk_byname,
	        (_cdk_keydb_get_sk_byname): Renamed to...
	        (_cdk_keydb_get_pk_byusage,
	        _cdk_keydb_get_sk_byusage): this.
	        (keydb_find_byusage): Check the pubkey usage in the case we
	        check a public key because req_usage was never set.
	        Make sure the key is valid and not revoked or expired.
	        * opencdk.h: Remove req_usage from the secret key context
	        because we don't need it any longer.

2003-01-07  Timo Schulz <twoaday@gnutls.org>

	* NEWS: [no log message]

2003-01-07  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/encrypt.c, src/main.c, src/opencdk.h,
	src/pubkey.c, src/seskey.c, tests/minpg.c:

	2003-01-07  Timo Schulz  <twoaday@freakmail.de>

	        * main.c (_cdk_passphrase_get): getpass uses a static buffer
	        and it's not a good idea to free it ;-). Duplicate the
	        buffer instead.
	(_cdk_passphrase_free): Always use cdk_free.
	        * encrypt.c (get_seckey): New. Implement a cache.
	        (handle_pubkey_enc): Support to cache the seckey for the
	        session.
	* pubkey.c (cdk_sk_get_keyid): Set the keyid array in the seckey
	        and not only the pubkey.

2003-01-06  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, Makefile.am, THANKS, configure.ac:

	Usual changes after a release.

2003-01-03  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/encrypt.c, src/opencdk.h, tests/minpg.c, NEWS,
	configure.ac:

	2003-01-03  Timo Schulz  <twoaday@freakmail.de>

	        * Released 0.4.1.

2003-01-03  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c:

	2003-01-03  Timo Schulz  <twoaday@freakmail.de>

	        * keydb.c (is_selfsig): New.
	        (keydb_merge_selfsig): Only parse signatures when the keyid
	        is equal to the primary keyid. This fixes the bug where some
	        keys had no preferences :-).
	        (cdk_keydb_get_keyblock): If it is the last keyblock in the
	        file, rc was -1 and this prevented the signatures were
	passed. Fixed.

2003-01-03  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/keydb.c, src/main.h, src/sig-check.c,
	src/stream.c:

	        * stream.c: Make the code more robust due to argument checks.
	        * keydb.c (cdk_keydb_import): Do not write signatures with
	        the pubkey algo 16 (ELG-E).
	        * sig-check.c (_cdk_signature_check): Renamed to..
	        (_cdk_sig_check): this.

2003-01-02  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/keygen.c, src/keylist.c, src/main.c,
	src/main.h, src/opencdk.h, src/pubkey.c, src/seskey.c,
	src/stream.c, tests/minpg.c, tests/t-stream.c:

	        * main.c (cdk_handle_control): New. This is a replacement
	        for all the cdk_handle_set_xxx and cdk_handle_get_xxx
	        functions which only use simple integers. With the
	        CDK_CTL_XXX id's you can set or get the options.
	        * opencdk.h: Include stdarg.h due to cdk_handle_control.
	        Remove libgcrypt headerfile because no outer interface need
	        it any longer.
	        Add enumerations for cipher and digest algorithms.

2003-01-02  Timo Schulz <twoaday@gnutls.org>

	* autogen.sh:

	W32 support for the autogen.sh script.

2003-01-02  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/misc.c, configure.ac:


	        * misc.c [W32] (vasprintf): New.

	After the new changes, it's possible to generate a W32 DLL in a row
	without any extra work. The condition is, that the local MingW32/CPD
	has a static lib of zlib and gcrypt.

2003-01-02  Timo Schulz <twoaday@gnutls.org>

	* src/keyserver.c, src/seskey.c, tests/minpg.c, tests/t-stream.c,
	README, configure.ac:

	2003-01-02  Timo Schulz  <twoaday@freakmail.de>

	        * configure.ac: Removed unused stuff.
	        We don't use snprintf any longer. The same with mktemp.

2003-01-02  Timo Schulz <twoaday@gnutls.org>

	* src/keygen.c, src/opencdk.h, tests/minpg.c:

	2003-01-02  Timo Schulz  <twoaday@freakmail.de>

	        * minpg.c: Small changes due to the new API.

2003-01-01  Timo Schulz <twoaday@gnutls.org>

	* tests/minpg.c:

	Update due to the modified memory API.

2003-01-01  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/context.h, src/encrypt.c, src/keygen.c,
	src/keylist.c, src/keyserver.c, src/main.c, src/new-packet.c,
	src/opencdk.h, src/pubkey.c, src/read-packet.c, src/seskey.c,
	src/sig-check.c, src/verify.c:

	2003-01-01  Timo Schulz  <twoaday@freakmail.de>

	        * encrypt.c (mpi_encode): New. Encode a series of MPI's into
	        a buffer. The PGP format is used.
	        * verify.c (cdk_sig_get_data_attr): Support for
	        CDK_ATTR_MPI.
	* main.c (cdk_salloc): Add clear flag.
	        (cdk_scalloc): Removed.
	        * sig-check.c (cdk_key_check_sigs): Renamed to..
	        (cdk_pk_check_sigs): this.

2002-12-27  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/keydb.c, src/keylist.c, src/main.h,
	src/new-packet.c, src/opencdk.h, src/verify.c:

	2002-12-27  Timo Schulz  <twoaday@freakmail.de>

	        * verify.c (cdk_file_verify): Return when the signature is
	        in cleartext and do not proc the file again.
	        * encrypt.c (_cdk_proc_signature_packets): Use a STREAM
	        handle because it's possible the signature is in normal mode
	        and we need to parse the plaintext packet then.
	        Combine _cdk_proc_signature_packets and _cdk_proc_encryption
	        into _cdk_proc_packets because they almost do the same.

2002-12-27  Timo Schulz <twoaday@gnutls.org>

	* src/compress.c, src/keylist.c, src/main.c:

	        * compress.c (decompress_data): Return EOF when fread returns
	        no more bytes.

2002-12-27  Timo Schulz <twoaday@gnutls.org>

	* src/main.c, src/misc.c, src/opencdk.h:


	        * opencdk.h: C++ support.
	        * main.c (cdk_handle_get_keydb): New.
	        * misc.c (_cdk_check_file): Corrected return values.

2002-12-27  Timo Schulz <twoaday@gnutls.org>

	* tests/minpg.c, AUTHORS, README, TODO:

	2002-12-27  Timo Schulz  <twoaday@freakmail.de>

	        * NEWS: Updated.
	        * AUTHORS: Updated.

2002-12-27  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/compress.c, src/context.h, src/encrypt.c,
	src/filters.h, src/main.c, src/main.h, src/opencdk.h, src/stream.c,
	src/verify.c, tests/minpg.c, tests/t-stream.c, NEWS:

	2002-12-27  Timo Schulz  <twoaday@freakmail.de>

	        * encrypt.c (_cdk_proc_signature_packets): Removed out arg.
	        (cdk_file_decrypt): Do not create the out stream at the
	        begin.  The main procedure will do it for us.
	        (do_proc_packets): Return a new stream handle which is the
	        output.
	* sign.c: Changed all callers for _cdk_proc_signature_packets.

2002-12-27  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/encrypt.c, src/filters.h,
	src/keydb.c, src/main.h, src/misc.c, src/opencdk.h,
	src/plaintext.c, src/pubkey.c, src/seskey.c, src/sign.c,
	src/stream.c, src/verify.c:

	2002-12-26  Timo Schulz  <twoaday@freakmail.de>

	        * sign.c (cdk_file_clearsign): renamed to...
	        (file_clearsign): make it static.
	        Don't only check for MD2 but in general if the digest algo
	        is available.
	        * keydb.c (cdk_keydb_free): Close memory leak. Relase the
	        cache.
	* cipher.c: Shorter handle names.
	        * stream.c (cdk_stream_close): Only apply the filters if
	        there was no previous error.

2002-12-26  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/context.h, src/encrypt.c,
	src/kbnode.c, src/keydb.c, src/keygen.c, src/main.h, src/opencdk.h,
	src/packet.h, src/pubkey.c, src/read-packet.c, src/sig-check.c,
	src/sign.c, src/stream.c, src/stream.h, src/verify.c,
	src/write-packet.c:

	2002-12-24  Timo Schulz  <twoaday@freakmail.de>

	        * encrypt.c (handle_signature): Check digest algo and
	        set signature flags (if possible).
	        (set_verify_result): Ditto.
	        (handle_onepass_sig): Ditto.
	        * verify.c (cdk_file_verify): Support for armored data.
	        (cdk_sig_get_ulong_attr): Support for signature flags.
	        * keydb.c (cdk_keydb_check_sk): Always use long keyid.
	        * keygen.c (pk_create): Correct expire date handling.
	        (check_pref_array): Return error for unknown pref types.
	        (sig_subkey_create): Add expire dates for subkeys.

2002-12-20  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/compress.c, src/context.h,
	src/encrypt.c, src/filters.h, src/kbnode.c, src/keydb.c,
	src/keygen.c, src/keylist.c, src/keyserver.c, src/main.c,
	src/main.h, src/misc.c, src/new-packet.c, src/opencdk.h,
	src/packet.h, src/plaintext.c, src/pubkey.c, src/read-packet.c,
	src/seskey.c, src/sig-check.c, src/sign.c, src/stream.c,
	src/stream.h, src/trustdb.c, src/types.h, src/verify.c,
	src/write-packet.c, tests/minpg.c, tests/t-stream.c, NEWS,
	README-alpha, TODO:

	2002-12-18  Timo Schulz  <twoaday@freakmail.de>

	        * pubkey.c (cipher_open): Add key and iv argument.
	        * stream.c: Replaced all fxxx functions with stream
	        functions.
	(stream_flush): New. Wrapper around fflush.
	        (cdk_stream_create): New.
	        (stream_filter_walk_read, stream_filter_walk_write): Renamed
	        to..
	(stream_filter_read, stream_filter_write): this.
	        * sesskey.c (cdk_dek_new): Remove the argument.
	        (cdk_dek_set_cipher): New.
	        (cdk_dek_set_mdc_flag): New.
	        (cdk_dek_set_key): New.
	        * encrypt.c (do_proc_packets): Care for marker packets.
	        * new-packet.c (cdk_pkt_init): New.
	        * keydb.c (cdk_keydb_check_sk): New.
	        * encrypt.c (check_pubkey_enc_list): New. Make sure we have
	        at least one secret key before we start to parse any data.

2002-12-13  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/cipher.c, src/keydb.c, src/keygen.c,
	src/keylist.c, src/new-packet.c, src/opencdk.h, src/pubkey.c,
	src/snprintf.c, src/write-packet.c, tests/minpg.c, TODO,
	configure.ac:

	2002-12-13  Timo Schulz  <twoaday@freakmail.de>

	        * write-packet.c (calc_s2k_size): Include cipher byte.
	        (write_secret_key): Write cipher byte and correct packet
	        size.  Support to encode keys with the SHA1-checksum.
	        * keygen.c (sk_protect): Implemented and renamed from...
	        (protect_sk).
	        (cdk_keygen_save): Protect both keys if requested.
	        * snprintf.c: Removed.

2002-12-09  Timo Schulz <twoaday@gnutls.org>

	* NEWS, TODO, configure.ac:

	The usual changes after a release.

2002-12-09  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/encrypt.c, src/keydb.c, src/main.h,
	src/opencdk.h, src/seskey.c, src/write-packet.c:

	2002-12-09  Timo Schulz  <twoaday@freakmail.de>

	        * encrypt.c (handle_pubkey_enc): Use cdk_keydb_get_sk
	        instead of _cdk_keydb_get_skblock.
	        * keydb.c (_cdk_keydb_get_skblock): Removed. Not used any
	        longer.
	(_cdk_keydb_get_pkblock): Ditto.
	        (_cdk_keydb_find_bykeyid): Renamed to...
	        (keydb_find_bykeyid): static.
	        * seskey.c (cdk_hash_passphrase): Renamed to...
	        (hash_passphrase): static and const for the passphrase.
	        (cdk_dek_free): New.
	        (cdk_s2k_free): New.
	        * cipher.c (write_mdc_packet): New.
	        (cipher_encode2): Renamed to...
	        (cipher_encode_file): this.
	        (cipher_decode2): Renamed to...
	        (cipher_decode_file): this.
	        (cipher_encrypt): New.
	        (write_header): Force new CTB when block mode is enabled.
	        (write_partial_block): New.
	        * write-packet.c (pkt_encode_len): If the packet len is 0,
	        we assume partial bodies are used.

2002-12-08  Timo Schulz <twoaday@gnutls.org>

	* src/filters.h, src/keydb.c, src/keyserver.c, src/opencdk.h,
	tests/minpg.c, NEWS, README, TODO, configure.ac:

	2002-12-08  Timo Schulz  <twoaday@freakmail.de>

	        * Released 0.4.0.

2002-12-07  Timo Schulz <twoaday@gnutls.org>

	* src/stream.c:

	Remove all previous changes from the CVS.

2002-12-07  Timo Schulz <twoaday@gnutls.org>

	* src/seckey.c, src/stream.c:

	Remove old file.

2002-12-07  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c:

	A bug fix for the bug fix %-).

2002-12-07  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/encrypt.c, src/filters.h, src/keydb.c,
	src/main.h, src/misc.c, src/read-packet.c, src/stream.c,
	src/stream.h:

	2002-12-07  Timo Schulz  <twoaday@freakmail.de>

	        * keydb.c (keydb_idx_build): Use _cdk_buftou32.
	        (keydb_idx_rebuild): New.
	        * cipher.c (cipher_decode2): Implemented block mode.
	        (read_header): If block mode is used, decrement packet
	        length due to the prefix data.
	        * read-packet.c (read_pkt_len): Renamed to...
	        (_cdk_pkt_read_len).
	        (read_encrypted): Do not read body but store STREAM
	        reference.  Set the blockmode when partial bodies are used.

2002-12-07  Timo Schulz <twoaday@gnutls.org>

	* README, TODO:

	2002-12-06  Timo Schulz  <twoaday@freakmail.de>

	        * README: Updated file list

2002-12-07  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/main.c, src/main.h, src/misc.c, src/opencdk.h,
	src/read-packet.c, src/verify.c, tests/minpg.c, tests/t-stream.c:

	        Removed old key db prototypes.
	        * keyid.c: Deleted.
	        * pubkey.c: Merged with keyid.c contents.
	        * read-packet.c (read_16, read_u32): Declare as static.
	        (skip_packet): Speed up code.
	        * verify.c (cdk_file_verify): Ability to handle cleartext
	        signatures.
	        (cdk_file_verify_clearsign): Removed.
	        * main.c (cdk_set_keydb): Remove the secret parameter. There
	        is an internal check to find this out.

2002-12-06  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/keyid.c, src/opencdk.h, src/pubkey.c:

	        * keyid.c: Deleted.
	        * pubkey.c: Merged with keyid.c contents.

2002-12-06  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h:

	2002-12-06  Timo Schulz  <twoaday@freakmail.de>

	        * opencdk.h: Defined old key db types for compat reasons.

2002-12-05  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/keydb.c, src/keylist.c, src/main.c,
	src/opencdk.h, src/sig-check.c, src/sign.c, tests/minpg.c:

	        * keylist.c: Add some argument checks and sanity checks all
	        over the place.
	        * encrypt.c (handle_signature): Use public db handle.

2002-12-05  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/encrypt.c, src/keydb.c, src/keygen.c,
	src/keyid.c, src/keylist.c, src/main.c, src/main.h, src/opencdk.h,
	src/sign.c, tests/minpg.c, tests/t-stream.c, NEWS, TODO,
	configure.ac:

	        * keygen.c: Simplified context.
	        (cdk_keygen_set_expire_date): New parameter for the key
	        type.
	* keydb.c (cdk_keydb_import): Fix a problem with secret keys.

	2002-12-03  Timo Schulz  <twoaday@freakmail.de>

	        * keydb.c: Begin to make the code reentrant. This breaks a lot of
	        interface but we need this step sooner or later.
	        (cdk_keydb_export): Add handle to the parameters.
	        (_cdk_keydb_get_pk_byname): Now it is internal and with a
	        handle.
	(_cdk_keydb_get_sk_byname): Ditto.
	        For the outer interface there is cdk_keydb_get_{sk,pk}.
	        (_cdk_keydb_get_xxblock): Use a db handle.
	        (cdk_keydb_get_ctx): Removed.
	        (cdk_keydb_get_name): Removed.
	        (cdk_keydb_is_secret): Removed.
	        (cdk_keydb_find_idx): Removed.
	        (cdk_keydb_remove_resource): Removed.
	        (cdk_keydb_add_resource): Removed.
	        (cdk_keydb_new): Do not use strdup (!) or modify the
	        parameter.
	* keyserver.c (cdk_keyserver_recv_key): Fix URL parsing.
	        Kudos to Nikos who found this out.
	        * keylist.c (keylist_get_pk): Removed.

2002-12-03  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/keylist.c, src/keyserver.c, src/main.c,
	src/main.h, src/opencdk.h, src/seskey.c:

	2002-12-03  Timo Schulz  <twoaday@freakmail.de>

	        * keydb.c: Begin the code reentrant. This breaks a lot of
	        interface but we need this step sooner or later.
	        (cdk_keydb_export): Add handle to the parameters.
	        (_cdk_keydb_get_pk_byname): Now it is internal.
	        (_cdk_keydb_get_sk_byname): Ditto.
	        For the outer interface there is cdk_keydb_get_{sk,pk}.
	        * keyserver.c (cdk_keyserver_recv_key): Fix URL parsing.
	        Kudos to Nikos who found this out.

2002-12-02  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/keydb.c:

	        * keydb.c (cdk_keydb_open): Disable the index in some cases.
	        (keydb_pos_from_cache): New. Add code to use the
	        fingerprint.

2002-12-02  Timo Schulz <twoaday@gnutls.org>

	* src/kbnode.c:

	        * kbnode.c (cdk_kbnode_write_to_mem): If buffer is NULL, just
	        return the size of the kbnode.

2002-12-02  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/compress.c, src/keyserver.c, src/opencdk.h,
	tests/minpg.c:

	2002-12-02  Timo Schulz  <twoaday@freakmail.de>

	        * keyserver.c (cdk_keyserver_recv_key): Use byte * instead of
	        u32 * and add a parameter for the keyid type. Suggested by
	        Nikos to avoid problems with 64-bit systems.

2002-12-01  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/plaintext.c, src/stream.c,
	src/write-packet.c:

	        * armor.c (armor_encode): Make the code 200% faster.

2002-12-01  Timo Schulz <twoaday@gnutls.org>

	* src/snprintf.c:

	Forgot to add the file...

2002-12-01  Timo Schulz <twoaday@gnutls.org>

	* AUTHORS, NEWS, TODO, configure.ac:

	2002-12-01  Timo Schulz  <twoaday@freakmail.de>

	        * configure.ac: Check for snprintf.

2002-12-01  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/types.h, tests/minpg.c:

	        * snprintf.c: New. For systems which do not have it.

2002-12-01  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/new-packet.c:

	Do not use the cache for secret keys.

2002-12-01  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/keydb.c, src/main.c, tests/minpg.c:

	2002-12-01  Timo Schulz  <twoaday@freakmail.de>

	        * keydb.c (keydb_idx_mkname): New.
	        (keydb_idx_build): New.
	        (keydb_idx_parse): New.
	        (keydb_idx_search): New.
	        (cdk_keydb_search): When we search for the long keyid, use
	        the index table to speed up operations when it was not found
	        in the cache. This solves the performance problem when we
	        search for signature keys which are not in the keyring.

2002-11-30  Timo Schulz <twoaday@gnutls.org>

	* NEWS, TODO:

	2002-11-30  Timo Schulz  <twoaday@freakmail.de>

	        * cipher.c (read_header): Close handles in the case of an error.
	        * write-packet.c: Changed all packet size fields to size_t
	        to make sure it can carry a 32-bit length.
	        * opencdk.h: Ditto.
	        * keydb.c: Removed old offset code. Now we use a cache table
	        which stores the keyid and the offset of the key inside the
	        keyring. If a new search begins, first the cache is used.
	        When the item was found, the offset will be set. The key
	        offset will be cache at the end inside the struct (when not
	        already stored).
	        (keydb_search_copy): New.
	        (keydb_cache_free): New.
	        (keydb_cache_find): New.
	        (keydb_cache_add): New.
	        (cdk_keydb_search_reset): Clear the cache so the key search
	        will not use it.
	        (cdk_keydb_close): New.
	        * sig-check.c (check_key_signature): Do not reset the
	        handle.

2002-11-30  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/compress.c, src/context.h, src/keydb.c,
	src/opencdk.h, src/read-packet.c, src/sig-check.c, src/sign.c,
	src/stream.c, src/write-packet.c, tests/minpg.c:

	2002-11-30  Timo Schulz  <twoaday@freakmail.de>

	        * cipher.c (read_header): Close handles in the case of an error.
	        * write-packet.c: Changed all packet size fields to size_t
	        to make sure it can carry a 32-bit length.
	        * opencdk.h: Ditto.
	        * keydb.c: Removed old offset code. Now we use a cache table
	        which stores the keyid and the offset of the key inside the
	        keyring. If a new search begins, first the cache is used.
	        When the item was found, the offset will be set. The key
	        offset will be cache at the end inside the struct (when not
	        already stored).
	        (keydb_search_copy): New.
	        (keydb_cache_free): New.
	        (keydb_cache_find): New.
	        (keydb_cache_add): New.
	        (cdk_keydb_search_reset): Clear the cache so the key search
	        will not use it.
	        (cdk_keydb_close): New.
	        * sig-check.c (check_key_signature): Do not reset the
	        handle.

2002-11-29  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/compress.c, src/encrypt.c, src/main.c,
	src/stream.c, src/stream.h, tests/minpg.c:

	2002-11-28  Timo Schulz  <twoaday@freakmail.de>

	        * armor.c (is_armored): Use an integer.
	        (cdk_armor_filter_use): Modified for the new code.
	        * encrypt.c (cdk_file_decrypt): Push armor filter.
	        * stream.c (cdk_stream_flush): Only flush if the file
	        contains data.

2002-11-26  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, configure.ac:

	Usual changes after a release.

2002-11-25  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, tests/minpg.c, NEWS, configure.ac:

	Released 0.3.4

2002-11-25  Timo Schulz <twoaday@gnutls.org>

	* doc/gen-doc.sh, src/keydb.c, src/keygen.c, src/misc.c,
	src/opencdk.h, src/read-packet.c, src/write-packet.c,
	tests/minpg.c, tests/t-stream.c, NEWS, README, TODO:

	        (keydb_merge_selfsig): Parse KEY_EXPIRE and KEY_FLAGS sub packets.
	        * read-packet.c (read_public_key): Now we use 32-bit for
	        the timestamp and the expire date.
	        * write-packet.c (write_public_key): Ditto.
	        * keydb.c (keydb_parse_allsigs): Ditto.

2002-11-25  Timo Schulz <twoaday@gnutls.org>

	* src/keygen.c:

	        (sig_subkey_create): New.

2002-11-25  Timo Schulz <twoaday@gnutls.org>

	* src/keygen.c, src/new-packet.c, src/sign.c, src/trustdb.c:

	2002-11-25  Timo Schulz  <twoaday@freakmail.de>

	        * sign.c (sig_calc_subpkt_size): New.
	        (_cdk_sig_complete): Use it here.
	        * keygen.c (sig_self_create): MDC support.
	        (generate_subkey): New.
	        (gcry_mpi_to_native): Support for subkeys.

2002-11-24  Timo Schulz <twoaday@gnutls.org>

	* src/keygen.c, src/main.h, src/new-packet.c, src/opencdk.h,
	src/sig-check.c, src/sign.c:

	Some bug fixes for key generation (still unusable!)

2002-11-24  Timo Schulz <twoaday@gnutls.org>

	* src/keygen.c, src/keylist.c, src/main.h, src/pubkey.c,
	src/sign.c, src/write-packet.c:

	2002-11-24  Timo Schulz  <twoaday@freakmail.de>

	        * keygen.c: Add structures to the context.
	        (cdk_keygen_save): Don't free any packets when they are
	        still needed.
	        * write-packet.c (write_secret_key): Set correct packet size
	        ;-).

2002-11-23  Timo Schulz <twoaday@gnutls.org>

	* src/keygen.c, src/opencdk.h:

	        (cdk_keygen_set_name): New.

2002-11-23  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/keydb.c, src/keygen.c, src/keylist.c,
	src/main.h, src/new-packet.c, src/opencdk.h, src/packet.h:

	2002-11-23  Timo Schulz  <twoaday@freakmail.de>

	        * keygen.c (cdk_keygen_set_prefs): New.
	        (cdk_keygen_set_algo_info): New.
	        (cdk_keygen_set_mdc_feature): New.
	        (cdk_keygen_set_expire_date): New.
	        (cdk_keygen_start): New.
	        (cdk_keygen_save): New.
	        (cdk_keygen_new): New.
	        (cdk_keygen_free): New.

2002-11-23  Timo Schulz <twoaday@gnutls.org>

	* src/stream.c: [no log message]

2002-11-23  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/opencdk.h, src/stream.c:

	2002-11-23  Timo Schulz  <twoaday@freakmail.de>

	        * stream.c (cdk_stream_from_mem): Use void * not byte *.
	        * keydb.c (cdk_keydb_new): Ditto.
	        (classify_data): New.
	        (keyid_from_str): New.
	        (fpr_from_str): New.
	        (cdk_keydb_search_auto): Use classify to get the type to
	        search for.  Now we can figure out if it's a keyid (short?),
	        a fingerprint or a sub string.
	        (cdk_keydb_export): Use keydb_search_auto.
	        (cdk_keydb_get_xxx_byname): Ditto.

2002-11-22  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/compress.c, src/encrypt.c,
	src/keydb.c, src/main.c, src/main.h, src/misc.c, src/plaintext.c,
	src/sign.c, src/stream.c:

	        * misc.c (ascii_memistr): Renamed to...
	        (_cdk_memistr): this.
	        * Begin to write some debug code to make it easier to track
	        down segv and other problems.
	        * armor.c (_cdk_armor_get_lineend): New.
	        * sign.c (cdk_file_clearsign): Use the OS dependent line
	        endings.

2002-11-22  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c:

	fix to avoid segv.

2002-11-22  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/encrypt.c, src/opencdk.h, tests/minpg.c:

	2002-11-22  Timo Schulz  <twoaday@freakmail.de>

	        * encrypt.c (handle_encrypted): Only assume it's a RFC1991
	        packet when no session key packet was located.
	        (handle_symkey_enc): Set session key flag.
	        (handle_pubkey_enc): Ditto.
	        * cipher.c (cdk_set_progress_handler): New.

2002-11-21  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/keydb.c, src/plaintext.c, src/write-packet.c,
	tests/minpg.c, NEWS, README:

	        * write-packet.c (write_public_key): More PGP2 fixes.
	        * encrypt.c (select_cipher_algo): New. If IDEA was not
	        found, use CAST5. The result is not readable by PGP2 but we
	        can use v3 keys without any problems.

2002-11-21  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/keylist.c, src/read-packet.c, src/sign.c,
	src/write-packet.c:

	2002-11-20  Timo Schulz  <twoaday@freakmail.de>

	        * write-packet.c (pkt_write_sighead): PGP2 workaround.
	        * Finished RFC1991 encryption and signature support.

2002-11-21  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/context.h, src/encrypt.c,
	src/filters.h, src/keydb.c, src/keyid.c, src/keylist.c, src/main.c,
	src/main.h, src/misc.c, src/opencdk.h, src/plaintext.c,
	src/read-packet.c, src/seskey.c, src/sign.c, src/write-packet.c,
	tests/minpg.c:

	2002-11-20  Timo Schulz  <twoaday@freakmail.de>

	        * misc.c (buffer_to_u32): Renamed to..
	        (_cdk_buftou32): New.
	        (u32_to_buffer): Renamed to..
	        (_cdk_u32tobuf): New.
	        * encrypt.c (rfc1991_get_sesskey): New.
	        Write marker packets only when no PGP2 mode is enable.
	        * main.c (_cdk_is_idea_available): Check if IDEA is
	        available.  Normally this is not the case because Libgcrypt
	        is not delivered with any patended algorithms.
	        (cdk_handle_set_compat): Support for PGP2.
	        * write-packet.c: Support for old CTB.
	        (write_head_new): Wrapper.
	        * keylist.c (cdk_sklist_build): Set list type.

2002-11-20  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/encrypt.c, src/keyserver.c, src/main.c,
	src/main.h, src/stream.c, src/stream.h, tests/minpg.c:

	2002-11-19  Timo Schulz  <twoaday@freakmail.de>

	        * main.c (cdk_handle_set_compress): '0' disables compression.
	        (cdk_handle_set_cipher): Check if algorithm is available.
	        (cdk_handle_set_digest): Ditto.
	        * encrypt.c (free_mainproc): Free the handle itself.
	        * stream.c (_cdk_stream_get_errno): New. Set internal
	        error variable when it's not possible with the return value.

2002-11-19  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/compress.c, src/encrypt.c, src/filters.h,
	src/keyid.c, src/keylist.c, src/new-packet.c, src/plaintext.c,
	src/pubkey.c, src/read-packet.c, src/write-packet.c:

	2002-11-18  Timo Schulz  <twoaday@freakmail.de>

	        * plaintext.c: Enum type to make the code easier to read.
	        * keylist.c: Try to free all memory in the case of an error.
	        * cipher.c (cipher_decode2): Free the handles inside the
	        context.
	(cipher_encode2): Ditto.
	        (finalize_mdc): New.

2002-11-16  Timo Schulz <twoaday@gnutls.org>

	* tests/minpg.c:

	2002-11-16  Timo Schulz  <twoaday@freakmail.de>

	        * minpg.c: Create a dummy binary when popt was not found.
	        Thanks to Nikos who reminds me of it.

2002-11-16  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, NEWS, configure.ac:

	Usual changes after a release.

2002-11-16  Timo Schulz <twoaday@gnutls.org>

	* src/main.h, src/opencdk.h, NEWS, README, TODO, configure.ac:

	2002-11-16  Timo Schulz  <twoaday@freakmail.de>

	        * Released 0.3.3.

2002-11-15  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/kbnode.c, src/main.h, src/packet.h,
	src/plaintext.c, src/verify.c, tests/minpg.c:

	        * armor (update_crc): Make sure it's just 24 bit.

2002-11-15  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/encrypt.c, src/read-packet.c,
	src/write-packet.c, tests/minpg.c:

	2002-11-15  Timo Schulz  <twoaday@freakmail.de>

	        * write-packet.c (write_mpi_array): New.
	        * read-packet.c: Check minimal packet size for packets
	        where it makes sense.
	        * encrypted.c (handle_pubkey_enc): Make bits of key
	        congruent modulo 8.

2002-11-15  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/main.h, src/misc.c, src/new-packet.c,
	src/opencdk.h, src/pubkey.c, src/read-packet.c, src/stream.c,
	src/write-packet.c, tests/minpg.c:

	2002-11-14  Timo Schulz  <ts@winpt.org>

	        * main.h (wipemem): From GPG.
	        * Try to wipe out all buffers with sentensive data.
	        * misc.c (cdk_utf8_encode): New.
	        (cdk_utf8_decode): New.

2002-11-14  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/main.c, src/sign.c, tests/minpg.c:

	        * sign.c (cdk_file_sign): Avoid problems with streams.
	        (cdk_file_sign_cleartext): Ditto.

2002-11-14  Timo Schulz <twoaday@gnutls.org>

	* src/keylist.c:

	        * keylist.c (cdk_pklist_encrypt): I forgot a calloc.

2002-11-14  Timo Schulz <twoaday@gnutls.org>

	* Makefile.am, TODO, configure.ac:

	2002-11-14  Timo Schulz  <ts@winpt.org>

	        * doc/DETAILS: New.

2002-11-14  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c:

	2002-11-14  Timo Schulz  <ts@winpt.org>

	        * doc/DETAILS: New.

2002-11-14  Timo Schulz <twoaday@gnutls.org>

	* doc/DETAILS, doc/Makefile.am, src/context.h, src/encrypt.c,
	src/main.c, src/opencdk.h, src/sign.c, tests/minpg.c:

	More bug fixes and a callback function.

2002-11-14  Timo Schulz <twoaday@gnutls.org>

	* src/main.c, src/pubkey.c, src/read-packet.c:

	2002-11-14  Timo Schulz  <ts@winpt.org>

	        * read-packet.c (read_secret_key): Do not pre-alloc MPI
	        structs for encrypted v4 keys. This costs too much secmem.
	        Do it here...
	        * pubkey.c (cdk_seckey_unprotect): ...instead. And with
	        the correct size of the MPI.
	        (cdk_pk_decrypt): Check that the seckey is really
	        unprotected.
	(cdk_pk_sign): Likewise.

2002-11-13  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/main.c, tests/minpg.c:

	        * encrypt.c (handle_encrypted): Error if there is no valid DEK.
	        * main.c (cdk_salloc): Increase the size of the secmem due
	        to the possibility there are more secret keys.

2002-11-13  Timo Schulz <twoaday@gnutls.org>

	* src/keyid.c, src/main.h, src/sig-check.c:

	2002-11-14  Timo Schulz  <ts@winpt.org>

	        * sig-check.c (_cdk_hash_pubkey): Now we use two different
	        modes for v3 keys. One for the fingerprint and one for the
	        signature calculation.

2002-11-13  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/kbnode.c, src/keydb.c, src/keylist.c,
	src/main.h, src/new-packet.c, src/pubkey.c, src/read-packet.c,
	src/seskey.c, src/sign.c:

	2002-11-13  Timo Schulz  <ts@winpt.org>

	        * stream.c (stream_fp_replace): New.
	        (stream_filter_walk_write): Use it here.
	        (stream_filter_walk_read): Likewise.
	        * keyserver.c (init_sockets): For non-POSIX systems.
	        * read-packet.c (read_public_key): Corrected v3 key reading.
	        * encrypt (cdk_stream_encrypt): Adjust the key length if
	        needed.
	* pubkey.c (checksum_mpi): Forgot to check the last 2 octets.
	        * keylist.c (cdk_sklist_build): Unprotect secret keys.
	        * new-packet.c (_cdk_copy_seckey): Copy all elements.
	        * main.h: Remove unused prototypes.
	        * kbnode.c (_cdk_kbnode_clone): Modified for internal use.

2002-11-13  Timo Schulz <twoaday@gnutls.org>

	* src/compress.c, src/encrypt.c, src/keylist.c, src/keyserver.c,
	src/main.c, src/read-packet.c, src/stream.c:

	2002-11-13  Timo Schulz  <ts@winpt.org>

	        * stream.c (stream_fp_replace): New.
	        (stream_filter_walk_write): Use it here.
	        (stream_filter_walk_read): Likewise.
	        * keyserver.c (init_sockets): For non-POSIX systems.
	        * read-packet.c (read_public_key): Corrected v3 key reading.
	        * encrypt (cdk_stream_encrypt): Adjust the key length if
	        needed.

2002-11-13  Timo Schulz <twoaday@gnutls.org>

	* src/read-packet.c, src/seskey.c, src/stream.c,
	src/write-packet.c, tests/minpg.c, NEWS, README, TODO:

	Some cosmetical changes.

2002-11-13  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/keydb.c:

	        * armor.c (armor_encode): Corrected CRC calculation.

2002-11-13  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/keyserver.c, src/main.h, src/misc.c,
	src/opencdk.h, src/packet.h, src/pubkey.c, src/seskey.c:

	2002-11-13  Timo Schulz  <ts@winpt.org>

	        * keydb.c (keydb_check_key): New.
	        (keydb_find_byusage): Do not use revoked or expired keys.
	        (keydb_set_expire): Corrected.

2002-11-12  Timo Schulz <twoaday@gnutls.org>

	* src/compress.c, src/encrypt.c, tests/minpg.c:

	        * compress.c (compress_decode): Set the inbuf pointer each
	        call and not only once. This fixes a problem with larger
	        files.
	(decompress_data): Some fixes.

2002-11-12  Timo Schulz <twoaday@gnutls.org>

	* src/read-packet.c, src/stream.c:

	        * read-packet.c (read_encrypted): Corrected reading for partial
	        packet length.

2002-11-12  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/main.c, src/main.h, src/opencdk.h, src/stream.c,
	tests/minpg.c:

	2002-11-12  Timo Schulz  <ts@winpt.org>

	        * stream.c (cdk_stream_append): New.
	        * keydb.c (cdk_keydb_import): Use append to make it easier.
	        No key update is possible yet. Add a integer array as the
	        result.
	* main.c (cdk_handle_set_compat): Set some other compatibility
	        options.

2002-11-12  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/encrypt.c, src/keylist.c, src/main.c,
	src/opencdk.h, src/sign.c, src/write-packet.c, tests/minpg.c:

	        * keylist.c (cdk_sklist_write): Support for signature version.
	        * sign.c (cdk_file_sign): Ditto.
	        (cdk_file_sign_cleartext): Ditto.
	        * encrypt.c (write_marker_packet): New.
	        (sym_stream_encrypt): Write a marker packet when in compat
	        mode.
	(cdk_file_encrypt): Ditto.

2002-11-12  Timo Schulz <twoaday@gnutls.org>

	* src/keylist.c, src/keyserver.c, src/opencdk.h, src/sign.c,
	src/stream.c, src/stream.h, src/verify.c, tests/minpg.c:

	2002-11-12  Timo Schulz  <ts@winpt.org>

	        * stream.c (cdk_stream_tmp_set_mode): For the filters the object
	        needs to know if the request read or write filters. With
	        this function we can set it.
	        * keyserver.c (keyserver_handle_hkp): Use it here.
	        * verify (cdk_file_verify_cleartext): Ditto.
	        * sign (cdk_file_clearsign): Ditto.

2002-11-11  Timo Schulz <twoaday@gnutls.org>

	* src/kbnode.c, src/main.c, src/opencdk.h, tests/t-stream.c:

	2002-11-11  Timo Schulz  <ts@winpt.org>

	        * kbnode.c (cdk_kbnode_read_from_mem): New.
	        (cdk_kbnode_write_to_mem): New.

2002-11-10  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/context.h, src/encrypt.c, src/main.h,
	src/new-packet.c, src/opencdk.h, src/pubkey.c, src/read-packet.c,
	src/seskey.c, src/sign.c, src/write-packet.c, tests/minpg.c, NEWS,
	README-alpha, TODO, configure.ac:

	2002-11-12  Timo Schulz  <ts@winpt.org>

	        * new-packet.c (free_symkey_enc): Free the S2K struct.
	        (_cdk_free_seckey): Ditto.
	        * read-packet.c (read_s2k): Alloc S2K struct.
	        * write-packet.c (write_symkey_enc): Ditto.
	        (write_secret_key): Ditto.
	        * S2K struct is now opaque.
	        * seskey.c (cdk_s2k_new): New.

2002-11-10  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/encrypt.c, src/keyserver.c, src/main.c,
	src/main.h, src/opencdk.h, src/sign.c, src/stream.c:

	2002-11-10  Timo Schulz  <ts@winpt.org>

	        * encrypt.c (cdk_file_encrypt): Use armor if requested.
	        * sign.c (cdk_file_sign): Ditto for the encrypt & sign mode.
	        (clearsign_filter): Removed. Now the STREAMS support
	        encoding for read and write (temp) modes.
	        * Check for header files when the target platform is not
	        Posix.
	* stream.c (cdk_stream_flush): Premature filter flushing.

2002-11-10  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, src/sign.c, tests/minpg.c:

	2002-11-10  Timo Schulz  <ts@winpt.org>

	        * sign.c (cdk_file_sign_encrypt): Removed.
	        (write_pubkey_enc_list): New.
	        (cdk_file_sign): Merge encryption here.
	        Check for invalid combinations.
	        * opencdk.h (cdk_file_sign_encrypt): Bye bye.
	        Now the file signinginterface is complete but incompatible
	        to other versions :-(.

2002-11-10  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/keylist.c, src/main.h, src/misc.c,
	src/opencdk.h, src/plaintext.c, src/read-packet.c, src/sig-check.c,
	src/sign.c, src/write-packet.c, tests/minpg.c:

	2002-11-10  Timo Schulz  <ts@winpt.org>

	        * misc.c (_cdk_timestamp): Renamed from make_timestamp.
	        * opencdk.h (cdk_file_sign): New.
	        (cdk_file_encrypt_sign): New.
	        * keydb.c (cdk_keydb_get_sk_byname): Find a secret keyring,
	        not a public keyring.
	        * sign.c (cdk_file_sign): Fixed the index for the opaque
	        value.
	* write-packet (write_onepass_sig): Fixed base size 15 -> 13.

2002-11-09  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/encrypt.c, src/main.c, src/opencdk.h, NEWS,
	configure.ac:

	2002-11-09  Timo Schulz  <ts@winpt.org>

	        * encrypt.c (cdk_stream_encrypt): New.
	        (cdk_file_decrypt): Remove unused var.

	2002-11-08  Timo Schulz  <ts@winpt.org>

	        * encrypt.c (cdk_stream_encrypt): New.
	        (cdk_file_encrypt): Use the new code.
	        (sym_stream_encrypt): New.

2002-11-07  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/keyserver.c, src/opencdk.h, src/pubkey.c,
	NEWS, configure.ac:

	2002-11-07  Timo Schulz  <ts@winpt.org>

	        * Released 0.3.2

2002-11-06  Timo Schulz <twoaday@gnutls.org>

	* tests/Makefile.am, tests/minpg.c, NEWS, configure.ac:

	Include a check for libpopt to avoid static Makefiles.

2002-11-06  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.m4:

	Last changes for the next release.

2002-11-05  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/keyserver.c, src/opencdk.h, tests/minpg.c, TODO:

	2002-11-05  Timo Schulz  <ts@winpt.org>

	        * keydb.c (cdk_keydb_import): New.

2002-11-04  Timo Schulz <twoaday@gnutls.org>

	* NEWS:

	Updated NEWS.

2002-11-04  Timo Schulz <twoaday@gnutls.org>

	* src/keyserver.c, tests/minpg.c:

	New file.

2002-11-04  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/armor.c, src/encrypt.c, src/kbnode.c,
	src/opencdk.h, src/sign.c:

	2002-11-04  Timo Schulz  <ts@winpt.org>

	        * kbnode.c (cdk_kbnode_find_packet): Return the node that was
	        found, not the root node.

2002-11-03  Timo Schulz <twoaday@gnutls.org>

	* doc/Makefile.am, doc/gdoc, doc/gen-doc.sh, src/armor.c,
	src/filters.h, src/keydb.c, Makefile.am, NEWS, configure.ac:

	2002-11-03  Timo Schulz  <ts@winpt.org>

	        * doc/gen-doc.sh: New.

2002-11-03  Timo Schulz <twoaday@gnutls.org>

	* NEWS, configure.ac:

	Modified NEWS file.

2002-11-03  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/opencdk.h, src/read-packet.c,
	src/write-packet.c:

	2002-11-03  Timo Schulz  <ts@winpt.org>

	        * write-packet.c (write_public_key): Flag if we have a subkey.
	        * read-packet.c (read_signature): Set the exportable flag
	        independent of the signature version. And correct return
	        code checking.

2002-11-02  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/filters.h, src/opencdk.h, src/plaintext.c,
	src/stream.c, src/stream.h, tests/t-stream.c, NEWS, configure.ac:

	2002-11-02  Timo Schulz  <ts@winpt.org>

	        * Released 0.3.1.

2002-11-02  Timo Schulz <twoaday@gnutls.org>

	* src/sign.c, NEWS, README, TODO:

	Updated the TODO file...

2002-11-02  Timo Schulz <twoaday@gnutls.org>

	* src/main.c, src/sig-check.c, src/stream.c, src/verify.c,
	tests/t-stream.c:

	Finished the update.

2002-11-02  Timo Schulz <twoaday@gnutls.org>

	* tests/t-key.c, tests/t-packet.c:

	Forgot to delete files.

2002-11-02  Timo Schulz <twoaday@gnutls.org>

	* src/filters.h, src/keydb.c, src/opencdk.h, tests/Makefile.am:

	2002-11-02  Timo Schulz  <ts@winpt.org>

	        * t-packet.c, t-key.c: Removed. The files contain too much old
	        code. As a regression test, t-stream.c is used and minpg.c
	        as a program which uses a lot of different API's for
	testing.

2002-11-02  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/compress.c, src/context.h,
	src/kbnode.c, src/keyid.c, src/misc.c, src/plaintext.c,
	src/stream.c, src/stream.h:

	More fixes.

2002-11-02  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/kbnode.c, src/keylist.c, src/main.c,
	src/main.h, src/packet.h, src/trustdb.c, src/types.h,
	tests/minpg.c:

	More updates due to the broken sandbox.

2002-11-02  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/keylist.c, src/new-packet.c, src/pubkey.c,
	src/read-packet.c, src/seskey.c, src/write-packet.c:

	2002-11-02  Timo Schulz  <ts@winpt.org>

	        * seskey.c (cdk_passphrase_to_dek): Moved from seckey.c.
	        * pubkey.c (cdk_seckey_unprotect): Moved from seckey.c
	        (checksum_mpi): Ditto.
	        * seckey.c: Deleted.

2002-11-02  Timo Schulz <twoaday@gnutls.org>

	* acconfig.h, configure.ac, configure.in:

	Updated configure stuff.

2002-11-02  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, src/pubkey.c:

	Update for the autoconf stuff.

2002-11-01  Timo Schulz <twoaday@gnutls.org>

	* src/context.h, src/keydb.c, src/new-packet.c, src/opencdk.h:

	2002-11-01  Timo Schulz  <ts@winpt.org>

	        * new-packet.c (cdk_subpkt_get_buf): New.
	        * keydb.c (cdk_keydb_search_new): New.
	        (cdk_keydb_search_free): New.
	        * opencdk.h: CDK_DBSEARCH is now opaque.

2002-11-01  Timo Schulz <twoaday@gnutls.org>

	* src/main.c, src/stream.c:

	2002-11-01  Timo Schulz  <ts@winpt.org>

	        * Begin to port OpenCDK to W32 and other systems.
	        * configure.in: Check for 'pwd.h' header and for 'mkstemp'.

2002-11-01  Timo Schulz <twoaday@gnutls.org>

	* src/compress.c:

	2002-11-01  Timo Schulz  <ts@winpt.org>

	        * write-packet.c (pkt_write_head2): New.
	        (write_compressed): Use old header.
	        * This fixed the EOF problem for the filter.

2002-11-01  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/encrypt.c, src/main.c, src/opencdk.h,
	src/stream.c, src/write-packet.c, tests/minpg.c, tests/t-stream.c:

	2002-11-01  Timo Schulz  <ts@winpt.org>

	        * write-packet.c (pkt_write_head2): New.
	        (write_compressed): Use old header.
	        * This fixed the EOF problem for the filter.

2002-10-31  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/encrypt.c, src/keydb.c, src/opencdk.h,
	src/sign.c, src/verify.c, tests/minpg.c, tests/t-stream.c:

	2002-10-31  Timo Schulz  <ts@winpt.org>

	        * verify.c (cdk_verify_cleartext): Fixed md calculation.
	        Add an output parameter to store the plaintext.
	        * opencdk.h: Use the cdk_file_xxx prefix for all file
	        functions.

2002-10-31  Timo Schulz <twoaday@gnutls.org>

	* src/stream.c, src/verify.c, tests/t-stream.c:

	2002-10-31  Timo Schulz  <ts@winpt.org>

	        * verify.c (cdk_verify_cleartext): Fixed md calculation.

2002-10-30  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/context.h, src/main.h, src/opencdk.h,
	src/packet.h, src/seskey.c:

	Separate file for contexts.h

2002-10-30  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/compress.c, src/encrypt.c,
	src/kbnode.c, src/keyid.c, src/main.h, src/opencdk.h,
	src/plaintext.c, src/read-packet.c, src/seckey.c, src/sig-check.c,
	src/sign.c, src/verify.c, tests/t-stream.c:

	2002-10-30  Timo Schulz  <ts@winpt.org>

	        * sig-check.c (hash_mpi_array): New.
	        * plaintext.c (plaintext_decode): Sanity check to avoid
	        segv.

2002-10-30  Timo Schulz <twoaday@gnutls.org>

	* src/main.h, src/sign.c, src/stream.c, src/verify.c: Bug fix for
	the cleartext signature calculation.

2002-10-29  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/keylist.c, src/main.h, src/opencdk.h,
	src/sig-check.c, src/sign.c, src/stream.c:

	2002-10-30  Timo Schulz  <ts@winpt.org>

	        * sign.c (cdk_clearsign_file): New.
	        * keylist.c (cdk_sklist_build): Replaced all calloc calls
	        with cdk_calloc. Arrg.

2002-10-29  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/main.h, src/opencdk.h, src/stream.c,
	src/verify.c, tests/t-stream.c:

	2002-10-29  Timo Schulz  <ts@winpt.org>

	        * verify.c (cdk_verify_file): New.
	        (cdk_verify_cleartext): New.
	        (cdk_sig_get_ulong_attr): Support for all algorithms.
	        * encrypt.c (proc_encryption_packets): New.
	        (proc_signature_packets): New.

2002-10-29  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/kbnode.c, src/keyid.c, src/main.c, src/main.h,
	src/opencdk.h, src/packet.h, src/plaintext.c, src/sign.c,
	src/types.h, src/verify.c, tests/minpg.c, tests/t-stream.c:

	2002-10-29  Timo Schulz  <ts@winpt.org>

	        * encrypt.c: Add a context for each file operation.
	        * main.c (cdk_handle_new): New.
	        (cdk_handle_free): New.
	        (cdk_handle_set_compress): New.
	        (cdk_handle_set_digest): New.
	        (cdk_handle_set_cipher): New.
	        * verify.c (cdk_sig_get_ulong_attr): New.
	        (cdk_sig_get_data_attr): New.
	        (_cdk_result_verify_new): New.
	        (_cdk_result_verify_free): New.

2002-10-29  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/plaintext.c, src/stream.c:

	2002-10-29  Timo Schulz  <ts@winpt.org>

	        * encrypt.c (do_proc_packets): Modified so it will not
	        depend on a fixed state. Now it's possible for decryption,
	        verifying with one pass signatures with or without
	        compression.
	(set_reset): New.

2002-10-29  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/keydb.c, src/sig-check.c, tests/t-stream.c,
	TODO, configure.in:

	Last fixes before the new 0.3.0 release.

2002-10-29  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/filters.h, src/keyid.c, src/main.h,
	src/new-packet.c, src/plaintext.c, src/read-packet.c,
	src/sig-check.c, src/stream.c, src/verify.c:

	2002-10-29  Timo Schulz  <ts@winpt.org>

	        * new-packet.c (_cdk_subpkt_hash): Now it's internal.
	        * sig-check.c (_cdk_signature_check): Prefix with _cdk_.
	        * encrypt.c (handle_onepass_sig, handle_signature): New.
	        (do_proc_packets): Divide function in stages to handle
	        nested packets.
	        * stream.c (stream_filter_walk_write): Only unlink files
	        when the temp flag is not set.

2002-10-28  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/stream.c:

	2002-10-28  Timo Schulz  <ts@winpt.org>

	        * stream.c (cdk_stream_seek): Remove EOF flag when possible.
	        * keydb.c (cdk_keydb_new): New.
	        * armor.c (cdk_armor_filter_use): Rewind the file after
	        reading the first byte.

2002-10-28  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/keydb.c, src/opencdk.h:

	Bug fix for the armor filter.

2002-10-27  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/filters.h, src/keydb.c, src/keyid.c,
	src/main.h, src/opencdk.h, src/pubkey.c, src/sign.c, src/stream.c,
	src/stream.h, src/verify.c, tests/t-stream.c:

	implemented read-only filters.

2002-10-27  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/compress.c, src/encrypt.c,
	src/kbnode.c, src/keydb.c, src/keyid.c, src/keylist.c, src/main.c,
	src/main.h, src/new-packet.c, src/opencdk.h, src/plaintext.c,
	src/read-packet.c, src/seckey.c, src/seskey.c, src/sig-check.c,
	src/stream.c, src/stream.h, src/trustdb.c, src/verify.c,
	src/write-packet.c, tests/minpg.c, tests/pub.gpg, tests/t-stream.c:

	Second stage to cleanup the interface.

2002-10-27  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/compress.c, src/encrypt.c,
	src/keydb.c, src/keyid.c, src/main.c, src/main.h, src/misc.c,
	src/new-packet.c, src/opencdk.h, src/read-packet.c, src/seckey.c,
	src/sig-check.c, src/stream.c, src/write-packet.c, tests/minpg.c,
	tests/t-stream.c:

	First stage of the interface cleanup.

2002-10-27  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/armor.c, src/cipher.c, src/compress.c,
	src/encrypt.c, src/filters.h, src/keydb.c, src/keylist.c,
	src/main.h, src/misc.c, src/plaintext.c, src/pubkey.c,
	src/read-packet.c, src/write-packet.c, tests/t-stream.c:

	More bug fixes and cosmetical changes.

2002-10-26  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/encrypt.c, src/main.c, src/opencdk.h,
	src/read-packet.c, src/seskey.c, src/stream.c,
	tests/sec-with-pwd.gpg, tests/t-stream.c:

	Fixed the MDC code in the cipher filter.

2002-10-26  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/keydb.c, src/main.h, src/new-packet.c,
	src/opencdk.h, src/packet.h, src/pubkey.c, src/read-packet.c,
	src/seckey.c, src/seskey.c, src/types.h, src/verify.c:

	Fixed the decryption code for v4(SHA1) and v3.

2002-10-26  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/main.h, src/read-packet.c, src/sig-check.c,
	src/verify.c, src/write-packet.c:

	Removed some prototypes.

2002-10-26  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/encrypt.c, src/error.c, src/keydb.c,
	src/logging.c, src/main.c, src/memory.c, src/pk.c, src/pkencrypt.c,
	src/pkverify.c, src/pubkey.c, src/seskey.c, src/verify.c:

	Bug fixes, etc...

2002-10-26  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/keyid.c, src/keylist.c, src/main.h,
	src/memory.c, src/new-packet.c, src/opencdk.h, src/packet.h,
	src/pk.c, src/pkencrypt.c, src/read-packet.c, src/seckey.c,
	src/sig-check.c, src/sign.c, src/write-packet.c, tests/minpg.c,
	tests/t-packet.c:


	* Improved sub packet code.
	* More private contexts which are opaque.
	* Bug fixes

2002-10-25  Timo Schulz <twoaday@gnutls.org>

	* src/compress.c, src/filters.h, src/keydb.c, src/keyid.c,
	src/main.h, src/opencdk.h, src/pk.c, src/pkencrypt.c,
	src/read-packet.c, src/seckey.c, src/seskey.c, src/sign.c,
	tests/minpg.c, tests/sec.gpg, tests/t-stream.c:

	More bug fixes..

2002-10-24  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/keylist.c, src/main.h, src/opencdk.h, src/pk.c,
	src/pkencrypt.c, src/read-packet.c, src/seskey.c, src/stream.c,
	src/stream.h, tests/t-stream.c:

	A lot of more fixes.

2002-10-24  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/keylist.c, src/new-packet.c, src/opencdk.h,
	src/pkencrypt.c, src/read-packet.c, src/stream.c, tests/t-stream.c:

	More bug fixes. The new code also closes some memory leaks and
	segfaults.  The armor and the plaintext filter now work in both
	direction.

2002-10-24  Timo Schulz <twoaday@gnutls.org>

	* src/kbnode.c, src/opencdk.h, src/pkencrypt.c, src/stream.c,
	src/trustdb.c, tests/minpg.c, tests/t-stream.c:

	Simplified encryption interface.

2002-10-23  Timo Schulz <twoaday@gnutls.org>

	* configure.in:

	New configure.in

2002-10-23  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/filters.h, src/keylist.c,
	src/main.h, src/opencdk.h, src/pkencrypt.c, src/seckey.c,
	src/seskey.c, src/stream.c, src/write-packet.c, tests/Makefile.am,
	tests/minpg.c, tests/t-armor.c, tests/t-cipher.c, tests/t-iobuf.c,
	tests/t-key.c, tests/t-packet.c, tests/t-stream.c:

	Replace the regression tests and more fixes.

2002-10-23  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/compress.c, src/opencdk.h, src/stream.c,
	src/stream.h:

	Removed redundant code and some bug fixes.

2002-10-23  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/compress.c, src/keydb.c, src/keylist.c,
	src/main.h, src/new-packet.c, src/opencdk.h, src/packet.h,
	src/pk.c, src/pkencrypt.c, src/pkverify.c, src/read-packet.c,
	src/sig-check.c, src/sign.c, src/stream.c, src/stream.h,
	src/trustdb.c, src/types.h, src/write-packet.c:

	A lot of bug fixes all over the place.

2002-10-23  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/armor.c, src/cipher.c, src/compress.c,
	src/error.c, src/filters.h, src/iobuf.c, src/iobuf.h, src/kbnode.c,
	src/keydb.c, src/keyid.c, src/keylist.c, src/logging.c, src/main.h,
	src/memory.c, src/misc.c, src/new-packet.c, src/opencdk.h,
	src/pk.c, src/pkencrypt.c, src/pkverify.c, src/read-packet.c,
	src/seckey.c, src/seskey.c, src/sig-check.c, src/sign.c,
	src/stream.c, src/stream.h, src/trustdb.c, src/types.h, src/utf8.c,
	src/write-packet.c:

	Rewrote some parts of the code and the interface was cleaned up.

2002-08-03  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/iobuf.c, src/kbnode.c,
	src/keydb.c, src/keyid.c, src/keylist.c, src/main.h, src/memory.c,
	src/opencdk.h, src/pk.c, src/pkencrypt.c, src/read-packet.c,
	src/seckey.c, src/sig-check.c, src/write-packet.c, tests/minpg.c,
	tests/t-cipher.c:

	A lot of more bug fixes and cleanups.

2002-08-02  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/compress.c, src/error.c,
	src/iobuf.c, src/keydb.c, src/keyid.c, src/keylist.c,
	src/opencdk.h, src/pk.c, src/pkencrypt.c, src/pkverify.c,
	src/read-packet.c, src/seckey.c, src/seskey.c, src/sig-check.c,
	src/sign.c, src/write-packet.c, tests/minpg.c, tests/t-armor.c,
	tests/t-cipher.c, tests/t-iobuf.c:

	A lot of fixes all over the place.

	And the last remaining unprefixed contexts were fixed.

2002-06-23  Timo Schulz <twoaday@gnutls.org>

	* autogen.sh:

	Used the buildconf script from gnutls.

2002-06-23  Timo Schulz <twoaday@gnutls.org>

	* tests/minpg.c:

	Added a new regression test (MinPG).

2002-06-23  Timo Schulz <twoaday@gnutls.org>

	* TODO, configure.in:

	Missing files.

2002-06-23  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/iobuf.c, src/keydb.c, src/keyid.c, src/main.h,
	src/opencdk.h, src/opencdk.m4, src/pkencrypt.c, src/read-packet.c,
	src/sig-check.c, src/write-packet.c, tests/Makefile.am,
	tests/t-cipher.c, tests/t-key.c:

	More bug fixes. Some adjustments and work arounds.

2002-06-23  Timo Schulz <twoaday@gnutls.org>

	* AUTHORS, acinclude.m4, libgcrypt.m4: [no log message]

2002-06-23  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/keydb.c, src/pkencrypt.c, src/write-packet.c,
	tests/t-key.c:

	Addes some missing files.

2002-06-23  Timo Schulz <twoaday@gnutls.org>

	* AUTHORS, configure.in:

	Missing files.

2002-06-23  Timo Schulz <twoaday@gnutls.org>

	* src/cipher.c, src/compress.c, src/kbnode.c, src/keydb.c,
	src/keyid.c, src/keylist.c, src/main.h, src/misc.c,
	src/new-packet.c, src/opencdk.h, src/pk.c, src/pkencrypt.c,
	src/pkverify.c, src/read-packet.c, src/seckey.c, src/sig-check.c,
	src/sign.c, src/trustdb.c, src/write-packet.c, tests/t-cipher.c,
	tests/t-key.c, tests/t-packet.c:

	Changed external structs.

2002-06-22  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/keylist.c, src/misc.c, src/pk.c,
	src/pkencrypt.c, src/seskey.c, src/write-packet.c,
	tests/t-cipher.c:

	More fixes..

2002-06-22  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/armor.c, src/encode-packet.c, src/iobuf.c,
	src/keydb.c, src/opencdk.h, tests/t-cipher.c, tests/t-iobuf.c,
	tests/t-packet.c:

	More fixes.

2002-06-22  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/iobuf.c, src/keylist.c,
	src/main.h, src/opencdk.h, src/pkencrypt.c, src/seskey.c,
	tests/t-armor.c, tests/t-cipher.c, tests/t-iobuf.c:

	Restructure the whole code.

2002-06-22  Timo Schulz <twoaday@gnutls.org>

	* src/iobuf.c, src/keydb.c, src/new-packet.c, src/opencdk.h,
	src/pk.c, src/read-packet.c, src/seskey.c, src/trustdb.c,
	src/write-packet.c, tests/t-key.c:

	A lot of fixes all over the place.

2002-06-17  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/iobuf.c, src/kbnode.c,
	src/keyid.c, src/pk.c, src/read-packet.c, src/seckey.c,
	src/seskey.c, src/sig-check.c, src/trustdb.c, src/write-packet.c,
	tests/t-key.c, tests/t-packet.c:

	Photo-ID support and fixes all over the place.

2002-06-02  Timo Schulz <twoaday@gnutls.org>

	* src/error.c, src/keydb.c, src/keyid.c, src/keylist.c,
	src/new-packet.c, src/opencdk.h, src/pk.c, src/read-packet.c,
	src/seckey.c, src/sig-check.c, src/write-packet.c,
	tests/t-cipher.c, tests/t-key.c, tests/t-packet.c, tests/ts.gpg:

	A lot of changes all over the place.

2002-05-27  Timo Schulz <twoaday@gnutls.org>

	* src/trustdb.c:

	Removed debug output.

2002-05-27  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, src/trustdb.c:

	2002-05-27  Timo Schulz <ts@winpt.org>

	        * trustdb.c (cdk_trustdb_check): New. Check if the file has
	        the requested version.

2002-05-26  Timo Schulz <twoaday@gnutls.org>

	* src/read-packet.c:

	2002-05-26  Timo Schulz <ts@winpt.org>

	        * read-packet.c (read_secret_key): Fixed the allocation
	        size. Thanks to Nikos.

2002-05-25  Timo Schulz <twoaday@gnutls.org>

	* src/encode-packet.c, src/iobuf.h, src/keylist.c, src/main.h,
	src/new-packet.c, src/opencdk.h, src/pkencrypt.c,
	src/read-packet.c, src/seckey.c, src/sign.c, tests/t-cipher.c,
	tests/t-key.c:

	Fixes all over the place and prefixed more structures with CDK.

2002-05-23  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/cipher.c, src/encode-packet.c, src/keydb.c,
	src/keyid.c, src/keylist.c, src/main.h, src/opencdk.h,
	src/pkencrypt.c, src/sig-check.c, src/utf8.c, tests/t-iobuf.c,
	tests/t-packet.c: [no log message]

2002-05-20  Timo Schulz <twoaday@gnutls.org>

	* src/pkencrypt.c, src/sign.c, tests/t-armor.c, tests/t-cipher.c,
	tests/t-iobuf.c, tests/t-key.c, tests/t-packet.c:

	Update for the regression tests.

2002-05-20  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/armor.c, src/cipher.c, src/compress.c,
	src/encode-packet.c, src/iobuf.c, src/keylist.c, src/main.h,
	src/opencdk.h, src/pkclist.c, src/pkencrypt.c:

	Revamped more parts of the library.

2002-05-20  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/cipher.c, src/pksign.c, src/pkverify.c,
	src/sign.c:

	More adaptations for the new version.

2002-05-20  Timo Schulz <twoaday@gnutls.org>

	* src/encode-packet.c:

	Add missing file.

2002-05-20  Timo Schulz <twoaday@gnutls.org>

	* src/mainproc.c, src/pkdecrypt.c: [no log message]

2002-05-20  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/armor.c, src/compress.c, src/error.c,
	src/iobuf.c, src/iobuf.h, src/kbnode.c, src/keydb.c, src/keyid.c,
	src/logging.c, src/main.h, src/mainproc.c, src/memory.c,
	src/misc.c, src/new-packet.c, src/opencdk.h, src/pk.c,
	src/pkclist.c, src/pkdecrypt.c, src/pkencrypt.c, src/pksign.c,
	src/pkverify.c, src/read-packet.c, src/seckey.c, src/seskey.c,
	src/sig-check.c, src/trustdb.c, src/utf8.c, src/write-packet.c:

	2002-05-20  Timo Schulz <ts@winpt.org>

	        Revamped most of the code.

	        Propably there are serious problems with some code parts!

2002-05-10  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/compress.c, src/iobuf.c, src/keydb.c,
	src/keyid.c, src/main.h, src/new-packet.c, src/opencdk.h, src/pk.c,
	src/pkclist.c, src/pkencrypt.c, src/pkverify.c, src/read-packet.c,
	src/seckey.c, src/seskey.c, src/sig-check.c, tests/t-cipher.c:

	A lot of fixes all over the place.

2002-04-23  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/iobuf.c, src/kbnode.c, src/keyid.c, src/main.h,
	src/misc.c, src/pkencrypt.c, src/read-packet.c, src/seckey.c,
	src/sig-check.c, tests/t-armor.c, tests/t-cipher.c,
	tests/t-iobuf.c, tests/t-key.c, tests/t-packet.c:

	2002-04-23  Timo Schulz <ts@winpt.org>

	        * read-packet.c (read_encrypted): Fixed partial packet size.

2002-04-21  Timo Schulz <twoaday@gnutls.org>

	* src/pkdecrypt.c, src/utf8.c:

	* Split up PK handling to decryption and encryption.

	* Basic UTF8 support.

2002-04-21  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/armor.c, src/compress.c, src/iobuf.c,
	src/keydb.c, src/main.h, src/mainproc.c, src/misc.c, src/opencdk.h,
	src/pkencrypt.c, src/read-packet.c, src/trustdb.c,
	src/write-packet.c, tests/t-armor.c, tests/t-cipher.c,
	tests/t-iobuf.c, tests/t-key.c, tests/t-packet.c:

	2002-04-21  Timo Schulz <ts@winpt.org>

	        * armor.c (check_armor): Stricter check to figure out if
	        the file was armored.
	        (cdk_armor_filter_use): Use it here and make it public.

2002-04-19  Timo Schulz <twoaday@gnutls.org>

	* src/compress.c, src/pkencrypt.c, src/write-packet.c:

	2002-04-19  Timo Schulz <ts@winpt.org>

	        * write-packet.c (write_encrypted_mdc): Corrected the
	        calculated length of the packet.

	        * pkencrypt (push_plaintext_filter): Set the correct mode
	        for the literal packet.

2002-04-17  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/compress.c, src/keydb.c, src/main.h,
	src/mainproc.c, src/memory.c, src/new-packet.c, src/opencdk.h,
	src/pkclist.c, src/pkencrypt.c, src/pksign.c, src/read-packet.c,
	src/seckey.c, src/seskey.c, src/sig-check.c, src/write-packet.c,
	tests/t-armor.c, tests/t-cipher.c, tests/t-key.c, tests/t-packet.c:

	2002-04-17  Timo Schulz <ts@winpt.org>

	        * read-packet.c (read_mpi_size): New.
	        (read_secret_key): Use it here. New SHA1 protect mode.
	        (opencdk.h): Secret key packet now contains the SHA1 flag.

	        * seckey.c (cdk_seckey_unprotect): Support for the new SHA1
	        protect mode.

2002-04-13  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/compress.c, src/error.c, src/iobuf.c,
	src/keydb.c, src/main.h, src/mainproc.c, src/new-packet.c,
	src/opencdk.h, src/pk.c, src/pkclist.c, src/pkencrypt.c,
	src/pksign.c, src/read-packet.c, src/seckey.c, src/seskey.c,
	src/sig-check.c, src/trustdb.c, src/write-packet.c,
	tests/t-cipher.c, tests/t-key.c:

	Revamped most of the interfaces (external and internal).

2002-04-10  Timo Schulz <twoaday@gnutls.org>

	* AUTHORS, README, THANKS:

	* Added email address for all authors.

	* Hint how to get the other librarires.

2002-04-10  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/armor.c, src/compress.c, src/error.c,
	src/iobuf.c, src/kbnode.c, src/keydb.c, src/keyid.c, src/main.h,
	src/mainproc.c, src/opencdk.h, src/pkencrypt.c, src/read-packet.c,
	src/seckey.c, src/seskey.c, tests/t-armor.c, tests/t-cipher.c,
	tests/t-packet.c:

	* A lot of bug fixes all over the place.

	* Main procedure for an easy packet handling.

2002-04-06  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/iobuf.c, src/logging.c, src/main.h,
	src/opencdk.h, src/read-packet.c, src/trustdb.c,
	src/write-packet.c, tests/t-armor.c, tests/t-iobuf.c:

	* Some IOBUF fixes.
	* New interface for some IOBUF functions (break the old interface).

2002-04-06  Timo Schulz <twoaday@gnutls.org>

	* acconfig.h, configure.in:

	Changes for opencdk.m4

2002-04-06  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.m4:

	Modified some files for the M4 macro file.

2002-04-05  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/compress.c, src/error.c, src/iobuf.c,
	src/kbnode.c, src/keydb.c, src/keyid.c, src/logging.c, src/misc.c,
	src/new-packet.c, src/opencdk.h, src/opencdk.m4, src/pk.c,
	src/pkclist.c, src/pkencrypt.c, src/pksign.c, src/read-packet.c,
	src/seckey.c, src/seskey.c, src/sig-check.c, src/trustdb.c,
	src/write-packet.c, tests/t-cipher.c:

	* Fixes for the M4 macro file.

	* Now no file include gcrypt.h any longer because it is included
	  into opencdk.h.

	* Some improvements for the armor parser.

2002-04-05  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/iobuf.c, tests/t-iobuf.c:

	Fixed a segfault in the armor parser.

2002-04-05  Timo Schulz <twoaday@gnutls.org>

	* src/iobuf.c, src/iobuf.h, src/keydb.c, src/new-packet.c,
	src/opencdk.h:

	Support for IOBUF's to set the filter control code.

2002-04-03  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/opencdk.h, tests/t-key.c:

	* Some bug fixes for the secret key handling in the key database
	code.

	* Fixed a error code that was used twice.

	* Regression test for the new code.

2002-03-31  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/error.c, src/keydb.c, src/keyid.c,
	src/main.h, src/misc.c, src/opencdk.h, src/pk.c, src/pkclist.c,
	src/pkencrypt.c, src/pksign.c, src/seckey.c, src/seskey.c,
	src/strgutil.c, tests/t-cipher.c, tests/t-key.c:

	* Merged the string helper functions into the misc.c file.

	* Some code for PK decryption.

	* Secret key functions for the key database.

2002-03-29  Timo Schulz <twoaday@gnutls.org>

	* src/iobuf.c, src/pk.c, src/pksign.c, src/pkverify.c,
	src/sig-check.c:

	* Bug fix for the message digest filter.

	* Some fixes all over the place.

2002-03-29  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/pkencrypt.c, src/pksign.c, src/write-packet.c:

	* Some fixes for the key database.

	* Improved signing code.

2002-03-28  Timo Schulz <twoaday@gnutls.org>

	* src/compress.c, src/opencdk.h, src/pkencrypt.c:

	* Compression bascially works.

2002-03-28  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/main.h, src/pkencrypt.c, tests/t-cipher.c:

	* Improved filter handling for encryption.

2002-03-28  Timo Schulz <twoaday@gnutls.org>

	* configure.in:

	The missing configure.in script.

2002-03-28  Timo Schulz <twoaday@gnutls.org>

	* src/compress.c, src/iobuf.c, src/memory.c, src/opencdk.h,
	src/write-packet.c, tests/t-iobuf.c, tests/t-key.c:

	* Some bugfixes for the compression code.

	* autoconf zlib detection.

2002-03-27  Timo Schulz <twoaday@gnutls.org>

	* AUTHORS, README, TODO, configure.in:

	* Committed new config files.

2002-03-27  Timo Schulz <twoaday@gnutls.org>

	* src/iobuf.c, src/sig-check.c, src/strgutil.c:


	* Some minor changes.

2002-03-27  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, src/read-packet.c, src/strgutil.c:

	* Use more expressive names to make it easier to read the code.

2002-03-27  Timo Schulz <twoaday@gnutls.org>

	* src/compress.c, src/main.h, src/misc.c, src/opencdk.h, src/pk.c,
	src/pksign.c, src/pkverify.c, src/read-packet.c, src/seckey.c,
	src/write-packet.c, tests/t-iobuf.c:

	* Several cleanups of the code.

	* Alpha interface for key generation.

	* Some improvements for the compression code.

2002-03-26  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, src/pkencrypt.c, src/seskey.c, tests/t-cipher.c:

	* Symmetric key encryption.

2002-03-25  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/pkclist.c, src/pkencrypt.c, src/write-packet.c:

	* Finished MDC support.

2002-03-25  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/iobuf.c, src/keydb.c, src/main.h,
	src/new-packet.c, src/opencdk.h, src/pkclist.c, src/pkencrypt.c,
	src/strgutil.c, tests/t-cipher.c, tests/t-iobuf.c, tests/t-key.c:

	* Enhanced MDC support.

	* Modified the cipher filter struct.

	* Some bug fixes.

2002-03-24  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/iobuf.c, src/main.h, src/misc.c, src/opencdk.h,
	src/pkencrypt.c, src/pkverify.c, src/read-packet.c, src/seckey.c,
	src/sig-check.c, src/write-packet.c, tests/t-cipher.c:

	* Improved support for direct file pointers (IOBUF).

	* Improved PK encryption routines.

	* Some fixes for the packet parsing code.

2002-03-24  Timo Schulz <twoaday@gnutls.org>

	* src/memory.c, src/opencdk.h, src/pkencrypt.c, src/write-packet.c,
	tests/t-cipher.c:

	* PK encryption basically works.

	* Some fixes for packet routines.

2002-03-22  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/iobuf.c, src/iobuf.h, src/kbnode.c, src/keydb.c,
	src/logging.c, src/main.h, src/opencdk.h, src/pkencrypt.c,
	src/read-packet.c, src/write-packet.c, tests/t-armor.c,
	tests/t-cipher.c, tests/t-iobuf.c, tests/t-key.c, tests/t-packet.c:

	A lot of bug fixes and improvements all over the place.

2002-03-20  Timo Schulz <twoaday@gnutls.org>

	* src/memory.c, src/opencdk.h, tests/t-packet.c:

	Support for a memory allocation hook.

2002-03-20  Timo Schulz <twoaday@gnutls.org>

	* src/iobuf.c, src/keydb.c, src/opencdk.h, tests/t-cipher.c,
	tests/t-iobuf.c, tests/t-key.c, tests/t-packet.c:

	Bug fixes and some improvements all over the place.

2002-03-19  Timo Schulz <twoaday@gnutls.org>

	* src/kbnode.c, src/misc.c:

	Fixed a typo.

2002-03-19  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/keyid.c, src/memory.c, src/misc.c,
	src/opencdk.h, src/pk.c, src/pkclist.c, src/seskey.c,
	src/write-packet.c:

	* More code for public key encryption.

	* Bug fixes for the PKCS-1 encoding.

2002-03-19  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/main.h, src/opencdk.h, src/pk.c, src/pkclist.c,
	src/pkencrypt.c, src/strgutil.c, src/write-packet.c:

	Fixes all over theplace.

2002-03-18  Timo Schulz <twoaday@gnutls.org>

	* src/main.h, src/memory.c, src/opencdk.h, src/pkclist.c,
	src/pkencrypt.c, src/seskey.c, tests/t-cipher.c, tests/t-key.c,
	tests/t-packet.c:

	* New secure memory interface.

	* A lot of new code for the PK encryption.

2002-03-18  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c:

	Support expiredate for public subkeys.

2002-03-18  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c:

	Bug fixes for the signature parsing function.

2002-03-17  Timo Schulz <twoaday@gnutls.org>

	* src/compress.c, src/error.c, src/iobuf.c, src/opencdk.h,
	tests/t-iobuf.c:

	* Some new code for the I/O buffers.

	* Some fixes for the compression code (still alpha!).

2002-03-15  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/compress.c, src/new-packet.c, src/opencdk.h,
	src/read-packet.c, src/write-packet.c, tests/t-packet.c:

	* Support for more packets (read/write).

	* Some minor fixes for the armor code.

2002-03-14  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/error.c, src/iobuf.c, src/opencdk.h,
	tests/t-armor.c, tests/t-iobuf.c, tests/t-key.c:

	Code to enarmor data and some bug fixes for the armor code. Now we
	use the CRC calculation in both modes.

2002-03-13  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c:

	Some fixes to be RFC2440 compatible.

2002-03-13  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/iobuf.c:

	Corrected the filtering code for the I/O buffers.

2002-03-13  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/compress.c, src/keydb.c, src/opencdk.h:

	* Added the compress.c file to the Makefile.

	* Support for different key database types.

2002-03-12  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/compress.c, src/iobuf.c, src/new-packet.c,
	src/opencdk.h:

	* Support for compression.

	* Some updates for the new code.

2002-03-12  Timo Schulz <twoaday@gnutls.org>

	* src/new-packet.c, src/opencdk.h, src/pkencrypt.c,
	src/read-packet.c, src/write-packet.c, tests/t-armor.c,
	tests/t-packet.c:

	* Improved packet handling and some new packet types.

	* Customized regression tests.

2002-03-11  Timo Schulz <twoaday@gnutls.org>

	* src/iobuf.c, src/keydb.c, src/main.h, src/opencdk.h,
	src/sig-check.c, src/write-packet.c, tests/t-cipher.c,
	tests/t-key.c, tests/t-packet.c:

	* Replaced the silly "user id hash" implementation with the
	 new KBNODE code.

	* Modified the regression tests.

2002-03-10  Timo Schulz <twoaday@gnutls.org>

	* src/pkverify.c, src/write-packet.c:

	More fixes for the signature/verify code.

2002-03-09  Timo Schulz <twoaday@gnutls.org>

	* src/pk.c, src/write-packet.c:

	Fixes for the pk_sign function.

2002-03-09  Timo Schulz <twoaday@gnutls.org>

	* src/kbnode.c, src/key.c, src/opencdk.m4, src/sexp-data.c:

	New kbnode code (from GPG) and removed the code which is no longer
	used (or in other files).

2002-03-09  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/error.c, src/iobuf.c, src/iobuf.h,
	src/keydb.c, src/keyid.c, src/logging.c, src/main.h, src/memory.c,
	src/misc.c, src/new-packet.c, src/opencdk.h, src/pk.c,
	src/pkclist.c, src/pkencrypt.c, src/pksign.c, src/pkverify.c,
	src/read-packet.c, src/seckey.c, src/seskey.c, src/sig-check.c,
	src/trustdb.c, src/write-packet.c, tests/t-armor.c,
	tests/t-cipher.c, tests/t-iobuf.c, tests/t-key.c, tests/t-packet.c,
	tests/ts.gpg:

	Revamped the whole library interface. Now it's more GPG compatible
	on the one hand and we only export interfaces the user really needs.
	Plus most of the keydb code was rewritten.

2002-02-28  Timo Schulz <twoaday@gnutls.org>

	* src/key.c, src/keydb.c, src/keyid.c, src/new-packet.c,
	src/opencdk.h, src/pk.c, src/pkclist.c, src/pkencrypt.c,
	src/pksign.c, src/pkverify.c, src/read-packet.c, src/seckey.c,
	src/seskey.c, src/sexp-data.c, src/sig-check.c, src/trustdb.c,
	src/write-packet.c, tests/t-armor.c, tests/t-cipher.c,
	tests/t-key.c, tests/t-packet.c:

	Make the whole library interface more GnuPG compatible. Now it's
	much easier to use the library to handle GPG structs.

	The new interface will break the compatibility but the fact that the
	library is work in progress and the version is still 0.0.0 should
	justify this.

2002-02-24  Timo Schulz <twoaday@gnutls.org>

	* autogen.sh:

	Removed locale directory for autoheader.

2002-02-24  Timo Schulz <twoaday@gnutls.org>

	* configure.in:

	Added the configure.in

2002-02-24  Timo Schulz <twoaday@gnutls.org>

	* AUTHORS, README, TODO, autogen.sh, configure.in: [no log message]

2002-02-24  Timo Schulz <twoaday@gnutls.org>

	* tests/t-key.c:

	Added new configure.in

2002-02-23  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/main.h, src/misc.c, src/opencdk.h, src/pk.c,
	src/sig-check.c:

	* Made the interface for the user id hash public.

	* Code for public key decryption.

2002-02-22  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/error.c, src/iobuf.c, src/iobuf.h, src/key.c,
	src/keydb.c, src/keyid.c, src/main.h, src/memory.c, src/misc.c,
	src/new-packet.c, src/opencdk.h, src/pk.c, src/pkencrypt.c,
	src/pksign.c, src/pkverify.c, src/seckey.c, src/seskey.c,
	src/sexp-data.c, src/sig-check.c, src/trustdb.c,
	src/write-packet.c, tests/t-armor.c, tests/t-cipher.c,
	tests/t-iobuf.c, tests/t-key.c:

	A lot of changes/fixes all over the place.

2002-02-17  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/error.c, src/iobuf.c, src/key.c, src/keydb.c,
	src/keyid.c, src/misc.c, src/new-packet.c, src/opencdk.h, src/pk.c,
	src/pkclist.c, src/pkencrypt.c, src/pksign.c, src/pkverify.c,
	src/read-packet.c, src/seckey.c, src/seskey.c, src/sexp-data.c,
	src/sig-check.c, src/strgutil.c, src/trustdb.c, src/write-packet.c:

	Improved the readability of the whole code (GNU coding standard).

2002-02-17  Timo Schulz <twoaday@gnutls.org>

	* src/iobuf.c, src/opencdk.h, src/pkclist.c, src/pkencrypt.c,
	src/seskey.c, src/trustdb.c:

	* Improved ownertrust handling.

	* Stubs for the IOBUF filter code.

	* Minor fixes all over the place.

2002-02-16  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/keydb.c, src/opencdk.h, src/trustdb.c:

	* Fixed a bug in the key database code.
	* Support for external ownertrust/validity handling.

2002-02-14  Timo Schulz <twoaday@gnutls.org>

	* src/iobuf.c, src/iobuf.h, src/opencdk.h:

	Some bugfixes for the previous code.

2002-02-14  Timo Schulz <twoaday@gnutls.org>

	* src/iobuf.c, src/keydb.c, src/opencdk.h:

	Some fixes for the IOBUF release function and a new function to
	exand the structure.

2002-02-11  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk-config.in:

	Added missing file for opencdk-config.

2002-02-11  Timo Schulz <twoaday@gnutls.org>

	* src/key.c, src/main.h, src/new-packet.c, src/opencdk.h,
	src/pkclist.c, src/pkencrypt.c, src/pkverify.c, src/seckey.c,
	src/sexp-data.c, src/sig-check.c, src/write-packet.c,
	tests/t-key.c:

	Fixed all over the place.

2002-02-09  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c:

	* Forgot to remove encrypt.c

2002-02-09  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/opencdk.h, src/pkencrypt.c:

	* Some new code for PK encryption.

2002-02-07  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/opencdk.h:

	* raw IOBUF support for the key database.

2002-02-07  Timo Schulz <twoaday@gnutls.org>

	* src/opencdk.h, src/sig-check.c:

	* Some more fixes.

	* Improved the code to check key signatures.

2002-02-05  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/armor.c, src/keydb.c, src/opencdk.h,
	src/pkverify.c, src/sig-check.c, tests/t-key.c:

	* Enable to use the key signature check without global keyrings.

	* Various fixes in the code.

	* opencdk-config script.

2002-02-03  Timo Schulz <twoaday@gnutls.org>

	* src/keydb.c, src/main.h, src/memory.c, src/new-packet.c,
	src/opencdk.h, src/pkverify.c, src/sig-check.c, tests/t-key.c:

	Now the new signature verification code works.

2002-02-02  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/error.c, src/key.c, src/keydb.c, src/main.h,
	src/md.c, src/opencdk.h, src/pksign.c, src/pkverify.c,
	src/read-packet.c, src/sig-check.c, src/sign.c, src/verify.c:

	A lot of new code for the signature verifcation.

2002-02-02  Timo Schulz <twoaday@gnutls.org>

	* src/iobuf.h, src/main.h, src/opencdk.h, src/verify.c,
	tests/t-cipher.c, tests/t-key.c, tests/t-packet.c:

	* A lot of small bugfixes.

	* Updated test suite.

2002-02-01  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am, src/armor.c, src/key.c, src/keydb.c,
	src/keyid.c, src/md.c, src/new-packet.c, src/opencdk.h,
	src/read-packet.c, src/sign.c:

	* Improved code structure.

	* Fixed a lot of bugs in the signature (subpacket) handling.

	* Removed some unused code.

	* Renamed some functions.

2002-01-31  Timo Schulz <twoaday@gnutls.org>

	* src/iobuf.c, src/md.c, src/pk.c, src/seskey.c, src/sign.c:

	* iobuf.c: Fixed bug in the filter code.

	* md.c: Fixed bug in the signature calculation code.

	* sign.c: Ditto.

2002-01-30  Timo Schulz <twoaday@gnutls.org>

	* src/error.c, src/key.c, src/logging.c, src/main.h, src/md.c,
	src/new-packet.c, src/opencdk.h, src/read-packet.c,
	src/sexp-data.c, src/sign.c, src/verify.c, src/write-packet.c:

	A lot of bugfixes and some revamped code.

2002-01-29  Timo Schulz <twoaday@gnutls.org>

	* src/encrypt.c, src/iobuf.c, src/main.h, src/misc.c,
	src/opencdk.h, src/pk.c, src/sexp-data.c, src/sign.c,
	tests/t-iobuf.c:

	Some more fixes.

2002-01-28  Timo Schulz <twoaday@gnutls.org>

	* src/armor.c, src/error.c, src/iobuf.c, src/opencdk.h,
	src/read-packet.c, src/sexp-data.c, tests/t-armor.c,
	tests/t-cipher.c, tests/t-packet.c:

	A lot of small fixes.

2002-01-28  Timo Schulz <twoaday@gnutls.org>

	* src/key.c, src/keydb.c, src/main.h, src/memory.c, src/opencdk.h,
	src/read-packet.c, src/strgutil.c, tests/t-key.c:

	* Removed some unused code.

	* Some additional search types for the keydb.

	* Handle the expire stuff for signatures.

2002-01-27  Timo Schulz <twoaday@gnutls.org>

	* src/Makefile.am:

	Modify the configure.in script to make the that the library is
	installed.

2002-01-27  Timo Schulz <twoaday@gnutls.org>

	* src/cdk-packet.h, src/iobuf.c, src/opencdk.h, tests/t-key.c,
	tests/t-packet.c:

	* Removed the cdk-packet.h and included it into opencdk.h.

	* Fixed a typo.

2002-01-27  Timo Schulz <twoaday@gnutls.org>

	* AUTHORS, TODO, COPYING, Makefile.am, NEWS, README, README-alpha,
	THANKS, autogen.sh, configure.in, depcomp, doc/rfc2440.txt.gz,
	src/Makefile.am, src/armor.c, src/cdk-packet.h, src/encrypt.c,
	src/error.c, src/iobuf.c, src/iobuf.h, src/key.c, src/keydb.c,
	src/logging.c, src/main.h, src/md.c, src/memory.c,
	src/new-packet.c, src/opencdk.h, src/pk.c, src/pkclist.c,
	src/read-packet.c, src/seckey.c, src/seskey.c, src/sexp-data.c,
	src/misc.c, src/sign.c, src/strgutil.c, src/verify.c,
	src/write-packet.c, tests/Makefile.am, tests/pub.gpg,
	tests/sec.gpg, tests/t-armor.c, tests/t-cipher.c, tests/t-iobuf.c,
	tests/t-key.c, tests/t-packet.c, tests/sec-with-pwd.gpg,
	tests/ts.gpg, tests/wkold.gpg: Initial revision

2002-01-27  Timo Schulz <twoaday@gnutls.org>

	* AUTHORS, TODO, COPYING, Makefile.am, NEWS, README, README-alpha,
	THANKS, autogen.sh, configure.in, depcomp, doc/rfc2440.txt.gz,
	src/Makefile.am, src/armor.c, src/cdk-packet.h, src/encrypt.c,
	src/error.c, src/iobuf.c, src/iobuf.h, src/key.c, src/keydb.c,
	src/logging.c, src/main.h, src/md.c, src/memory.c,
	src/new-packet.c, src/opencdk.h, src/pk.c, src/pkclist.c,
	src/read-packet.c, src/seckey.c, src/seskey.c, src/sexp-data.c,
	src/misc.c, src/sign.c, src/strgutil.c, src/verify.c,
	src/write-packet.c, tests/Makefile.am, tests/pub.gpg,
	tests/sec.gpg, tests/t-armor.c, tests/t-cipher.c, tests/t-iobuf.c,
	tests/t-key.c, tests/t-packet.c, tests/sec-with-pwd.gpg,
	tests/ts.gpg, tests/wkold.gpg: OpenCDK module

----------------------------------------------------------------------
  Copyright (C) 2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation
 Copying and distribution of this file, with or without modification,
 are permitted in any medium without royalty provided the copyright
 notice and this notice are preserved.
